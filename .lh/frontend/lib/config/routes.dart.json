{
    "sourceFile": "frontend/lib/config/routes.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 5,
            "patches": [
                {
                    "date": 1766327024554,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766327385409,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,233 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:go_router/go_router.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n \r\n+import '../core/constants/route_constants.dart';\r\n+import '../features/auth/bloc/auth_bloc.dart';\r\n+\r\n+// Auth Screens\r\n+import '../features/auth/presentation/screens/splash_screen.dart';\r\n+import '../features/auth/presentation/screens/onboarding_screen.dart';\r\n+import '../features/auth/presentation/screens/login_screen.dart';\r\n+import '../features/auth/presentation/screens/register_screen.dart';\r\n+import '../features/auth/presentation/screens/forgot_password_screen.dart';\r\n+\r\n+// Main Screens\r\n+import '../features/home/presentation/screens/home_screen.dart';\r\n+import '../features/profile/presentation/screens/profile_screen.dart';\r\n+import '../features/profile/presentation/screens/edit_profile_screen.dart';\r\n+import '../features/profile/presentation/screens/settings_screen.dart';\r\n+\r\n+// Trip Screens\r\n+import '../features/trips/presentation/screens/trips_list_screen.dart';\r\n+import '../features/trips/presentation/screens/trip_details_screen.dart';\r\n+import '../features/trips/presentation/screens/create_trip_screen.dart';\r\n+import '../features/trips/presentation/screens/my_trips_screen.dart';\r\n+\r\n+// Request Screens\r\n+import '../features/requests/presentation/screens/requests_list_screen.dart';\r\n+import '../features/requests/presentation/screens/request_details_screen.dart';\r\n+import '../features/requests/presentation/screens/create_request_screen.dart';\r\n+import '../features/requests/presentation/screens/my_requests_screen.dart';\r\n+\r\n+// Match Screens\r\n+import '../features/matches/presentation/screens/matches_screen.dart';\r\n+import '../features/matches/presentation/screens/match_details_screen.dart';\r\n+\r\n+// Chat Screens\r\n+import '../features/chat/presentation/screens/conversations_screen.dart';\r\n+import '../features/chat/presentation/screens/chat_screen.dart';\r\n+\r\n+// Review Screens\r\n+import '../features/reviews/presentation/screens/reviews_screen.dart';\r\n+import '../features/reviews/presentation/screens/create_review_screen.dart';\r\n+\r\n+// Notification Screens\r\n+import '../features/notifications/presentation/screens/notifications_screen.dart';\r\n+\r\n+class AppRouter {\r\n+  static final GlobalKey<NavigatorState> _rootNavigatorKey =\r\n+      GlobalKey<NavigatorState>(debugLabel: 'root');\r\n+\r\n+  static final GoRouter router = GoRouter(\r\n+    navigatorKey: _rootNavigatorKey,\r\n+    initialLocation: RouteConstants.splash,\r\n+    debugLogDiagnostics: true,\r\n+    redirect: (context, state) {\r\n+      final authState = context.read<AuthBloc>().state;\r\n+      final isAuthenticated = authState is AuthAuthenticated;\r\n+      final isAuthRoute = state.matchedLocation == RouteConstants.login ||\r\n+          state.matchedLocation == RouteConstants.register ||\r\n+          state.matchedLocation == RouteConstants.forgotPassword ||\r\n+          state.matchedLocation == RouteConstants.onboarding;\r\n+      final isSplash = state.matchedLocation == RouteConstants.splash;\r\n+\r\n+      if (isSplash) return null;\r\n+\r\n+      if (!isAuthenticated && !isAuthRoute) {\r\n+        return RouteConstants.login;\r\n+      }\r\n+\r\n+      if (isAuthenticated && isAuthRoute) {\r\n+        return RouteConstants.home;\r\n+      }\r\n+\r\n+      return null;\r\n+    },\r\n+    routes: [\r\n+      // Splash\r\n+      GoRoute(\r\n+        path: RouteConstants.splash,\r\n+        builder: (context, state) => const SplashScreen(),\r\n+      ),\r\n+\r\n+      // Onboarding\r\n+      GoRoute(\r\n+        path: RouteConstants.onboarding,\r\n+        builder: (context, state) => const OnboardingScreen(),\r\n+      ),\r\n+\r\n+      // Auth Routes\r\n+      GoRoute(\r\n+        path: RouteConstants.login,\r\n+        builder: (context, state) => const LoginScreen(),\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.register,\r\n+        builder: (context, state) => const RegisterScreen(),\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.forgotPassword,\r\n+        builder: (context, state) => const ForgotPasswordScreen(),\r\n+      ),\r\n+\r\n+      // Home (with bottom navigation)\r\n+      GoRoute(\r\n+        path: RouteConstants.home,\r\n+        builder: (context, state) => const HomeScreen(),\r\n+      ),\r\n+\r\n+      // Profile Routes\r\n+      GoRoute(\r\n+        path: RouteConstants.profile,\r\n+        builder: (context, state) => const ProfileScreen(),\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.editProfile,\r\n+        builder: (context, state) => const EditProfileScreen(),\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.settings,\r\n+        builder: (context, state) => const SettingsScreen(),\r\n+      ),\r\n+\r\n+      // Trip Routes\r\n+      GoRoute(\r\n+        path: RouteConstants.trips,\r\n+        builder: (context, state) => const TripsListScreen(),\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.tripDetails,\r\n+        builder: (context, state) {\r\n+          final tripId = state.pathParameters['id']!;\r\n+          return TripDetailsScreen(tripId: tripId);\r\n+        },\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.createTrip,\r\n+        builder: (context, state) => const CreateTripScreen(),\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.myTrips,\r\n+        builder: (context, state) => const MyTripsScreen(),\r\n+      ),\r\n+\r\n+      // Request Routes\r\n+      GoRoute(\r\n+        path: RouteConstants.requests,\r\n+        builder: (context, state) => const RequestsListScreen(),\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.requestDetails,\r\n+        builder: (context, state) {\r\n+          final requestId = state.pathParameters['id']!;\r\n+          return RequestDetailsScreen(requestId: requestId);\r\n+        },\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.createRequest,\r\n+        builder: (context, state) => const CreateRequestScreen(),\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.myRequests,\r\n+        builder: (context, state) => const MyRequestsScreen(),\r\n+      ),\r\n+\r\n+      // Match Routes\r\n+      GoRoute(\r\n+        path: RouteConstants.matches,\r\n+        builder: (context, state) => const MatchesScreen(),\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.matchDetails,\r\n+        builder: (context, state) {\r\n+          final matchId = state.pathParameters['id']!;\r\n+          return MatchDetailsScreen(matchId: matchId);\r\n+        },\r\n+      ),\r\n+\r\n+      // Chat Routes\r\n+      GoRoute(\r\n+        path: RouteConstants.conversations,\r\n+        builder: (context, state) => const ConversationsScreen(),\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.chat,\r\n+        builder: (context, state) {\r\n+          final matchId = state.pathParameters['matchId']!;\r\n+          return ChatScreen(matchId: matchId);\r\n+        },\r\n+      ),\r\n+\r\n+      // Review Routes\r\n+      GoRoute(\r\n+        path: RouteConstants.reviews,\r\n+        builder: (context, state) {\r\n+          final userId = state.pathParameters['userId']!;\r\n+          return ReviewsScreen(userId: userId);\r\n+        },\r\n+      ),\r\n+      GoRoute(\r\n+        path: RouteConstants.createReview,\r\n+        builder: (context, state) {\r\n+          final matchId = state.pathParameters['matchId']!;\r\n+          return CreateReviewScreen(matchId: matchId);\r\n+        },\r\n+      ),\r\n+\r\n+      // Notifications\r\n+      GoRoute(\r\n+        path: RouteConstants.notifications,\r\n+        builder: (context, state) => const NotificationsScreen(),\r\n+      ),\r\n+    ],\r\n+\r\n+    errorBuilder: (context, state) => Scaffold(\r\n+      body: Center(\r\n+        child: Column(\r\n+          mainAxisAlignment: MainAxisAlignment.center,\r\n+          children: [\r\n+            const Icon(Icons.error_outline, size: 64, color: Colors.red),\r\n+            const SizedBox(height: 16),\r\n+            Text('Page not found: ${state.matchedLocation}'),\r\n+            const SizedBox(height: 16),\r\n+            ElevatedButton(\r\n+              onPressed: () => context.go(RouteConstants.home),\r\n+              child: const Text('Go Home'),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    ),\r\n+  );\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766335358702,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -3,8 +3,9 @@\n import 'package:flutter_bloc/flutter_bloc.dart';\r\n \r\n import '../core/constants/route_constants.dart';\r\n import '../features/auth/bloc/auth_bloc.dart';\r\n+import '../features/auth/bloc/auth_state.dart';\r\n \r\n // Auth Screens\r\n import '../features/auth/presentation/screens/splash_screen.dart';\r\n import '../features/auth/presentation/screens/onboarding_screen.dart';\r\n@@ -100,15 +101,13 @@\n         path: RouteConstants.forgotPassword,\r\n         builder: (context, state) => const ForgotPasswordScreen(),\r\n       ),\r\n \r\n-      // Home (with bottom navigation)\r\n+      // Main Routes\r\n       GoRoute(\r\n         path: RouteConstants.home,\r\n         builder: (context, state) => const HomeScreen(),\r\n       ),\r\n-\r\n-      // Profile Routes\r\n       GoRoute(\r\n         path: RouteConstants.profile,\r\n         builder: (context, state) => const ProfileScreen(),\r\n       ),\r\n@@ -126,108 +125,98 @@\n         path: RouteConstants.trips,\r\n         builder: (context, state) => const TripsListScreen(),\r\n       ),\r\n       GoRoute(\r\n-        path: RouteConstants.tripDetails,\r\n-        builder: (context, state) {\r\n-          final tripId = state.pathParameters['id']!;\r\n-          return TripDetailsScreen(tripId: tripId);\r\n-        },\r\n-      ),\r\n-      GoRoute(\r\n         path: RouteConstants.createTrip,\r\n         builder: (context, state) => const CreateTripScreen(),\r\n       ),\r\n       GoRoute(\r\n         path: RouteConstants.myTrips,\r\n         builder: (context, state) => const MyTripsScreen(),\r\n       ),\r\n+      GoRoute(\r\n+        path: '${RouteConstants.tripDetails}/:id',\r\n+        builder: (context, state) {\r\n+          final id = state.pathParameters['id']!;\r\n+          return TripDetailsScreen(tripId: id);\r\n+        },\r\n+      ),\r\n \r\n       // Request Routes\r\n       GoRoute(\r\n         path: RouteConstants.requests,\r\n         builder: (context, state) => const RequestsListScreen(),\r\n       ),\r\n       GoRoute(\r\n-        path: RouteConstants.requestDetails,\r\n-        builder: (context, state) {\r\n-          final requestId = state.pathParameters['id']!;\r\n-          return RequestDetailsScreen(requestId: requestId);\r\n-        },\r\n-      ),\r\n-      GoRoute(\r\n         path: RouteConstants.createRequest,\r\n         builder: (context, state) => const CreateRequestScreen(),\r\n       ),\r\n       GoRoute(\r\n         path: RouteConstants.myRequests,\r\n         builder: (context, state) => const MyRequestsScreen(),\r\n       ),\r\n+      GoRoute(\r\n+        path: '${RouteConstants.requestDetails}/:id',\r\n+        builder: (context, state) {\r\n+          final id = state.pathParameters['id']!;\r\n+          return RequestDetailsScreen(requestId: id);\r\n+        },\r\n+      ),\r\n \r\n       // Match Routes\r\n       GoRoute(\r\n         path: RouteConstants.matches,\r\n         builder: (context, state) => const MatchesScreen(),\r\n       ),\r\n       GoRoute(\r\n-        path: RouteConstants.matchDetails,\r\n+        path: '${RouteConstants.matchDetails}/:id',\r\n         builder: (context, state) {\r\n-          final matchId = state.pathParameters['id']!;\r\n-          return MatchDetailsScreen(matchId: matchId);\r\n+          final id = state.pathParameters['id']!;\r\n+          return MatchDetailsScreen(matchId: id);\r\n         },\r\n       ),\r\n \r\n       // Chat Routes\r\n       GoRoute(\r\n-        path: RouteConstants.conversations,\r\n+        path: RouteConstants.chats,\r\n         builder: (context, state) => const ConversationsScreen(),\r\n       ),\r\n       GoRoute(\r\n-        path: RouteConstants.chat,\r\n+        path: '${RouteConstants.chat}/:id',\r\n         builder: (context, state) {\r\n-          final matchId = state.pathParameters['matchId']!;\r\n-          return ChatScreen(matchId: matchId);\r\n+          final id = state.pathParameters['id']!;\r\n+          final extra = state.extra as Map<String, dynamic>?;\r\n+          return ChatScreen(\r\n+            chatId: id,\r\n+            otherUserId: extra?['otherUserId'] ?? '',\r\n+            otherUserName: extra?['otherUserName'] ?? '',\r\n+          );\r\n         },\r\n       ),\r\n \r\n       // Review Routes\r\n       GoRoute(\r\n-        path: RouteConstants.reviews,\r\n+        path: '${RouteConstants.reviews}/:userId',\r\n         builder: (context, state) {\r\n           final userId = state.pathParameters['userId']!;\r\n           return ReviewsScreen(userId: userId);\r\n         },\r\n       ),\r\n       GoRoute(\r\n         path: RouteConstants.createReview,\r\n         builder: (context, state) {\r\n-          final matchId = state.pathParameters['matchId']!;\r\n-          return CreateReviewScreen(matchId: matchId);\r\n+          final extra = state.extra as Map<String, dynamic>;\r\n+          return CreateReviewScreen(\r\n\\ No newline at end of file\n+            targetUserId: extra['targetUserId'],\r\n+            transactionId: extra['transactionId'],\r\n+          );\r\n         },\r\n       ),\r\n \r\n-      // Notifications\r\n+      // Notification Routes\r\n       GoRoute(\r\n         path: RouteConstants.notifications,\r\n         builder: (context, state) => const NotificationsScreen(),\r\n       ),\r\n     ],\r\n-\r\n-    errorBuilder: (context, state) => Scaffold(\r\n-      body: Center(\r\n-        child: Column(\r\n-          mainAxisAlignment: MainAxisAlignment.center,\r\n-          children: [\r\n-            const Icon(Icons.error_outline, size: 64, color: Colors.red),\r\n-            const SizedBox(height: 16),\r\n-            Text('Page not found: ${state.matchedLocation}'),\r\n-            const SizedBox(height: 16),\r\n-            ElevatedButton(\r\n-              onPressed: () => context.go(RouteConstants.home),\r\n-              child: const Text('Go Home'),\r\n-            ),\r\n-          ],\r\n-        ),\r\n-      ),\r\n-    ),\r\n   );\r\n-}\n+}\r\n"
                },
                {
                    "date": 1766335487220,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -133,9 +133,9 @@\n         path: RouteConstants.myTrips,\r\n         builder: (context, state) => const MyTripsScreen(),\r\n       ),\r\n       GoRoute(\r\n-        path: '${RouteConstants.tripDetails}/:id',\r\n+        path: RouteConstants.tripDetails,\r\n         builder: (context, state) {\r\n           final id = state.pathParameters['id']!;\r\n           return TripDetailsScreen(tripId: id);\r\n         },\r\n@@ -154,9 +154,9 @@\n         path: RouteConstants.myRequests,\r\n         builder: (context, state) => const MyRequestsScreen(),\r\n       ),\r\n       GoRoute(\r\n-        path: '${RouteConstants.requestDetails}/:id',\r\n+        path: RouteConstants.requestDetails,\r\n         builder: (context, state) {\r\n           final id = state.pathParameters['id']!;\r\n           return RequestDetailsScreen(requestId: id);\r\n         },\r\n@@ -167,9 +167,9 @@\n         path: RouteConstants.matches,\r\n         builder: (context, state) => const MatchesScreen(),\r\n       ),\r\n       GoRoute(\r\n-        path: '${RouteConstants.matchDetails}/:id',\r\n+        path: RouteConstants.matchDetails,\r\n         builder: (context, state) {\r\n           final id = state.pathParameters['id']!;\r\n           return MatchDetailsScreen(matchId: id);\r\n         },\r\n@@ -180,36 +180,28 @@\n         path: RouteConstants.chats,\r\n         builder: (context, state) => const ConversationsScreen(),\r\n       ),\r\n       GoRoute(\r\n-        path: '${RouteConstants.chat}/:id',\r\n+        path: RouteConstants.chat,\r\n         builder: (context, state) {\r\n-          final id = state.pathParameters['id']!;\r\n-          final extra = state.extra as Map<String, dynamic>?;\r\n-          return ChatScreen(\r\n-            chatId: id,\r\n-            otherUserId: extra?['otherUserId'] ?? '',\r\n-            otherUserName: extra?['otherUserName'] ?? '',\r\n-          );\r\n+          final matchId = state.pathParameters['matchId']!;\r\n+          return ChatScreen(matchId: matchId);\r\n         },\r\n       ),\r\n \r\n       // Review Routes\r\n       GoRoute(\r\n-        path: '${RouteConstants.reviews}/:userId',\r\n+        path: RouteConstants.reviews,\r\n         builder: (context, state) {\r\n           final userId = state.pathParameters['userId']!;\r\n           return ReviewsScreen(userId: userId);\r\n         },\r\n       ),\r\n       GoRoute(\r\n         path: RouteConstants.createReview,\r\n         builder: (context, state) {\r\n-          final extra = state.extra as Map<String, dynamic>;\r\n-          return CreateReviewScreen(\r\n-            targetUserId: extra['targetUserId'],\r\n-            transactionId: extra['transactionId'],\r\n-          );\r\n+          final matchId = state.pathParameters['matchId']!;\r\n+          return CreateReviewScreen(matchId: matchId);\r\n         },\r\n       ),\r\n \r\n       // Notification Routes\r\n@@ -218,5 +210,5 @@\n         builder: (context, state) => const NotificationsScreen(),\r\n       ),\r\n     ],\r\n   );\r\n-}\n\\ No newline at end of file\n+}\r\n"
                },
                {
                    "date": 1766335628501,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -100,8 +100,19 @@\n       GoRoute(\r\n         path: RouteConstants.forgotPassword,\r\n         builder: (context, state) => const ForgotPasswordScreen(),\r\n       ),\r\n+      GoRoute(\r\n+        path: RouteConstants.verifyPhone,\r\n+        builder: (context, state) {\r\n+          final extra = state.extra as Map<String, dynamic>;\r\n+          return VerifyPhoneScreen(\r\n+            verificationId: extra['verificationId'],\r\n+            phoneNumber: extra['phoneNumber'],\r\n+            fullName: extra['fullName'],\r\n+          );\r\n+        },\r\n+      ),\r\n \r\n       // Main Routes\r\n       GoRoute(\r\n         path: RouteConstants.home,\r\n"
                },
                {
                    "date": 1766335670275,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -11,8 +11,9 @@\n import '../features/auth/presentation/screens/onboarding_screen.dart';\r\n import '../features/auth/presentation/screens/login_screen.dart';\r\n import '../features/auth/presentation/screens/register_screen.dart';\r\n import '../features/auth/presentation/screens/forgot_password_screen.dart';\r\n+import '../features/auth/presentation/screens/verify_phone_screen.dart';\r\n \r\n // Main Screens\r\n import '../features/home/presentation/screens/home_screen.dart';\r\n import '../features/profile/presentation/screens/profile_screen.dart';\r\n"
                }
            ],
            "date": 1766327024554,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
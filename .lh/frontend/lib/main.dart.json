{
    "sourceFile": "frontend/lib/main.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 11,
            "patches": [
                {
                    "date": 1766327107780,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766347306276,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,23 +19,37 @@\n     DeviceOrientation.portraitDown,\r\n   ]);\r\n \r\n   // Initialize Firebase\r\n-  await Firebase.initializeApp(\r\n-    options: DefaultFirebaseOptions.currentPlatform,\r\n-  );\r\n+  var firebaseInitialized = false;\r\n+  try {\r\n+    await Firebase.initializeApp(\r\n+      options: DefaultFirebaseOptions.currentPlatform,\r\n+    );\r\n+    firebaseInitialized = true;\r\n+  } catch (error, stackTrace) {\r\n+    debugPrint(\r\n+      'Firebase initialization failed. Running without Firebase.\\n'\r\n+      'Error: $error\\n$stackTrace',\r\n+    );\r\n+  }\r\n \r\n-  // Initialize Crashlytics\r\n-  FlutterError.onError = FirebaseCrashlytics.instance.recordFlutterFatalError;\r\n+  // Initialize Crashlytics (only when Firebase is configured)\r\n+  if (firebaseInitialized) {\r\n+    FlutterError.onError =\r\n+        FirebaseCrashlytics.instance.recordFlutterFatalError;\r\n+  }\r\n \r\n   // Initialize Hive for local storage\r\n   await Hive.initFlutter();\r\n \r\n   // Setup dependency injection\r\n   await configureDependencies();\r\n \r\n   // Initialize notifications\r\n-  await getIt<NotificationService>().initialize();\r\n+  if (firebaseInitialized) {\r\n+    await getIt<NotificationService>().initialize();\r\n+  }\r\n \r\n   // Custom BLoC observer for debugging\r\n   Bloc.observer = AppBlocObserver();\r\n \r\n@@ -52,7 +66,11 @@\n   @override\r\n   void onError(BlocBase bloc, Object error, StackTrace stackTrace) {\r\n     super.onError(bloc, error, stackTrace);\r\n     debugPrint('${bloc.runtimeType} $error $stackTrace');\r\n-    FirebaseCrashlytics.instance.recordError(error, stackTrace);\r\n+    try {\r\n+      FirebaseCrashlytics.instance.recordError(error, stackTrace);\r\n\\ No newline at end of file\n+    } catch (_) {\r\n+      // Firebase may be unconfigured; ignore.\r\n+    }\r\n   }\r\n-}\n+}\r\n"
                },
                {
                    "date": 1766347849734,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -19,18 +19,37 @@\n     DeviceOrientation.portraitDown,\r\n   ]);\r\n \r\n   // Initialize Firebase\r\n+  // Note: This project currently contains placeholder values in `firebase_options.dart`.\r\n+  // When Firebase isn't configured, initializing it can crash the app at runtime\r\n+  // (e.g., missing/invalid google_app_id for Crashlytics/Analytics).\r\n   var firebaseInitialized = false;\r\n-  try {\r\n-    await Firebase.initializeApp(\r\n-      options: DefaultFirebaseOptions.currentPlatform,\r\n-    );\r\n-    firebaseInitialized = true;\r\n-  } catch (error, stackTrace) {\r\n+  final firebaseOptions = DefaultFirebaseOptions.currentPlatform;\r\n+  final hasRealFirebaseConfig =\r\n+      firebaseOptions.apiKey.isNotEmpty &&\r\n+      firebaseOptions.appId.isNotEmpty &&\r\n+      firebaseOptions.messagingSenderId.isNotEmpty &&\r\n+      !firebaseOptions.apiKey.startsWith('dummy-') &&\r\n+      !firebaseOptions.appId.startsWith('dummy-') &&\r\n+      !firebaseOptions.messagingSenderId.startsWith('dummy-');\r\n+\r\n+  if (hasRealFirebaseConfig) {\r\n+    try {\r\n+      await Firebase.initializeApp(\r\n+        options: firebaseOptions,\r\n+      );\r\n+      firebaseInitialized = true;\r\n+    } catch (error, stackTrace) {\r\n+      debugPrint(\r\n+        'Firebase initialization failed. Running without Firebase.\\n'\r\n+        'Error: $error\\n$stackTrace',\r\n+      );\r\n+    }\r\n+  } else {\r\n     debugPrint(\r\n-      'Firebase initialization failed. Running without Firebase.\\n'\r\n-      'Error: $error\\n$stackTrace',\r\n+      'Firebase is not configured (placeholder values detected). '\r\n+      'Running without Firebase.',\r\n     );\r\n   }\r\n \r\n   // Initialize Crashlytics (only when Firebase is configured)\r\n@@ -72,5 +91,5 @@\n     } catch (_) {\r\n       // Firebase may be unconfigured; ignore.\r\n     }\r\n   }\r\n-}\n\\ No newline at end of file\n+}\r\n"
                },
                {
                    "date": 1766347899493,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,95 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter/services.dart';\r\n+import 'package:firebase_core/firebase_core.dart';\r\n+import 'package:firebase_crashlytics/firebase_crashlytics.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:hive_flutter/hive_flutter.dart';\r\n+\r\n+import 'firebase_options.dart';\r\n+import 'app.dart';\r\n+import 'config/dependency_injection.dart';\r\n+import 'core/services/notification_service.dart';\r\n+\r\n+void main() async {\r\n+  WidgetsFlutterBinding.ensureInitialized();\r\n+\r\n+  // Set preferred orientations\r\n+  await SystemChrome.setPreferredOrientations([\r\n+    DeviceOrientation.portraitUp,\r\n+    DeviceOrientation.portraitDown,\r\n+  ]);\r\n+\r\n+  // Initialize Firebase\r\n+  // Note: This project currently contains placeholder values in `firebase_options.dart`.\r\n+  // When Firebase isn't configured, initializing it can crash the app at runtime\r\n+  // (e.g., missing/invalid google_app_id for Crashlytics/Analytics).\r\n+  var firebaseInitialized = false;\r\n+  final firebaseOptions = DefaultFirebaseOptions.currentPlatform;\r\n+  final hasRealFirebaseConfig =\r\n+      firebaseOptions.apiKey.isNotEmpty &&\r\n+      firebaseOptions.appId.isNotEmpty &&\r\n+      firebaseOptions.messagingSenderId.isNotEmpty &&\r\n+      !firebaseOptions.apiKey.startsWith('dummy-') &&\r\n+      !firebaseOptions.appId.startsWith('dummy-') &&\r\n+      !firebaseOptions.messagingSenderId.startsWith('dummy-');\r\n+\r\n+  if (hasRealFirebaseConfig) {\r\n+    try {\r\n+      await Firebase.initializeApp(\r\n+        options: firebaseOptions,\r\n+      );\r\n+      firebaseInitialized = true;\r\n+    } catch (error, stackTrace) {\r\n+      debugPrint(\r\n+        'Firebase initialization failed. Running without Firebase.\\n'\r\n+        'Error: $error\\n$stackTrace',\r\n+      );\r\n+    }\r\n+  } else {\r\n+    debugPrint(\r\n+      'Firebase is not configured (placeholder values detected). '\r\n+      'Running without Firebase.',\r\n+    );\r\n+  }\r\n+\r\n+  // Initialize Crashlytics (only when Firebase is configured)\r\n+  if (firebaseInitialized) {\r\n+    FlutterError.onError =\r\n+        FirebaseCrashlytics.instance.recordFlutterFatalError;\r\n+  }\r\n+\r\n+  // Initialize Hive for local storage\r\n+  await Hive.initFlutter();\r\n+\r\n+  // Setup dependency injection\r\n+  await configureDependencies();\r\n+\r\n+  // Initialize notifications\r\n+  if (firebaseInitialized) {\r\n+    await getIt<NotificationService>().initialize();\r\n+  }\r\n+\r\n+  // Custom BLoC observer for debugging\r\n+  Bloc.observer = AppBlocObserver();\r\n+\r\n+  runApp(DiasporaDeliveryApp(firebaseInitialized: firebaseInitialized));\r\n+}\r\n+\r\n+class AppBlocObserver extends BlocObserver {\r\n+  @override\r\n+  void onChange(BlocBase bloc, Change change) {\r\n+    super.onChange(bloc, change);\r\n+    debugPrint('${bloc.runtimeType} $change');\r\n+  }\r\n+\r\n+  @override\r\n+  void onError(BlocBase bloc, Object error, StackTrace stackTrace) {\r\n+    super.onError(bloc, error, stackTrace);\r\n+    debugPrint('${bloc.runtimeType} $error $stackTrace');\r\n+    try {\r\n+      FirebaseCrashlytics.instance.recordError(error, stackTrace);\r\n+    } catch (_) {\r\n+      // Firebase may be unconfigured; ignore.\r\n+    }\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1766348216652,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,9 @@\n import 'package:flutter/material.dart';\r\n import 'package:flutter/services.dart';\r\n import 'package:firebase_core/firebase_core.dart';\r\n import 'package:firebase_crashlytics/firebase_crashlytics.dart';\r\n+import 'package:flutter/foundation.dart';\r\n import 'package:flutter_bloc/flutter_bloc.dart';\r\n import 'package:hive_flutter/hive_flutter.dart';\r\n \r\n import 'firebase_options.dart';\r\n@@ -32,24 +33,28 @@\n       !firebaseOptions.apiKey.startsWith('dummy-') &&\r\n       !firebaseOptions.appId.startsWith('dummy-') &&\r\n       !firebaseOptions.messagingSenderId.startsWith('dummy-');\r\n \r\n-  if (hasRealFirebaseConfig) {\r\n-    try {\r\n-      await Firebase.initializeApp(\r\n-        options: firebaseOptions,\r\n-      );\r\n+  try {\r\n+    if (hasRealFirebaseConfig) {\r\n+      await Firebase.initializeApp(options: firebaseOptions);\r\n       firebaseInitialized = true;\r\n-    } catch (error, stackTrace) {\r\n+    } else if (!kIsWeb && defaultTargetPlatform == TargetPlatform.android) {\r\n+      // On Android, if `android/app/google-services.json` is present and the\r\n+      // Google Services Gradle plugin is applied, Firebase can initialize using\r\n+      // default options generated into Android resources.\r\n+      await Firebase.initializeApp();\r\n+      firebaseInitialized = true;\r\n+    } else {\r\n       debugPrint(\r\n-        'Firebase initialization failed. Running without Firebase.\\n'\r\n-        'Error: $error\\n$stackTrace',\r\n+        'Firebase is not configured (placeholder values detected). '\r\n+        'Running without Firebase.',\r\n       );\r\n     }\r\n-  } else {\r\n+  } catch (error, stackTrace) {\r\n     debugPrint(\r\n-      'Firebase is not configured (placeholder values detected). '\r\n-      'Running without Firebase.',\r\n+      'Firebase initialization failed. Running without Firebase.\\n'\r\n+      'Error: $error\\n$stackTrace',\r\n     );\r\n   }\r\n \r\n   // Initialize Crashlytics (only when Firebase is configured)\r\n@@ -92,99 +97,4 @@\n       // Firebase may be unconfigured; ignore.\r\n     }\r\n   }\r\n }\r\n-import 'package:flutter/material.dart';\r\n-import 'package:flutter/services.dart';\r\n-import 'package:firebase_core/firebase_core.dart';\r\n-import 'package:firebase_crashlytics/firebase_crashlytics.dart';\r\n-import 'package:flutter_bloc/flutter_bloc.dart';\r\n-import 'package:hive_flutter/hive_flutter.dart';\r\n-\r\n-import 'firebase_options.dart';\r\n-import 'app.dart';\r\n-import 'config/dependency_injection.dart';\r\n-import 'core/services/notification_service.dart';\r\n-\r\n-void main() async {\r\n-  WidgetsFlutterBinding.ensureInitialized();\r\n-\r\n-  // Set preferred orientations\r\n-  await SystemChrome.setPreferredOrientations([\r\n-    DeviceOrientation.portraitUp,\r\n-    DeviceOrientation.portraitDown,\r\n-  ]);\r\n-\r\n-  // Initialize Firebase\r\n-  // Note: This project currently contains placeholder values in `firebase_options.dart`.\r\n-  // When Firebase isn't configured, initializing it can crash the app at runtime\r\n-  // (e.g., missing/invalid google_app_id for Crashlytics/Analytics).\r\n-  var firebaseInitialized = false;\r\n-  final firebaseOptions = DefaultFirebaseOptions.currentPlatform;\r\n-  final hasRealFirebaseConfig =\r\n-      firebaseOptions.apiKey.isNotEmpty &&\r\n-      firebaseOptions.appId.isNotEmpty &&\r\n-      firebaseOptions.messagingSenderId.isNotEmpty &&\r\n-      !firebaseOptions.apiKey.startsWith('dummy-') &&\r\n-      !firebaseOptions.appId.startsWith('dummy-') &&\r\n-      !firebaseOptions.messagingSenderId.startsWith('dummy-');\r\n-\r\n-  if (hasRealFirebaseConfig) {\r\n-    try {\r\n-      await Firebase.initializeApp(\r\n-        options: firebaseOptions,\r\n-      );\r\n-      firebaseInitialized = true;\r\n-    } catch (error, stackTrace) {\r\n-      debugPrint(\r\n-        'Firebase initialization failed. Running without Firebase.\\n'\r\n-        'Error: $error\\n$stackTrace',\r\n-      );\r\n-    }\r\n-  } else {\r\n-    debugPrint(\r\n-      'Firebase is not configured (placeholder values detected). '\r\n-      'Running without Firebase.',\r\n-    );\r\n-  }\r\n-\r\n-  // Initialize Crashlytics (only when Firebase is configured)\r\n-  if (firebaseInitialized) {\r\n-    FlutterError.onError =\r\n-        FirebaseCrashlytics.instance.recordFlutterFatalError;\r\n-  }\r\n-\r\n-  // Initialize Hive for local storage\r\n-  await Hive.initFlutter();\r\n-\r\n-  // Setup dependency injection\r\n-  await configureDependencies();\r\n-\r\n-  // Initialize notifications\r\n-  if (firebaseInitialized) {\r\n-    await getIt<NotificationService>().initialize();\r\n-  }\r\n-\r\n-  // Custom BLoC observer for debugging\r\n-  Bloc.observer = AppBlocObserver();\r\n-\r\n-  runApp(const DiasporaDeliveryApp());\r\n-}\r\n-\r\n-class AppBlocObserver extends BlocObserver {\r\n-  @override\r\n-  void onChange(BlocBase bloc, Change change) {\r\n-    super.onChange(bloc, change);\r\n-    debugPrint('${bloc.runtimeType} $change');\r\n-  }\r\n-\r\n-  @override\r\n-  void onError(BlocBase bloc, Object error, StackTrace stackTrace) {\r\n-    super.onError(bloc, error, stackTrace);\r\n-    debugPrint('${bloc.runtimeType} $error $stackTrace');\r\n-    try {\r\n-      FirebaseCrashlytics.instance.recordError(error, stackTrace);\r\n-    } catch (_) {\r\n-      // Firebase may be unconfigured; ignore.\r\n-    }\r\n-  }\r\n-}\r\n"
                },
                {
                    "date": 1766389947620,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,14 +37,8 @@\n   try {\r\n     if (hasRealFirebaseConfig) {\r\n       await Firebase.initializeApp(options: firebaseOptions);\r\n       firebaseInitialized = true;\r\n-    } else if (!kIsWeb && defaultTargetPlatform == TargetPlatform.android) {\r\n-      // On Android, if `android/app/google-services.json` is present and the\r\n-      // Google Services Gradle plugin is applied, Firebase can initialize using\r\n-      // default options generated into Android resources.\r\n-      await Firebase.initializeApp();\r\n-      firebaseInitialized = true;\r\n     } else {\r\n       debugPrint(\r\n         'Firebase is not configured (placeholder values detected). '\r\n         'Running without Firebase.',\r\n"
                },
                {
                    "date": 1766394605747,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,9 +1,8 @@\n import 'package:flutter/material.dart';\r\n import 'package:flutter/services.dart';\r\n import 'package:firebase_core/firebase_core.dart';\r\n import 'package:firebase_crashlytics/firebase_crashlytics.dart';\r\n-import 'package:flutter/foundation.dart';\r\n import 'package:flutter_bloc/flutter_bloc.dart';\r\n import 'package:hive_flutter/hive_flutter.dart';\r\n \r\n import 'firebase_options.dart';\r\n"
                },
                {
                    "date": 1766401049766,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,115 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter/services.dart';\r\n+import 'package:firebase_core/firebase_core.dart';\r\n+import 'package:firebase_crashlytics/firebase_crashlytics.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:hive_flutter/hive_flutter.dart';\r\n+\r\n+import 'firebase_options.dart';\r\n+import 'app.dart';\r\n+import 'config/dependency_injection.dart';\r\n+import 'core/services/notification_service.dart';\r\n+\r\n+void main() async {\r\n+  WidgetsFlutterBinding.ensureInitialized();\r\n+\r\n+  const useFirebaseEmulators = bool.fromEnvironment(\r\n+    'USE_FIREBASE_EMULATORS',\r\n+    defaultValue: false,\r\n+  );\r\n+  const firebaseEmulatorHost = String.fromEnvironment(\r\n+    'FIREBASE_EMULATOR_HOST',\r\n+    defaultValue: '127.0.0.1',\r\n+  );\r\n+\r\n+  // Set preferred orientations\r\n+  await SystemChrome.setPreferredOrientations([\r\n+    DeviceOrientation.portraitUp,\r\n+    DeviceOrientation.portraitDown,\r\n+  ]);\r\n+\r\n+  // Initialize Firebase\r\n+  // Note: This project currently contains placeholder values in `firebase_options.dart`.\r\n+  // When Firebase isn't configured, initializing it can crash the app at runtime\r\n+  // (e.g., missing/invalid google_app_id for Crashlytics/Analytics).\r\n+  var firebaseInitialized = false;\r\n+  final firebaseOptions = DefaultFirebaseOptions.currentPlatform;\r\n+  final hasRealFirebaseConfig =\r\n+      firebaseOptions.apiKey.isNotEmpty &&\r\n+      firebaseOptions.appId.isNotEmpty &&\r\n+      firebaseOptions.messagingSenderId.isNotEmpty &&\r\n+      !firebaseOptions.apiKey.startsWith('dummy-') &&\r\n+      !firebaseOptions.appId.startsWith('dummy-') &&\r\n+      !firebaseOptions.messagingSenderId.startsWith('dummy-');\r\n+\r\n+  try {\r\n+    if (hasRealFirebaseConfig) {\r\n+      await Firebase.initializeApp(options: firebaseOptions);\r\n+      firebaseInitialized = true;\r\n+\r\n+      if (useFirebaseEmulators) {\r\n+        FirebaseAuth.instance.useAuthEmulator(firebaseEmulatorHost, 9099);\r\n+        FirebaseFirestore.instance.useFirestoreEmulator(\r\n+          firebaseEmulatorHost,\r\n+          8080,\r\n+        );\r\n+        FirebaseStorage.instance.useStorageEmulator(firebaseEmulatorHost, 9199);\r\n+        debugPrint(\r\n+          'Using Firebase Emulators at $firebaseEmulatorHost '\r\n+          '(auth:9099, firestore:8080, storage:9199)',\r\n+        );\r\n+      }\r\n+    } else {\r\n+      debugPrint(\r\n+        'Firebase is not configured (placeholder values detected). '\r\n+        'Running without Firebase.',\r\n+      );\r\n+    }\r\n+  } catch (error, stackTrace) {\r\n+    debugPrint(\r\n+      'Firebase initialization failed. Running without Firebase.\\n'\r\n+      'Error: $error\\n$stackTrace',\r\n+    );\r\n+  }\r\n+\r\n+  // Initialize Crashlytics (only when Firebase is configured)\r\n+  if (firebaseInitialized) {\r\n+    FlutterError.onError =\r\n+        FirebaseCrashlytics.instance.recordFlutterFatalError;\r\n+  }\r\n+\r\n+  // Initialize Hive for local storage\r\n+  await Hive.initFlutter();\r\n+\r\n+  // Setup dependency injection\r\n+  await configureDependencies();\r\n+\r\n+  // Initialize notifications\r\n+  if (firebaseInitialized) {\r\n+    await getIt<NotificationService>().initialize();\r\n+  }\r\n+\r\n+  // Custom BLoC observer for debugging\r\n+  Bloc.observer = AppBlocObserver();\r\n+\r\n+  runApp(DiasporaDeliveryApp(firebaseInitialized: firebaseInitialized));\r\n+}\r\n+\r\n+class AppBlocObserver extends BlocObserver {\r\n+  @override\r\n+  void onChange(BlocBase bloc, Change change) {\r\n+    super.onChange(bloc, change);\r\n+    debugPrint('${bloc.runtimeType} $change');\r\n+  }\r\n+\r\n+  @override\r\n+  void onError(BlocBase bloc, Object error, StackTrace stackTrace) {\r\n+    super.onError(bloc, error, stackTrace);\r\n+    debugPrint('${bloc.runtimeType} $error $stackTrace');\r\n+    try {\r\n+      FirebaseCrashlytics.instance.recordError(error, stackTrace);\r\n+    } catch (_) {\r\n+      // Firebase may be unconfigured; ignore.\r\n+    }\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1766401369884,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,10 @@\n import 'package:flutter/material.dart';\r\n import 'package:flutter/services.dart';\r\n import 'package:firebase_core/firebase_core.dart';\r\n+import 'package:firebase_auth/firebase_auth.dart';\r\n+import 'package:cloud_firestore/cloud_firestore.dart';\r\n+import 'package:firebase_storage/firebase_storage.dart';\r\n import 'package:firebase_crashlytics/firebase_crashlytics.dart';\r\n import 'package:flutter_bloc/flutter_bloc.dart';\r\n import 'package:hive_flutter/hive_flutter.dart';\r\n \r\n@@ -112,97 +115,4 @@\n       // Firebase may be unconfigured; ignore.\r\n     }\r\n   }\r\n }\r\n-import 'package:flutter/material.dart';\r\n-import 'package:flutter/services.dart';\r\n-import 'package:firebase_core/firebase_core.dart';\r\n-import 'package:firebase_crashlytics/firebase_crashlytics.dart';\r\n-import 'package:flutter_bloc/flutter_bloc.dart';\r\n-import 'package:hive_flutter/hive_flutter.dart';\r\n-\r\n-import 'firebase_options.dart';\r\n-import 'app.dart';\r\n-import 'config/dependency_injection.dart';\r\n-import 'core/services/notification_service.dart';\r\n-\r\n-void main() async {\r\n-  WidgetsFlutterBinding.ensureInitialized();\r\n-\r\n-  // Set preferred orientations\r\n-  await SystemChrome.setPreferredOrientations([\r\n-    DeviceOrientation.portraitUp,\r\n-    DeviceOrientation.portraitDown,\r\n-  ]);\r\n-\r\n-  // Initialize Firebase\r\n-  // Note: This project currently contains placeholder values in `firebase_options.dart`.\r\n-  // When Firebase isn't configured, initializing it can crash the app at runtime\r\n-  // (e.g., missing/invalid google_app_id for Crashlytics/Analytics).\r\n-  var firebaseInitialized = false;\r\n-  final firebaseOptions = DefaultFirebaseOptions.currentPlatform;\r\n-  final hasRealFirebaseConfig =\r\n-      firebaseOptions.apiKey.isNotEmpty &&\r\n-      firebaseOptions.appId.isNotEmpty &&\r\n-      firebaseOptions.messagingSenderId.isNotEmpty &&\r\n-      !firebaseOptions.apiKey.startsWith('dummy-') &&\r\n-      !firebaseOptions.appId.startsWith('dummy-') &&\r\n-      !firebaseOptions.messagingSenderId.startsWith('dummy-');\r\n-\r\n-  try {\r\n-    if (hasRealFirebaseConfig) {\r\n-      await Firebase.initializeApp(options: firebaseOptions);\r\n-      firebaseInitialized = true;\r\n-    } else {\r\n-      debugPrint(\r\n-        'Firebase is not configured (placeholder values detected). '\r\n-        'Running without Firebase.',\r\n-      );\r\n-    }\r\n-  } catch (error, stackTrace) {\r\n-    debugPrint(\r\n-      'Firebase initialization failed. Running without Firebase.\\n'\r\n-      'Error: $error\\n$stackTrace',\r\n-    );\r\n-  }\r\n-\r\n-  // Initialize Crashlytics (only when Firebase is configured)\r\n-  if (firebaseInitialized) {\r\n-    FlutterError.onError =\r\n-        FirebaseCrashlytics.instance.recordFlutterFatalError;\r\n-  }\r\n-\r\n-  // Initialize Hive for local storage\r\n-  await Hive.initFlutter();\r\n-\r\n-  // Setup dependency injection\r\n-  await configureDependencies();\r\n-\r\n-  // Initialize notifications\r\n-  if (firebaseInitialized) {\r\n-    await getIt<NotificationService>().initialize();\r\n-  }\r\n-\r\n-  // Custom BLoC observer for debugging\r\n-  Bloc.observer = AppBlocObserver();\r\n-\r\n-  runApp(DiasporaDeliveryApp(firebaseInitialized: firebaseInitialized));\r\n-}\r\n-\r\n-class AppBlocObserver extends BlocObserver {\r\n-  @override\r\n-  void onChange(BlocBase bloc, Change change) {\r\n-    super.onChange(bloc, change);\r\n-    debugPrint('${bloc.runtimeType} $change');\r\n-  }\r\n-\r\n-  @override\r\n-  void onError(BlocBase bloc, Object error, StackTrace stackTrace) {\r\n-    super.onError(bloc, error, stackTrace);\r\n-    debugPrint('${bloc.runtimeType} $error $stackTrace');\r\n-    try {\r\n-      FirebaseCrashlytics.instance.recordError(error, stackTrace);\r\n-    } catch (_) {\r\n-      // Firebase may be unconfigured; ignore.\r\n-    }\r\n-  }\r\n-}\r\n"
                },
                {
                    "date": 1766592994014,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -15,11 +15,12 @@\n \r\n void main() async {\r\n   WidgetsFlutterBinding.ensureInitialized();\r\n \r\n+  const isReleaseMode = bool.fromEnvironment('dart.vm.product');\r\n   const useFirebaseEmulators = bool.fromEnvironment(\r\n     'USE_FIREBASE_EMULATORS',\r\n-    defaultValue: false,\r\n+    defaultValue: !isReleaseMode,\r\n   );\r\n   const firebaseEmulatorHost = String.fromEnvironment(\r\n     'FIREBASE_EMULATOR_HOST',\r\n     defaultValue: '127.0.0.1',\r\n@@ -51,9 +52,9 @@\n       firebaseInitialized = true;\r\n \r\n       if (useFirebaseEmulators) {\r\n         FirebaseAuth.instance.useAuthEmulator(firebaseEmulatorHost, 9099);\r\n-        FirebaseFirestore.instance.useFirestoreEmulator(\r\n+        FirebaseFirestore.instance.useFirestoreEmulator(  \r\n           firebaseEmulatorHost,\r\n           8080,\r\n         );\r\n         FirebaseStorage.instance.useStorageEmulator(firebaseEmulatorHost, 9199);\r\n"
                },
                {
                    "date": 1766594950843,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,126 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter/services.dart';\r\n+import 'package:firebase_core/firebase_core.dart';\r\n+import 'package:firebase_auth/firebase_auth.dart';\r\n+import 'package:cloud_firestore/cloud_firestore.dart';\r\n+import 'package:firebase_storage/firebase_storage.dart';\r\n+import 'package:firebase_crashlytics/firebase_crashlytics.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:hive_flutter/hive_flutter.dart';\r\n+\r\n+import 'firebase_options.dart';\r\n+import 'app.dart';\r\n+import 'config/dependency_injection.dart';\r\n+import 'core/services/notification_service.dart';\r\n+\r\n+void main() async {\r\n+  WidgetsFlutterBinding.ensureInitialized();\r\n+\r\n+  const isReleaseMode = bool.fromEnvironment('dart.vm.product');\r\n+  const useFirebaseEmulators = bool.fromEnvironment(\r\n+    'USE_FIREBASE_EMULATORS',\r\n+    defaultValue: !isReleaseMode,\r\n+  );\r\n+  const firebaseEmulatorHost = String.fromEnvironment(\r\n+    'FIREBASE_EMULATOR_HOST',\r\n+    defaultValue: '127.0.0.1',\r\n+  );\r\n+\r\n+  // Set preferred orientations\r\n+  await SystemChrome.setPreferredOrientations([\r\n+    DeviceOrientation.portraitUp,\r\n+    DeviceOrientation.portraitDown,\r\n+  ]);\r\n+\r\n+  // Initialize Firebase\r\n+  // Note: This project currently contains placeholder values in `firebase_options.dart`.\r\n+  // When Firebase isn't configured, initializing it can crash the app at runtime\r\n+  // (e.g., missing/invalid google_app_id for Crashlytics/Analytics).\r\n+  var firebaseInitialized = false;\r\n+  final firebaseOptions = DefaultFirebaseOptions.currentPlatform;\r\n+  final hasRealFirebaseConfig =\r\n+      firebaseOptions.apiKey.isNotEmpty &&\r\n+      firebaseOptions.appId.isNotEmpty &&\r\n+      firebaseOptions.messagingSenderId.isNotEmpty &&\r\n+      !firebaseOptions.apiKey.startsWith('dummy-') &&\r\n+      !firebaseOptions.appId.startsWith('dummy-') &&\r\n+      !firebaseOptions.messagingSenderId.startsWith('dummy-');\r\n+\r\n+  try {\r\n+    if (hasRealFirebaseConfig) {\r\n+      await Firebase.initializeApp(options: firebaseOptions);\r\n+      firebaseInitialized = true;\r\n+\r\n+      if (useFirebaseEmulators) {\r\n+        FirebaseAuth.instance.useAuthEmulator(firebaseEmulatorHost, 9099);\r\n+        FirebaseFirestore.instance.useFirestoreEmulator(  \r\n+          firebaseEmulatorHost,\r\n+          8080,\r\n+        );\r\n+        FirebaseStorage.instance.useStorageEmulator(firebaseEmulatorHost, 9199);\r\n+        debugPrint(\r\n+          'Using Firebase Emulators at $firebaseEmulatorHost '\r\n+          '(auth:9099, firestore:8080, storage:9199)',\r\n+        );\r\n+      }\r\n+    } else {\r\n+      debugPrint(\r\n+        'Firebase is not configured (placeholder values detected). '\r\n+        'Running without Firebase.',\r\n+      );\r\n+    }\r\n+  } catch (error, stackTrace) {\r\n+    debugPrint(\r\n+      'Firebase initialization failed. Running without Firebase.\\n'\r\n+      'Error: $error\\n$stackTrace',\r\n+    );\r\n+  }\r\n+\r\n+  // Initialize Crashlytics (only when Firebase is configured)\r\n+  if (firebaseInitialized) {\r\n+    FlutterError.onError =\r\n+        FirebaseCrashlytics.instance.recordFlutterFatalError;\r\n+  }\r\n+\r\n+  // Initialize Hive for local storage\r\n+  await Hive.initFlutter();\r\n+\r\n+  // Setup dependency injection\r\n+  await configureDependencies();\r\n+\r\n+  // Initialize notifications\r\n+  if (firebaseInitialized) {\r\n+    try {\r\n+      await getIt<NotificationService>().initialize();\r\n+    } catch (error, stackTrace) {\r\n+      debugPrint(\r\n+        'Notification initialization failed (non-fatal).\\n'\r\n+        'Error: $error\\n$stackTrace',\r\n+      );\r\n+    }\r\n+  }\r\n+\r\n+  // Custom BLoC observer for debugging\r\n+  Bloc.observer = AppBlocObserver();\r\n+\r\n+  runApp(DiasporaDeliveryApp(firebaseInitialized: firebaseInitialized));\r\n+}\r\n+\r\n+class AppBlocObserver extends BlocObserver {\r\n+  @override\r\n+  void onChange(BlocBase bloc, Change change) {\r\n+    super.onChange(bloc, change);\r\n+    debugPrint('${bloc.runtimeType} $change');\r\n+  }\r\n+\r\n+  @override\r\n+  void onError(BlocBase bloc, Object error, StackTrace stackTrace) {\r\n+    super.onError(bloc, error, stackTrace);\r\n+    debugPrint('${bloc.runtimeType} $error $stackTrace');\r\n+    try {\r\n+      FirebaseCrashlytics.instance.recordError(error, stackTrace);\r\n+    } catch (_) {\r\n+      // Firebase may be unconfigured; ignore.\r\n+    }\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1766595799412,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,141 @@\n+import 'dart:async';\r\n+import 'dart:ui';\r\n+\r\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter/services.dart';\r\n+import 'package:firebase_core/firebase_core.dart';\r\n+import 'package:firebase_auth/firebase_auth.dart';\r\n+import 'package:cloud_firestore/cloud_firestore.dart';\r\n+import 'package:firebase_storage/firebase_storage.dart';\r\n+import 'package:firebase_crashlytics/firebase_crashlytics.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:hive_flutter/hive_flutter.dart';\r\n+\r\n+import 'firebase_options.dart';\r\n+import 'app.dart';\r\n+import 'config/dependency_injection.dart';\r\n+import 'core/services/notification_service.dart';\r\n+\r\n+void main() {\r\n+  WidgetsFlutterBinding.ensureInitialized();\r\n+\r\n+  // Prevent unexpected async errors during startup from killing the app\r\n+  // (which otherwise can look like it's stuck on the Flutter logo).\r\n+  PlatformDispatcher.instance.onError = (error, stack) {\r\n+    debugPrint('Uncaught platform error (non-fatal): $error\\n$stack');\r\n+    return true;\r\n+  };\r\n+\r\n+  runZonedGuarded(() async {\r\n+\r\n+  const isReleaseMode = bool.fromEnvironment('dart.vm.product');\r\n+  const useFirebaseEmulators = bool.fromEnvironment(\r\n+    'USE_FIREBASE_EMULATORS',\r\n+    defaultValue: !isReleaseMode,\r\n+  );\r\n+  const firebaseEmulatorHost = String.fromEnvironment(\r\n+    'FIREBASE_EMULATOR_HOST',\r\n+    defaultValue: '127.0.0.1',\r\n+  );\r\n+\r\n+  // Set preferred orientations\r\n+  await SystemChrome.setPreferredOrientations([\r\n+    DeviceOrientation.portraitUp,\r\n+    DeviceOrientation.portraitDown,\r\n+  ]);\r\n+\r\n+  // Initialize Firebase\r\n+  // Note: This project currently contains placeholder values in `firebase_options.dart`.\r\n+  // When Firebase isn't configured, initializing it can crash the app at runtime\r\n+  // (e.g., missing/invalid google_app_id for Crashlytics/Analytics).\r\n+  var firebaseInitialized = false;\r\n+  final firebaseOptions = DefaultFirebaseOptions.currentPlatform;\r\n+  final hasRealFirebaseConfig =\r\n+      firebaseOptions.apiKey.isNotEmpty &&\r\n+      firebaseOptions.appId.isNotEmpty &&\r\n+      firebaseOptions.messagingSenderId.isNotEmpty &&\r\n+      !firebaseOptions.apiKey.startsWith('dummy-') &&\r\n+      !firebaseOptions.appId.startsWith('dummy-') &&\r\n+      !firebaseOptions.messagingSenderId.startsWith('dummy-');\r\n+\r\n+  try {\r\n+    if (hasRealFirebaseConfig) {\r\n+      await Firebase.initializeApp(options: firebaseOptions);\r\n+      firebaseInitialized = true;\r\n+\r\n+      if (useFirebaseEmulators) {\r\n+        FirebaseAuth.instance.useAuthEmulator(firebaseEmulatorHost, 9099);\r\n+        FirebaseFirestore.instance.useFirestoreEmulator(  \r\n+          firebaseEmulatorHost,\r\n+          8080,\r\n+        );\r\n+        FirebaseStorage.instance.useStorageEmulator(firebaseEmulatorHost, 9199);\r\n+        debugPrint(\r\n+          'Using Firebase Emulators at $firebaseEmulatorHost '\r\n+          '(auth:9099, firestore:8080, storage:9199)',\r\n+        );\r\n+      }\r\n+    } else {\r\n+      debugPrint(\r\n+        'Firebase is not configured (placeholder values detected). '\r\n+        'Running without Firebase.',\r\n+      );\r\n+    }\r\n+  } catch (error, stackTrace) {\r\n+    debugPrint(\r\n+      'Firebase initialization failed. Running without Firebase.\\n'\r\n+      'Error: $error\\n$stackTrace',\r\n+    );\r\n+  }\r\n+\r\n+  // Initialize Crashlytics (only when Firebase is configured)\r\n+  if (firebaseInitialized) {\r\n+    FlutterError.onError =\r\n+        FirebaseCrashlytics.instance.recordFlutterFatalError;\r\n+  }\r\n+\r\n+  // Initialize Hive for local storage\r\n+  await Hive.initFlutter();\r\n+\r\n+  // Setup dependency injection\r\n+  await configureDependencies();\r\n+\r\n+  // Initialize notifications\r\n+  if (firebaseInitialized) {\r\n+    try {\r\n+      await getIt<NotificationService>().initialize();\r\n+    } catch (error, stackTrace) {\r\n+      debugPrint(\r\n+        'Notification initialization failed (non-fatal).\\n'\r\n+        'Error: $error\\n$stackTrace',\r\n+      );\r\n+    }\r\n+  }\r\n+\r\n+  // Custom BLoC observer for debugging\r\n+  Bloc.observer = AppBlocObserver();\r\n+\r\n+    runApp(DiasporaDeliveryApp(firebaseInitialized: firebaseInitialized));\r\n+  }, (error, stackTrace) {\r\n+    debugPrint('Uncaught zone error (non-fatal): $error\\n$stackTrace');\r\n+  });\r\n+}\r\n+\r\n+class AppBlocObserver extends BlocObserver {\r\n+  @override\r\n+  void onChange(BlocBase bloc, Change change) {\r\n+    super.onChange(bloc, change);\r\n+    debugPrint('${bloc.runtimeType} $change');\r\n+  }\r\n+\r\n+  @override\r\n+  void onError(BlocBase bloc, Object error, StackTrace stackTrace) {\r\n+    super.onError(bloc, error, stackTrace);\r\n+    debugPrint('${bloc.runtimeType} $error $stackTrace');\r\n+    try {\r\n+      FirebaseCrashlytics.instance.recordError(error, stackTrace);\r\n+    } catch (_) {\r\n+      // Firebase may be unconfigured; ignore.\r\n+    }\r\n+  }\r\n+}\r\n"
                }
            ],
            "date": 1766327107780,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\nimport 'package:flutter/services.dart';\r\nimport 'package:firebase_core/firebase_core.dart';\r\nimport 'package:firebase_crashlytics/firebase_crashlytics.dart';\r\nimport 'package:flutter_bloc/flutter_bloc.dart';\r\nimport 'package:hive_flutter/hive_flutter.dart';\r\n\r\nimport 'firebase_options.dart';\r\nimport 'app.dart';\r\nimport 'config/dependency_injection.dart';\r\nimport 'core/services/notification_service.dart';\r\n\r\nvoid main() async {\r\n  WidgetsFlutterBinding.ensureInitialized();\r\n\r\n  // Set preferred orientations\r\n  await SystemChrome.setPreferredOrientations([\r\n    DeviceOrientation.portraitUp,\r\n    DeviceOrientation.portraitDown,\r\n  ]);\r\n\r\n  // Initialize Firebase\r\n  await Firebase.initializeApp(\r\n    options: DefaultFirebaseOptions.currentPlatform,\r\n  );\r\n\r\n  // Initialize Crashlytics\r\n  FlutterError.onError = FirebaseCrashlytics.instance.recordFlutterFatalError;\r\n\r\n  // Initialize Hive for local storage\r\n  await Hive.initFlutter();\r\n\r\n  // Setup dependency injection\r\n  await configureDependencies();\r\n\r\n  // Initialize notifications\r\n  await getIt<NotificationService>().initialize();\r\n\r\n  // Custom BLoC observer for debugging\r\n  Bloc.observer = AppBlocObserver();\r\n\r\n  runApp(const DiasporaDeliveryApp());\r\n}\r\n\r\nclass AppBlocObserver extends BlocObserver {\r\n  @override\r\n  void onChange(BlocBase bloc, Change change) {\r\n    super.onChange(bloc, change);\r\n    debugPrint('${bloc.runtimeType} $change');\r\n  }\r\n\r\n  @override\r\n  void onError(BlocBase bloc, Object error, StackTrace stackTrace) {\r\n    super.onError(bloc, error, stackTrace);\r\n    debugPrint('${bloc.runtimeType} $error $stackTrace');\r\n    FirebaseCrashlytics.instance.recordError(error, stackTrace);\r\n  }\r\n}"
        }
    ]
}
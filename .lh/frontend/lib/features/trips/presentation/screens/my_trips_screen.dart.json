{
    "sourceFile": "frontend/lib/features/trips/presentation/screens/my_trips_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1766327036645,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766328670383,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,134 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n \r\n+import '../../../../config/dependency_injection.dart';\r\n+import '../../../../core/constants/route_constants.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/widgets/loading_widget.dart';\r\n+import '../../../../core/widgets/empty_state_widget.dart';\r\n+import '../../../auth/bloc/auth_bloc.dart';\r\n+import '../../../auth/bloc/auth_state.dart';\r\n+import '../../bloc/trip_bloc.dart';\r\n+import '../../bloc/trip_event.dart';\r\n+import '../../bloc/trip_state.dart';\r\n+import '../../data/models/trip_model.dart';\r\n+import '../widgets/trip_card.dart';\r\n+\r\n+class MyTripsScreen extends StatelessWidget {\r\n+  const MyTripsScreen({super.key});\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocProvider(\r\n+      create: (_) => getIt<TripBloc>()..add(MyTripsLoadRequested()),\r\n+      child: const _MyTripsView(),\r\n+    );\r\n+  }\r\n+}\r\n+\r\n+class _MyTripsView extends StatefulWidget {\r\n+  const _MyTripsView();\r\n+\r\n+  @override\r\n+  State<_MyTripsView> createState() => _MyTripsViewState();\r\n+}\r\n+\r\n+class _MyTripsViewState extends State<_MyTripsView>\r\n+    with SingleTickerProviderStateMixin {\r\n+  late TabController _tabController;\r\n+\r\n+  @override\r\n+  void initState() {\r\n+    super.initState();\r\n+    _tabController = TabController(length: 3, vsync: this);\r\n+  }\r\n+\r\n+  @override\r\n+  void dispose() {\r\n+    _tabController.dispose();\r\n+    super.dispose();\r\n+  }\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Scaffold(\r\n+      appBar: AppBar(\r\n+        title: const Text('My Trips'),\r\n+        bottom: TabBar(\r\n+          controller: _tabController,\r\n+          tabs: const [\r\n+            Tab(text: 'Active'),\r\n+            Tab(text: 'Completed'),\r\n+            Tab(text: 'Cancelled'),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+      body: BlocBuilder<TripBloc, TripState>(\r\n+        builder: (context, state) {\r\n+          if (state is TripLoading) {\r\n+            return const LoadingWidget();\r\n+          }\r\n+\r\n+          if (state is TripsLoaded) {\r\n+            final activeTrips = state.trips\r\n+                .where((t) =>\r\n+                    t.status == TripStatus.active ||\r\n+                    t.status == TripStatus.draft)\r\n+                .toList();\r\n+            final completedTrips = state.trips\r\n+                .where((t) => t.status == TripStatus.completed)\r\n+                .toList();\r\n+            final cancelledTrips = state.trips\r\n+                .where((t) => t.status == TripStatus.cancelled)\r\n+                .toList();\r\n+\r\n+            return TabBarView(\r\n+              controller: _tabController,\r\n+              children: [\r\n+                _buildTripsList(activeTrips, 'No active trips'),\r\n+                _buildTripsList(completedTrips, 'No completed trips'),\r\n+                _buildTripsList(cancelledTrips, 'No cancelled trips'),\r\n+              ],\r\n+            );\r\n+          }\r\n+\r\n+          return const SizedBox.shrink();\r\n+        },\r\n+      ),\r\n+      floatingActionButton: FloatingActionButton.extended(\r\n+        onPressed: () => context.push(RouteConstants.createTrip),\r\n+        icon: const Icon(Icons.add),\r\n+        label: const Text('New Trip'),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildTripsList(List<TripModel> trips, String emptyMessage) {\r\n+    if (trips.isEmpty) {\r\n+      return EmptyStateWidget(\r\n+        icon: Icons.flight_outlined,\r\n+        title: emptyMessage,\r\n+        subtitle: 'Your trips will appear here',\r\n+      );\r\n+    }\r\n+\r\n+    return ListView.builder(\r\n+      padding: const EdgeInsets.all(16),\r\n+      itemCount: trips.length,\r\n+      itemBuilder: (context, index) {\r\n+        final trip = trips[index];\r\n+        return Padding(\r\n+          padding: const EdgeInsets.only(bottom: 16),\r\n+          child: TripCard(\r\n+            trip: trip,\r\n+            onTap: () => context.push(\r\n+              RouteConstants.tripDetails.replaceFirst(':id', trip.id),\r\n+            ),\r\n+          ),\r\n+        );\r\n+      },\r\n+    );\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1766327036645,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
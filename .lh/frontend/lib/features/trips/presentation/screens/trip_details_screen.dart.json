{
    "sourceFile": "frontend/lib/features/trips/presentation/screens/trip_details_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1766327036642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766328656045,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,427 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n+import 'package:intl/intl.dart';\r\n \r\n+import '../../../../config/dependency_injection.dart';\r\n+import '../../../../core/constants/route_constants.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/utils/helpers.dart';\r\n+import '../../../../core/widgets/custom_button.dart';\r\n+import '../../../../core/widgets/loading_widget.dart';\r\n+import '../../../../core/widgets/user_avatar.dart';\r\n+import '../../../../core/widgets/rating_stars.dart';\r\n+import '../../../../core/widgets/status_badge.dart';\r\n+import '../../../auth/bloc/auth_bloc.dart';\r\n+import '../../../auth/bloc/auth_state.dart';\r\n+import '../../bloc/trip_bloc.dart';\r\n+import '../../bloc/trip_event.dart';\r\n+import '../../bloc/trip_state.dart';\r\n+import '../../data/models/trip_model.dart';\r\n+\r\n+class TripDetailsScreen extends StatelessWidget {\r\n+  final String tripId;\r\n+\r\n+  const TripDetailsScreen({super.key, required this.tripId});\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocProvider(\r\n+      create: (_) => getIt<TripBloc>()..add(TripDetailsRequested(tripId)),\r\n+      child: const _TripDetailsView(),\r\n+    );\r\n+  }\r\n+}\r\n+\r\n+class _TripDetailsView extends StatelessWidget {\r\n+  const _TripDetailsView();\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Scaffold(\r\n+      body: BlocBuilder<TripBloc, TripState>(\r\n+        builder: (context, state) {\r\n+          if (state is TripLoading) {\r\n+            return const LoadingWidget();\r\n+          }\r\n+\r\n+          if (state is TripError) {\r\n+            return Center(child: Text(state.message));\r\n+          }\r\n+\r\n+          if (state is TripDetailsLoaded) {\r\n+            return _buildContent(context, state.trip);\r\n+          }\r\n+\r\n+          return const SizedBox.shrink();\r\n+        },\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildContent(BuildContext context, TripModel trip) {\r\n+    final authState = context.read<AuthBloc>().state;\r\n+    final isOwner = authState is AuthAuthenticated &&\r\n+        authState.user.uid == trip.travelerId;\r\n+\r\n+    return CustomScrollView(\r\n+      slivers: [\r\n+        // App Bar\r\n+        SliverAppBar(\r\n+          expandedHeight: 200,\r\n+          pinned: true,\r\n+          flexibleSpace: FlexibleSpaceBar(\r\n+            background: Container(\r\n+              decoration: const BoxDecoration(\r\n+                gradient: AppColors.primaryGradient,\r\n+              ),\r\n+              child: Center(\r\n+                child: Column(\r\n+                  mainAxisAlignment: MainAxisAlignment.center,\r\n+                  children: [\r\n+                    const SizedBox(height: 60),\r\n+                    Icon(\r\n+                      Icons.flight,\r\n+                      size: 60,\r\n+                      color: Colors.white.withOpacity(0.9),\r\n+                    ),\r\n+                    const SizedBox(height: 16),\r\n+                    Text(\r\n+                      trip.routeDisplay,\r\n+                      style: AppTextStyles.h4.copyWith(color: Colors.white),\r\n+                    ),\r\n+                  ],\r\n+                ),\r\n+              ),\r\n+            ),\r\n+          ),\r\n+          actions: [\r\n+            if (isOwner)\r\n+              PopupMenuButton<String>(\r\n+                onSelected: (value) => _handleMenuAction(context, value, trip),\r\n+                itemBuilder: (context) => [\r\n+                  const PopupMenuItem(\r\n+                    value: 'edit',\r\n+                    child: Row(\r\n+                      children: [\r\n+                        Icon(Icons.edit),\r\n+                        SizedBox(width: 8),\r\n+                        Text('Edit'),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                  const PopupMenuItem(\r\n+                    value: 'cancel',\r\n+                    child: Row(\r\n+                      children: [\r\n+                        Icon(Icons.cancel, color: AppColors.error),\r\n+                        SizedBox(width: 8),\r\n+                        Text('Cancel Trip',\r\n+                            style: TextStyle(color: AppColors.error)),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+          ],\r\n+        ),\r\n+\r\n+        // Content\r\n+        SliverToBoxAdapter(\r\n+          child: Padding(\r\n+            padding: const EdgeInsets.all(16),\r\n+            child: Column(\r\n+              crossAxisAlignment: CrossAxisAlignment.start,\r\n+              children: [\r\n+                // Status\r\n+                Center(child: StatusBadge(status: trip.status.name)),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Traveler Card\r\n+                _buildTravelerCard(context, trip),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Route Details\r\n+                _buildSection(\r\n+                  title: 'Route Details',\r\n+                  child: _buildRouteDetails(trip),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Trip Details\r\n+                _buildSection(\r\n+                  title: 'Trip Information',\r\n+                  child: _buildTripInfo(trip),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Accepted Items\r\n+                if (trip.acceptedItemTypes.isNotEmpty)\r\n+                  _buildSection(\r\n+                    title: 'Accepted Item Types',\r\n+                    child: Wrap(\r\n+                      spacing: 8,\r\n+                      runSpacing: 8,\r\n+                      children: trip.acceptedItemTypes.map((type) {\r\n+                        return Chip(\r\n+                          label: Text(type),\r\n+                          backgroundColor: AppColors.primary.withOpacity(0.1),\r\n+                        );\r\n+                      }).toList(),\r\n+                    ),\r\n+                  ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Notes\r\n+                if (trip.notes != null && trip.notes!.isNotEmpty)\r\n+                  _buildSection(\r\n+                    title: 'Additional Notes',\r\n+                    child: Text(\r\n+                      trip.notes!,\r\n+                      style: AppTextStyles.bodyMedium,\r\n+                    ),\r\n+                  ),\r\n+                const SizedBox(height: 100),\r\n+              ],\r\n+            ),\r\n+          ),\r\n+        ),\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildTravelerCard(BuildContext context, TripModel trip) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Row(\r\n+          children: [\r\n+            UserAvatar(\r\n+              imageUrl: trip.travelerPhoto,\r\n+              name: trip.travelerName,\r\n+              size: 60,\r\n+            ),\r\n+            const SizedBox(width: 16),\r\n+            Expanded(\r\n+              child: Column(\r\n+                crossAxisAlignment: CrossAxisAlignment.start,\r\n+                children: [\r\n+                  Text(trip.travelerName, style: AppTextStyles.h5),\r\n+                  const SizedBox(height: 4),\r\n+                  RatingStars(\r\n+                    rating: trip.travelerRating,\r\n+                    size: 16,\r\n+                    showValue: true,\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+            IconButton(\r\n+              onPressed: () {\r\n+                // View profile\r\n+                context.push('/profile/${trip.travelerId}');\r\n+              },\r\n+              icon: const Icon(Icons.arrow_forward_ios),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildSection({required String title, required Widget child}) {\r\n+    return Column(\r\n+      crossAxisAlignment: CrossAxisAlignment.start,\r\n+      children: [\r\n+        Text(title, style: AppTextStyles.h6),\r\n+        const SizedBox(height: 12),\r\n+        child,\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildRouteDetails(TripModel trip) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Row(\r\n+          children: [\r\n+            Expanded(\r\n+              child: Column(\r\n+                children: [\r\n+                  Icon(Icons.flight_takeoff, color: AppColors.primary),\r\n+                  const SizedBox(height: 8),\r\n+                  Text('From', style: AppTextStyles.caption),\r\n+                  const SizedBox(height: 4),\r\n+                  Text(\r\n+                    trip.originCity,\r\n+                    style: AppTextStyles.bodyLarge.copyWith(\r\n+                      fontWeight: FontWeight.w600,\r\n+                    ),\r\n+                    textAlign: TextAlign.center,\r\n+                  ),\r\n+                  Text(\r\n+                    trip.originCountry,\r\n+                    style: AppTextStyles.bodySmall.copyWith(\r\n+                      color: AppColors.grey600,\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+            Container(\r\n+              padding: const EdgeInsets.symmetric(horizontal: 16),\r\n+              child: Column(\r\n+                children: [\r\n+                  Container(\r\n+                    width: 40,\r\n+                    height: 2,\r\n+                    color: AppColors.grey300,\r\n+                  ),\r\n+                  const SizedBox(height: 8),\r\n+                  Text(\r\n+                    DateFormat('MMM dd').format(trip.departureDate),\r\n+                    style: AppTextStyles.labelMedium.copyWith(\r\n+                      color: AppColors.primary,\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+            Expanded(\r\n+              child: Column(\r\n+                children: [\r\n+                  Icon(Icons.flight_land, color: AppColors.success),\r\n+                  const SizedBox(height: 8),\r\n+                  Text('To', style: AppTextStyles.caption),\r\n+                  const SizedBox(height: 4),\r\n+                  Text(\r\n+                    trip.destinationCity,\r\n+                    style: AppTextStyles.bodyLarge.copyWith(\r\n+                      fontWeight: FontWeight.w600,\r\n+                    ),\r\n+                    textAlign: TextAlign.center,\r\n+                  ),\r\n+                  Text(\r\n+                    trip.destinationCountry,\r\n+                    style: AppTextStyles.bodySmall.copyWith(\r\n+                      color: AppColors.grey600,\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildTripInfo(TripModel trip) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Column(\r\n+          children: [\r\n+            _buildInfoRow(\r\n+              icon: Icons.calendar_today,\r\n+              label: 'Departure Date',\r\n+              value: DateFormat('EEEE, MMM dd, yyyy').format(trip.departureDate),\r\n+            ),\r\n+            if (trip.returnDate != null) ...[\r\n+              const Divider(height: 24),\r\n+              _buildInfoRow(\r\n+                icon: Icons.event_available,\r\n+                label: 'Return Date',\r\n+                value: DateFormat('EEEE, MMM dd, yyyy').format(trip.returnDate!),\r\n+              ),\r\n+            ],\r\n+            const Divider(height: 24),\r\n+            _buildInfoRow(\r\n+              icon: Icons.fitness_center,\r\n+              label: 'Available Capacity',\r\n+              value: '${trip.availableCapacityKg.toStringAsFixed(1)} kg',\r\n+            ),\r\n+            const Divider(height: 24),\r\n+            _buildInfoRow(\r\n+              icon: Icons.attach_money,\r\n+              label: 'Price per kg',\r\n+              value: trip.pricePerKg > 0\r\n+                  ? '\\$${trip.pricePerKg.toStringAsFixed(2)}'\r\n+                  : 'Free / Negotiable',\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildInfoRow({\r\n+    required IconData icon,\r\n+    required String label,\r\n+    required String value,\r\n+  }) {\r\n+    return Row(\r\n+      children: [\r\n+        Container(\r\n+          padding: const EdgeInsets.all(8),\r\n+          decoration: BoxDecoration(\r\n+            color: AppColors.primary.withOpacity(0.1),\r\n+            borderRadius: BorderRadius.circular(8),\r\n+          ),\r\n+          child: Icon(icon, color: AppColors.primary, size: 20),\r\n+        ),\r\n+        const SizedBox(width: 12),\r\n+        Expanded(\r\n+          child: Column(\r\n+            crossAxisAlignment: CrossAxisAlignment.start,\r\n+            children: [\r\n+              Text(label, style: AppTextStyles.caption),\r\n+              Text(value, style: AppTextStyles.bodyMedium),\r\n+            ],\r\n+          ),\r\n+        ),\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  void _handleMenuAction(BuildContext context, String action, TripModel trip) {\r\n+    switch (action) {\r\n+      case 'edit':\r\n+        // Navigate to edit screen\r\n+        break;\r\n+      case 'cancel':\r\n+        _showCancelDialog(context, trip);\r\n+        break;\r\n+    }\r\n+  }\r\n+\r\n+  void _showCancelDialog(BuildContext context, TripModel trip) {\r\n+    showDialog(\r\n+      context: context,\r\n+      builder: (ctx) => AlertDialog(\r\n+        title: const Text('Cancel Trip'),\r\n+        content: const Text(\r\n+          'Are you sure you want to cancel this trip? This action cannot be undone.',\r\n+        ),\r\n+        actions: [\r\n+          TextButton(\r\n+            onPressed: () => Navigator.pop(ctx),\r\n+            child: const Text('No'),\r\n+          ),\r\n+          ElevatedButton(\r\n+            onPressed: () {\r\n+              Navigator.pop(ctx);\r\n+              context.read<TripBloc>().add(TripCancelRequested(trip.id));\r\n+            },\r\n+            style: ElevatedButton.styleFrom(\r\n+              backgroundColor: AppColors.error,\r\n+            ),\r\n+            child: const Text('Yes, Cancel'),\r\n+          ),\r\n+        ],\r\n+      ),\r\n+    );\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766346761042,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,426 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n+import 'package:intl/intl.dart';\r\n+\r\n+import '../../../../config/dependency_injection.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/widgets/loading_widget.dart';\r\n+import '../../../../core/widgets/user_avatar.dart';\r\n+import '../../../../core/widgets/rating_stars.dart';\r\n+import '../../../../core/widgets/status_badge.dart';\r\n+import '../../../auth/bloc/auth_bloc.dart';\r\n+import '../../../auth/bloc/auth_state.dart';\r\n+import '../../bloc/trip_bloc.dart';\r\n+import '../../bloc/trip_event.dart';\r\n+import '../../bloc/trip_state.dart';\r\n+import '../../data/models/trip_model.dart';\r\n+\r\n+class TripDetailsScreen extends StatelessWidget {\r\n+  final String tripId;\r\n+\r\n+  const TripDetailsScreen({super.key, required this.tripId});\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocProvider(\r\n+      create: (_) => getIt<TripBloc>()..add(TripDetailsRequested(tripId)),\r\n+      child: const _TripDetailsView(),\r\n+    );\r\n+  }\r\n+}\r\n+\r\n+class _TripDetailsView extends StatelessWidget {\r\n+  const _TripDetailsView();\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Scaffold(\r\n+      body: BlocBuilder<TripBloc, TripState>(\r\n+        builder: (context, state) {\r\n+          if (state is TripLoading) {\r\n+            return const LoadingWidget();\r\n+          }\r\n+\r\n+          if (state is TripError) {\r\n+            return Center(child: Text(state.message));\r\n+          }\r\n+\r\n+          if (state is TripDetailsLoaded) {\r\n+            return _buildContent(context, state.trip);\r\n+          }\r\n+\r\n+          return const SizedBox.shrink();\r\n+        },\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildContent(BuildContext context, TripModel trip) {\r\n+    final authState = context.read<AuthBloc>().state;\r\n+    final isOwner =\r\n+        authState is AuthAuthenticated && authState.user.uid == trip.travelerId;\r\n+\r\n+    return CustomScrollView(\r\n+      slivers: [\r\n+        // App Bar\r\n+        SliverAppBar(\r\n+          expandedHeight: 200,\r\n+          pinned: true,\r\n+          flexibleSpace: FlexibleSpaceBar(\r\n+            background: Container(\r\n+              decoration: const BoxDecoration(\r\n+                gradient: AppColors.primaryGradient,\r\n+              ),\r\n+              child: Center(\r\n+                child: Column(\r\n+                  mainAxisAlignment: MainAxisAlignment.center,\r\n+                  children: [\r\n+                    const SizedBox(height: 60),\r\n+                    Icon(\r\n+                      Icons.flight,\r\n+                      size: 60,\r\n+                      color: Colors.white.withAlpha(230),\r\n+                    ),\r\n+                    const SizedBox(height: 16),\r\n+                    Text(\r\n+                      trip.routeDisplay,\r\n+                      style: AppTextStyles.h4.copyWith(color: Colors.white),\r\n+                    ),\r\n+                  ],\r\n+                ),\r\n+              ),\r\n+            ),\r\n+          ),\r\n+          actions: [\r\n+            if (isOwner)\r\n+              PopupMenuButton<String>(\r\n+                onSelected: (value) => _handleMenuAction(context, value, trip),\r\n+                itemBuilder: (context) => [\r\n+                  const PopupMenuItem(\r\n+                    value: 'edit',\r\n+                    child: Row(\r\n+                      children: [\r\n+                        Icon(Icons.edit),\r\n+                        SizedBox(width: 8),\r\n+                        Text('Edit'),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                  const PopupMenuItem(\r\n+                    value: 'cancel',\r\n+                    child: Row(\r\n+                      children: [\r\n+                        Icon(Icons.cancel, color: AppColors.error),\r\n+                        SizedBox(width: 8),\r\n+                        Text('Cancel Trip',\r\n+                            style: TextStyle(color: AppColors.error)),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+          ],\r\n+        ),\r\n+\r\n+        // Content\r\n+        SliverToBoxAdapter(\r\n+          child: Padding(\r\n+            padding: const EdgeInsets.all(16),\r\n+            child: Column(\r\n+              crossAxisAlignment: CrossAxisAlignment.start,\r\n+              children: [\r\n+                // Status\r\n+                Center(child: StatusBadge(status: trip.status.name)),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Traveler Card\r\n+                _buildTravelerCard(context, trip),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Route Details\r\n+                _buildSection(\r\n+                  title: 'Route Details',\r\n+                  child: _buildRouteDetails(trip),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Trip Details\r\n+                _buildSection(\r\n+                  title: 'Trip Information',\r\n+                  child: _buildTripInfo(trip),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Accepted Items\r\n+                if (trip.acceptedItemTypes.isNotEmpty)\r\n+                  _buildSection(\r\n+                    title: 'Accepted Item Types',\r\n+                    child: Wrap(\r\n+                      spacing: 8,\r\n+                      runSpacing: 8,\r\n+                      children: trip.acceptedItemTypes.map((type) {\r\n+                        return Chip(\r\n+                          label: Text(type),\r\n+                          backgroundColor: AppColors.primary.withAlpha(26),\r\n+                        );\r\n+                      }).toList(),\r\n+                    ),\r\n+                  ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Notes\r\n+                if (trip.notes != null && trip.notes!.isNotEmpty)\r\n+                  _buildSection(\r\n+                    title: 'Additional Notes',\r\n+                    child: Text(\r\n+                      trip.notes!,\r\n+                      style: AppTextStyles.bodyMedium,\r\n+                    ),\r\n+                  ),\r\n+                const SizedBox(height: 100),\r\n+              ],\r\n+            ),\r\n+          ),\r\n+        ),\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildTravelerCard(BuildContext context, TripModel trip) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Row(\r\n+          children: [\r\n+            UserAvatar(\r\n+              imageUrl: trip.travelerPhoto,\r\n+              name: trip.travelerName,\r\n+              size: 60,\r\n+            ),\r\n+            const SizedBox(width: 16),\r\n+            Expanded(\r\n+              child: Column(\r\n+                crossAxisAlignment: CrossAxisAlignment.start,\r\n+                children: [\r\n+                  Text(trip.travelerName, style: AppTextStyles.h5),\r\n+                  const SizedBox(height: 4),\r\n+                  RatingStars(\r\n+                    rating: trip.travelerRating,\r\n+                    size: 16,\r\n+                    showValue: true,\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+            IconButton(\r\n+              onPressed: () {\r\n+                // View profile\r\n+                context.push('/profile/${trip.travelerId}');\r\n+              },\r\n+              icon: const Icon(Icons.arrow_forward_ios),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildSection({required String title, required Widget child}) {\r\n+    return Column(\r\n+      crossAxisAlignment: CrossAxisAlignment.start,\r\n+      children: [\r\n+        Text(title, style: AppTextStyles.h6),\r\n+        const SizedBox(height: 12),\r\n+        child,\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildRouteDetails(TripModel trip) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Row(\r\n+          children: [\r\n+            Expanded(\r\n+              child: Column(\r\n+                children: [\r\n+                  const Icon(Icons.flight_takeoff, color: AppColors.primary),\r\n+                  const SizedBox(height: 8),\r\n+                  const Text('From', style: AppTextStyles.caption),\r\n+                  const SizedBox(height: 4),\r\n+                  Text(\r\n+                    trip.originCity,\r\n+                    style: AppTextStyles.bodyLarge.copyWith(\r\n+                      fontWeight: FontWeight.w600,\r\n+                    ),\r\n+                    textAlign: TextAlign.center,\r\n+                  ),\r\n+                  Text(\r\n+                    trip.originCountry,\r\n+                    style: AppTextStyles.bodySmall.copyWith(\r\n+                      color: AppColors.grey600,\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+            Container(\r\n+              padding: const EdgeInsets.symmetric(horizontal: 16),\r\n+              child: Column(\r\n+                children: [\r\n+                  Container(\r\n+                    width: 40,\r\n+                    height: 2,\r\n+                    color: AppColors.grey300,\r\n+                  ),\r\n+                  const SizedBox(height: 8),\r\n+                  Text(\r\n+                    DateFormat('MMM dd').format(trip.departureDate),\r\n+                    style: AppTextStyles.labelMedium.copyWith(\r\n+                      color: AppColors.primary,\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+            Expanded(\r\n+              child: Column(\r\n+                children: [\r\n+                  const Icon(Icons.flight_land, color: AppColors.success),\r\n+                  const SizedBox(height: 8),\r\n+                  const Text('To', style: AppTextStyles.caption),\r\n+                  const SizedBox(height: 4),\r\n+                  Text(\r\n+                    trip.destinationCity,\r\n+                    style: AppTextStyles.bodyLarge.copyWith(\r\n+                      fontWeight: FontWeight.w600,\r\n+                    ),\r\n+                    textAlign: TextAlign.center,\r\n+                  ),\r\n+                  Text(\r\n+                    trip.destinationCountry,\r\n+                    style: AppTextStyles.bodySmall.copyWith(\r\n+                      color: AppColors.grey600,\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildTripInfo(TripModel trip) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Column(\r\n+          children: [\r\n+            _buildInfoRow(\r\n+              icon: Icons.calendar_today,\r\n+              label: 'Departure Date',\r\n+              value:\r\n+                  DateFormat('EEEE, MMM dd, yyyy').format(trip.departureDate),\r\n+            ),\r\n+            if (trip.returnDate != null) ...[\r\n+              const Divider(height: 24),\r\n+              _buildInfoRow(\r\n+                icon: Icons.event_available,\r\n+                label: 'Return Date',\r\n+                value:\r\n+                    DateFormat('EEEE, MMM dd, yyyy').format(trip.returnDate!),\r\n+              ),\r\n+            ],\r\n+            const Divider(height: 24),\r\n+            _buildInfoRow(\r\n+              icon: Icons.fitness_center,\r\n+              label: 'Available Capacity',\r\n+              value: '${trip.availableCapacityKg.toStringAsFixed(1)} kg',\r\n+            ),\r\n+            const Divider(height: 24),\r\n+            _buildInfoRow(\r\n+              icon: Icons.attach_money,\r\n+              label: 'Price per kg',\r\n+              value: trip.pricePerKg > 0\r\n+                  ? '\\$${trip.pricePerKg.toStringAsFixed(2)}'\r\n+                  : 'Free / Negotiable',\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildInfoRow({\r\n+    required IconData icon,\r\n+    required String label,\r\n+    required String value,\r\n+  }) {\r\n+    return Row(\r\n+      children: [\r\n+        Container(\r\n+          padding: const EdgeInsets.all(8),\r\n+          decoration: BoxDecoration(\r\n+            color: AppColors.primary.withAlpha(26),\r\n+            borderRadius: BorderRadius.circular(8),\r\n+          ),\r\n+          child: Icon(icon, color: AppColors.primary, size: 20),\r\n+        ),\r\n+        const SizedBox(width: 12),\r\n+        Expanded(\r\n+          child: Column(\r\n+            crossAxisAlignment: CrossAxisAlignment.start,\r\n+            children: [\r\n+              Text(label, style: AppTextStyles.caption),\r\n+              Text(value, style: AppTextStyles.bodyMedium),\r\n+            ],\r\n+          ),\r\n+        ),\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  void _handleMenuAction(BuildContext context, String action, TripModel trip) {\r\n+    switch (action) {\r\n+      case 'edit':\r\n+        // Navigate to edit screen\r\n+        break;\r\n+      case 'cancel':\r\n+        _showCancelDialog(context, trip);\r\n+        break;\r\n+    }\r\n+  }\r\n+\r\n+  void _showCancelDialog(BuildContext context, TripModel trip) {\r\n+    showDialog(\r\n+      context: context,\r\n+      builder: (ctx) => AlertDialog(\r\n+        title: const Text('Cancel Trip'),\r\n+        content: const Text(\r\n+          'Are you sure you want to cancel this trip? This action cannot be undone.',\r\n+        ),\r\n+        actions: [\r\n+          TextButton(\r\n+            onPressed: () => Navigator.pop(ctx),\r\n+            child: const Text('No'),\r\n+          ),\r\n+          ElevatedButton(\r\n+            onPressed: () {\r\n+              Navigator.pop(ctx);\r\n+              context.read<TripBloc>().add(TripCancelRequested(trip.id));\r\n+            },\r\n+            style: ElevatedButton.styleFrom(\r\n+              backgroundColor: AppColors.error,\r\n+            ),\r\n+            child: const Text('Yes, Cancel'),\r\n+          ),\r\n+        ],\r\n+      ),\r\n+    );\r\n+  }\r\n+}\r\n"
                }
            ],
            "date": 1766327036642,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
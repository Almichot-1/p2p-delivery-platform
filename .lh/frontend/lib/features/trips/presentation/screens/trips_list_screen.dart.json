{
    "sourceFile": "frontend/lib/features/trips/presentation/screens/trips_list_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1766327036642,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766328220184,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,186 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n \r\n+import '../../../../config/dependency_injection.dart';\r\n+import '../../../../core/constants/route_constants.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/widgets/loading_widget.dart';\r\n+import '../../../../core/widgets/empty_state_widget.dart';\r\n+import '../../bloc/trip_bloc.dart';\r\n+import '../../bloc/trip_event.dart';\r\n+import '../../bloc/trip_state.dart';\r\n+import '../widgets/trip_card.dart';\r\n+import '../widgets/trip_filter.dart';\r\n+\r\n+class TripsListScreen extends StatelessWidget {\r\n+  const TripsListScreen({super.key});\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocProvider(\r\n+      create: (_) => getIt<TripBloc>()..add(const TripsLoadRequested()),\r\n+      child: const _TripsListView(),\r\n+    );\r\n+  }\r\n+}\r\n+\r\n+class _TripsListView extends StatefulWidget {\r\n+  const _TripsListView();\r\n+\r\n+  @override\r\n+  State<_TripsListView> createState() => _TripsListViewState();\r\n+}\r\n+\r\n+class _TripsListViewState extends State<_TripsListView> {\r\n+  String? _selectedCity;\r\n+  DateTime? _selectedDate;\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Scaffold(\r\n+      appBar: AppBar(\r\n+        title: const Text('Available Trips'),\r\n+        actions: [\r\n+          IconButton(\r\n+            icon: const Icon(Icons.filter_list),\r\n+            onPressed: _showFilterSheet,\r\n+          ),\r\n+        ],\r\n+      ),\r\n+      body: Column(\r\n+        children: [\r\n+          // Active filters\r\n+          if (_selectedCity != null || _selectedDate != null)\r\n+            Container(\r\n+              padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),\r\n+              child: Row(\r\n+                children: [\r\n+                  if (_selectedCity != null)\r\n+                    _buildFilterChip(\r\n+                      label: _selectedCity!,\r\n+                      onRemove: () {\r\n+                        setState(() => _selectedCity = null);\r\n+                        _applyFilters();\r\n+                      },\r\n+                    ),\r\n+                  if (_selectedDate != null)\r\n+                    _buildFilterChip(\r\n+                      label: '${_selectedDate!.day}/${_selectedDate!.month}',\r\n+                      onRemove: () {\r\n+                        setState(() => _selectedDate = null);\r\n+                        _applyFilters();\r\n+                      },\r\n+                    ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+\r\n+          // Trips list\r\n+          Expanded(\r\n+            child: BlocBuilder<TripBloc, TripState>(\r\n+              builder: (context, state) {\r\n+                if (state is TripLoading) {\r\n+                  return const LoadingWidget();\r\n+                }\r\n+\r\n+                if (state is TripError) {\r\n+                  return Center(\r\n+                    child: Text(state.message),\r\n+                  );\r\n+                }\r\n+\r\n+                if (state is TripsLoaded) {\r\n+                  if (state.trips.isEmpty) {\r\n+                    return EmptyStateWidget(\r\n+                      icon: Icons.flight_outlined,\r\n+                      title: 'No Trips Available',\r\n+                      subtitle: 'Check back later for new trips',\r\n+                      buttonText: 'Post a Trip',\r\n+                      onButtonPressed: () =>\r\n+                          context.push(RouteConstants.createTrip),\r\n+                    );\r\n+                  }\r\n+\r\n+                  return RefreshIndicator(\r\n+                    onRefresh: () async {\r\n+                      context.read<TripBloc>().add(TripsLoadRequested(\r\n+                            destinationCity: _selectedCity,\r\n+                            afterDate: _selectedDate,\r\n+                          ));\r\n+                    },\r\n+                    child: ListView.builder(\r\n+                      padding: const EdgeInsets.all(16),\r\n+                      itemCount: state.trips.length,\r\n+                      itemBuilder: (context, index) {\r\n+                        final trip = state.trips[index];\r\n+                        return Padding(\r\n+                          padding: const EdgeInsets.only(bottom: 16),\r\n+                          child: TripCard(\r\n+                            trip: trip,\r\n+                            onTap: () => context.push(\r\n+                              RouteConstants.tripDetails.replaceFirst(':id', trip.id),\r\n+                            ),\r\n+                          ),\r\n+                        );\r\n+                      },\r\n+                    ),\r\n+                  );\r\n+                }\r\n+\r\n+                return const SizedBox.shrink();\r\n+              },\r\n+            ),\r\n+          ),\r\n+        ],\r\n+      ),\r\n+      floatingActionButton: FloatingActionButton.extended(\r\n+        onPressed: () => context.push(RouteConstants.createTrip),\r\n+        icon: const Icon(Icons.add),\r\n+        label: const Text('Post Trip'),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildFilterChip({\r\n+    required String label,\r\n+    required VoidCallback onRemove,\r\n+  }) {\r\n+    return Padding(\r\n+      padding: const EdgeInsets.only(right: 8),\r\n+      child: Chip(\r\n+        label: Text(label),\r\n+        deleteIcon: const Icon(Icons.close, size: 18),\r\n+        onDeleted: onRemove,\r\n+        backgroundColor: AppColors.primary.withOpacity(0.1),\r\n+        labelStyle: TextStyle(color: AppColors.primary),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  void _showFilterSheet() {\r\n+    showModalBottomSheet(\r\n+      context: context,\r\n+      isScrollControlled: true,\r\n+      builder: (context) => TripFilter(\r\n+        selectedCity: _selectedCity,\r\n+        selectedDate: _selectedDate,\r\n+        onApply: (city, date) {\r\n+          setState(() {\r\n+            _selectedCity = city;\r\n+            _selectedDate = date;\r\n+          });\r\n+          _applyFilters();\r\n+          Navigator.pop(context);\r\n+        },\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  void _applyFilters() {\r\n+    context.read<TripBloc>().add(TripsLoadRequested(\r\n+          destinationCity: _selectedCity,\r\n+          afterDate: _selectedDate,\r\n+        ));\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766346761018,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,187 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n+\r\n+import '../../../../config/dependency_injection.dart';\r\n+import '../../../../core/constants/route_constants.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/widgets/loading_widget.dart';\r\n+import '../../../../core/widgets/empty_state_widget.dart';\r\n+import '../../bloc/trip_bloc.dart';\r\n+import '../../bloc/trip_event.dart';\r\n+import '../../bloc/trip_state.dart';\r\n+import '../widgets/trip_card.dart';\r\n+import '../widgets/trip_filter.dart';\r\n+\r\n+class TripsListScreen extends StatelessWidget {\r\n+  const TripsListScreen({super.key});\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocProvider(\r\n+      create: (_) => getIt<TripBloc>()..add(const TripsLoadRequested()),\r\n+      child: const _TripsListView(),\r\n+    );\r\n+  }\r\n+}\r\n+\r\n+class _TripsListView extends StatefulWidget {\r\n+  const _TripsListView();\r\n+\r\n+  @override\r\n+  State<_TripsListView> createState() => _TripsListViewState();\r\n+}\r\n+\r\n+class _TripsListViewState extends State<_TripsListView> {\r\n+  String? _selectedCity;\r\n+  DateTime? _selectedDate;\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Scaffold(\r\n+      appBar: AppBar(\r\n+        title: const Text('Available Trips'),\r\n+        actions: [\r\n+          IconButton(\r\n+            icon: const Icon(Icons.filter_list),\r\n+            onPressed: _showFilterSheet,\r\n+          ),\r\n+        ],\r\n+      ),\r\n+      body: Column(\r\n+        children: [\r\n+          // Active filters\r\n+          if (_selectedCity != null || _selectedDate != null)\r\n+            Container(\r\n+              padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 8),\r\n+              child: Row(\r\n+                children: [\r\n+                  if (_selectedCity != null)\r\n+                    _buildFilterChip(\r\n+                      label: _selectedCity!,\r\n+                      onRemove: () {\r\n+                        setState(() => _selectedCity = null);\r\n+                        _applyFilters();\r\n+                      },\r\n+                    ),\r\n+                  if (_selectedDate != null)\r\n+                    _buildFilterChip(\r\n+                      label: '${_selectedDate!.day}/${_selectedDate!.month}',\r\n+                      onRemove: () {\r\n+                        setState(() => _selectedDate = null);\r\n+                        _applyFilters();\r\n+                      },\r\n+                    ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+\r\n+          // Trips list\r\n+          Expanded(\r\n+            child: BlocBuilder<TripBloc, TripState>(\r\n+              builder: (context, state) {\r\n+                if (state is TripLoading) {\r\n+                  return const LoadingWidget();\r\n+                }\r\n+\r\n+                if (state is TripError) {\r\n+                  return Center(\r\n+                    child: Text(state.message),\r\n+                  );\r\n+                }\r\n+\r\n+                if (state is TripsLoaded) {\r\n+                  if (state.trips.isEmpty) {\r\n+                    return EmptyStateWidget(\r\n+                      icon: Icons.flight_outlined,\r\n+                      title: 'No Trips Available',\r\n+                      subtitle: 'Check back later for new trips',\r\n+                      buttonText: 'Post a Trip',\r\n+                      onButtonPressed: () =>\r\n+                          context.push(RouteConstants.createTrip),\r\n+                    );\r\n+                  }\r\n+\r\n+                  return RefreshIndicator(\r\n+                    onRefresh: () async {\r\n+                      context.read<TripBloc>().add(TripsLoadRequested(\r\n+                            destinationCity: _selectedCity,\r\n+                            afterDate: _selectedDate,\r\n+                          ));\r\n+                    },\r\n+                    child: ListView.builder(\r\n+                      padding: const EdgeInsets.all(16),\r\n+                      itemCount: state.trips.length,\r\n+                      itemBuilder: (context, index) {\r\n+                        final trip = state.trips[index];\r\n+                        return Padding(\r\n+                          padding: const EdgeInsets.only(bottom: 16),\r\n+                          child: TripCard(\r\n+                            trip: trip,\r\n+                            onTap: () => context.push(\r\n+                              RouteConstants.tripDetails\r\n+                                  .replaceFirst(':id', trip.id),\r\n+                            ),\r\n+                          ),\r\n+                        );\r\n+                      },\r\n+                    ),\r\n+                  );\r\n+                }\r\n+\r\n+                return const SizedBox.shrink();\r\n+              },\r\n+            ),\r\n+          ),\r\n+        ],\r\n+      ),\r\n+      floatingActionButton: FloatingActionButton.extended(\r\n+        onPressed: () => context.push(RouteConstants.createTrip),\r\n+        icon: const Icon(Icons.add),\r\n+        label: const Text('Post Trip'),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildFilterChip({\r\n+    required String label,\r\n+    required VoidCallback onRemove,\r\n+  }) {\r\n+    return Padding(\r\n+      padding: const EdgeInsets.only(right: 8),\r\n+      child: Chip(\r\n+        label: Text(label),\r\n+        deleteIcon: const Icon(Icons.close, size: 18),\r\n+        onDeleted: onRemove,\r\n+        backgroundColor: AppColors.primary.withAlpha(26),\r\n+        labelStyle: const TextStyle(color: AppColors.primary),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  void _showFilterSheet() {\r\n+    showModalBottomSheet(\r\n+      context: context,\r\n+      isScrollControlled: true,\r\n+      builder: (context) => TripFilter(\r\n+        selectedCity: _selectedCity,\r\n+        selectedDate: _selectedDate,\r\n+        onApply: (city, date) {\r\n+          setState(() {\r\n+            _selectedCity = city;\r\n+            _selectedDate = date;\r\n+          });\r\n+          _applyFilters();\r\n+          Navigator.pop(context);\r\n+        },\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  void _applyFilters() {\r\n+    context.read<TripBloc>().add(TripsLoadRequested(\r\n+          destinationCity: _selectedCity,\r\n+          afterDate: _selectedDate,\r\n+        ));\r\n+  }\r\n+}\r\n"
                }
            ],
            "date": 1766327036642,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
{
    "sourceFile": "frontend/lib/features/trips/presentation/widgets/trip_card.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 4,
            "patches": [
                {
                    "date": 1766327036644,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766328280320,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,117 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:intl/intl.dart';\r\n \r\n+import '../../../../core/constants/app_constants.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/widgets/custom_button.dart';\r\n+\r\n+class TripFilter extends StatefulWidget {\r\n+  final String? selectedCity;\r\n+  final DateTime? selectedDate;\r\n+  final Function(String?, DateTime?) onApply;\r\n+\r\n+  const TripFilter({\r\n+    super.key,\r\n+    this.selectedCity,\r\n+    this.selectedDate,\r\n+    required this.onApply,\r\n+  });\r\n+\r\n+  @override\r\n+  State<TripFilter> createState() => _TripFilterState();\r\n+}\r\n+\r\n+class _TripFilterState extends State<TripFilter> {\r\n+  late String? _selectedCity;\r\n+  late DateTime? _selectedDate;\r\n+\r\n+  @override\r\n+  void initState() {\r\n+    super.initState();\r\n+    _selectedCity = widget.selectedCity;\r\n+    _selectedDate = widget.selectedDate;\r\n+  }\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Container(\r\n+      padding: const EdgeInsets.all(24),\r\n+      child: Column(\r\n+        mainAxisSize: MainAxisSize.min,\r\n+        crossAxisAlignment: CrossAxisAlignment.start,\r\n+        children: [\r\n+          // Header\r\n+          Row(\r\n+            mainAxisAlignment: MainAxisAlignment.spaceBetween,\r\n+            children: [\r\n+              Text('Filter Trips', style: AppTextStyles.h5),\r\n+              TextButton(\r\n+                onPressed: () {\r\n+                  setState(() {\r\n+                    _selectedCity = null;\r\n+                    _selectedDate = null;\r\n+                  });\r\n+                },\r\n+                child: const Text('Reset'),\r\n+              ),\r\n+            ],\r\n+          ),\r\n+          const SizedBox(height: 24),\r\n+\r\n+          // Destination\r\n+          Text('Destination', style: AppTextStyles.labelLarge),\r\n+          const SizedBox(height: 8),\r\n+          Wrap(\r\n+            spacing: 8,\r\n+            runSpacing: 8,\r\n+            children: AppConstants.ethiopianCities.map((city) {\r\n+              final isSelected = _selectedCity == city;\r\n+              return ChoiceChip(\r\n+                label: Text(city),\r\n+                selected: isSelected,\r\n+                onSelected: (selected) {\r\n+                  setState(() {\r\n+                    _selectedCity = selected ? city : null;\r\n+                  });\r\n+                },\r\n+                selectedColor: AppColors.primary.withOpacity(0.2),\r\n+              );\r\n+            }).toList(),\r\n+          ),\r\n+          const SizedBox(height: 24),\r\n+\r\n+          // Date\r\n+          Text('Departure Date', style: AppTextStyles.labelLarge),\r\n+          const SizedBox(height: 8),\r\n+          GestureDetector(\r\n+            onTap: () async {\r\n+              final date = await showDatePicker(\r\n+                context: context,\r\n+                initialDate: _selectedDate ?? DateTime.now(),\r\n+                firstDate: DateTime.now(),\r\n+                lastDate: DateTime.now().add(const Duration(days: 365)),\r\n+              );\r\n+              if (date != null) {\r\n+                setState(() => _selectedDate = date);\r\n+              }\r\n+            },\r\n+            child: Container(\r\n+              padding: const EdgeInsets.all(16),\r\n+              decoration: BoxDecoration(\r\n+                color: AppColors.grey100,\r\n+                borderRadius: BorderRadius.circular(12),\r\n+              ),\r\n+              child: Row(\r\n+                children: [\r\n+                  Icon(Icons.calendar_today, color: AppColors.grey600),\r\n+                  const SizedBox(width: 12),\r\n+                  Text(\r\n+                    _selectedDate != null\r\n+                        ? DateFormat('MMM dd, yyyy').format(_selectedDate!)\r\n+                        : 'Select date',\r\n+                    style: AppTextStyles.bodyMedium,\r\n+                  ),\r\n+                  const Spacer(),\r\n+                  if (_selectedDate != null)\r\n+                    \n\\ No newline at end of file\n"
                },
                {
                    "date": 1766334824600,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,117 +1,156 @@\n import 'package:flutter/material.dart';\r\n import 'package:intl/intl.dart';\r\n-\r\n import '../../../../core/constants/app_constants.dart';\r\n import '../../../../core/theme/app_colors.dart';\r\n import '../../../../core/theme/app_text_styles.dart';\r\n-import '../../../../core/widgets/custom_button.dart';\r\n+import '../../data/models/trip_model.dart';\r\n \r\n-class TripFilter extends StatefulWidget {\r\n-  final String? selectedCity;\r\n-  final DateTime? selectedDate;\r\n-  final Function(String?, DateTime?) onApply;\r\n+class TripCard extends StatelessWidget {\r\n+  final TripModel trip;\r\n+  final VoidCallback onTap;\r\n \r\n-  const TripFilter({\r\n+  const TripCard({\r\n     super.key,\r\n-    this.selectedCity,\r\n-    this.selectedDate,\r\n-    required this.onApply,\r\n+    required this.trip,\r\n+    required this.onTap,\r\n   });\r\n \r\n   @override\r\n-  State<TripFilter> createState() => _TripFilterState();\r\n-}\r\n-\r\n-class _TripFilterState extends State<TripFilter> {\r\n-  late String? _selectedCity;\r\n-  late DateTime? _selectedDate;\r\n-\r\n-  @override\r\n-  void initState() {\r\n-    super.initState();\r\n-    _selectedCity = widget.selectedCity;\r\n-    _selectedDate = widget.selectedDate;\r\n-  }\r\n-\r\n-  @override\r\n   Widget build(BuildContext context) {\r\n-    return Container(\r\n-      padding: const EdgeInsets.all(24),\r\n-      child: Column(\r\n-        mainAxisSize: MainAxisSize.min,\r\n-        crossAxisAlignment: CrossAxisAlignment.start,\r\n-        children: [\r\n-          // Header\r\n-          Row(\r\n-            mainAxisAlignment: MainAxisAlignment.spaceBetween,\r\n+    return Card(\r\n+      margin: const EdgeInsets.only(bottom: 16),\r\n+      elevation: 2,\r\n+      shape: RoundedRectangleBorder(borderRadius: BorderRadius.circular(12)),\r\n+      child: InkWell(\r\n+        onTap: onTap,\r\n+        borderRadius: BorderRadius.circular(12),\r\n+        child: Padding(\r\n+          padding: const EdgeInsets.all(16),\r\n+          child: Column(\r\n+            crossAxisAlignment: CrossAxisAlignment.start,\r\n             children: [\r\n-              Text('Filter Trips', style: AppTextStyles.h5),\r\n-              TextButton(\r\n-                onPressed: () {\r\n-                  setState(() {\r\n-                    _selectedCity = null;\r\n-                    _selectedDate = null;\r\n-                  });\r\n-                },\r\n-                child: const Text('Reset'),\r\n+              // Header: Traveler Info\r\n+              Row(\r\n+                children: [\r\n+                  CircleAvatar(\r\n+                    radius: 20,\r\n+                    backgroundImage: trip.travelerPhotoUrl != null\r\n+                        ? NetworkImage(trip.travelerPhotoUrl!)\r\n+                        : null,\r\n+                    child: trip.travelerPhotoUrl == null\r\n+                        ? Text(trip.travelerName[0].toUpperCase())\r\n+                        : null,\r\n+                  ),\r\n+                  const SizedBox(width: 12),\r\n+                  Expanded(\r\n+                    child: Column(\r\n+                      crossAxisAlignment: CrossAxisAlignment.start,\r\n+                      children: [\r\n+                        Text(\r\n+                          trip.travelerName,\r\n+                          style: AppTextStyles.bodyMedium.copyWith(\r\n+                            fontWeight: FontWeight.w600,\r\n+                          ),\r\n+                        ),\r\n+                        Row(\r\n+                          children: [\r\n+                            Icon(Icons.star, size: 14, color: AppColors.warning),\r\n+                            const SizedBox(width: 4),\r\n+                            Text(\r\n+                              '${trip.travelerRating} (${trip.travelerTotalReviews})',\r\n+                              style: AppTextStyles.caption,\r\n+                            ),\r\n+                          ],\r\n+                        ),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                  Container(\r\n+                    padding: const EdgeInsets.symmetric(horizontal: 8, vertical: 4),\r\n+                    decoration: BoxDecoration(\r\n+                      color: AppColors.primary.withOpacity(0.1),\r\n+                      borderRadius: BorderRadius.circular(8),\r\n+                    ),\r\n+                    child: Text(\r\n\\ No newline at end of file\n+                      '${trip.availableWeight}kg available',\r\n+                      style: AppTextStyles.caption.copyWith(\r\n+                        color: AppColors.primary,\r\n+                        fontWeight: FontWeight.w600,\r\n+                      ),\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n               ),\r\n-            ],\r\n-          ),\r\n-          const SizedBox(height: 24),\r\n+              const SizedBox(height: 16),\r\n \r\n-          // Destination\r\n-          Text('Destination', style: AppTextStyles.labelLarge),\r\n-          const SizedBox(height: 8),\r\n-          Wrap(\r\n-            spacing: 8,\r\n-            runSpacing: 8,\r\n-            children: AppConstants.ethiopianCities.map((city) {\r\n-              final isSelected = _selectedCity == city;\r\n-              return ChoiceChip(\r\n-                label: Text(city),\r\n-                selected: isSelected,\r\n-                onSelected: (selected) {\r\n-                  setState(() {\r\n-                    _selectedCity = selected ? city : null;\r\n-                  });\r\n-                },\r\n-                selectedColor: AppColors.primary.withOpacity(0.2),\r\n-              );\r\n-            }).toList(),\r\n-          ),\r\n-          const SizedBox(height: 24),\r\n+              // Route Info\r\n+              Row(\r\n+                children: [\r\n+                  Expanded(\r\n+                    child: Column(\r\n+                      crossAxisAlignment: CrossAxisAlignment.start,\r\n+                      children: [\r\n+                        Text(\r\n+                          trip.origin,\r\n+                          style: AppTextStyles.bodyLarge.copyWith(\r\n+                            fontWeight: FontWeight.w600,\r\n+                          ),\r\n+                        ),\r\n+                        Text(\r\n+                          DateFormat(AppConstants.dateFormat).format(trip.departureDate),\r\n+                          style: AppTextStyles.caption,\r\n+                        ),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                  const Icon(Icons.arrow_forward, color: AppColors.textSecondary),\r\n+                  Expanded(\r\n+                    child: Column(\r\n+                      crossAxisAlignment: CrossAxisAlignment.end,\r\n+                      children: [\r\n+                        Text(\r\n+                          trip.destination,\r\n+                          style: AppTextStyles.bodyLarge.copyWith(\r\n+                            fontWeight: FontWeight.w600,\r\n+                          ),\r\n+                        ),\r\n+                        Text(\r\n+                          DateFormat(AppConstants.dateFormat).format(trip.arrivalDate),\r\n+                          style: AppTextStyles.caption,\r\n+                        ),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+              const SizedBox(height: 16),\r\n \r\n-          // Date\r\n-          Text('Departure Date', style: AppTextStyles.labelLarge),\r\n-          const SizedBox(height: 8),\r\n-          GestureDetector(\r\n-            onTap: () async {\r\n-              final date = await showDatePicker(\r\n-                context: context,\r\n-                initialDate: _selectedDate ?? DateTime.now(),\r\n-                firstDate: DateTime.now(),\r\n-                lastDate: DateTime.now().add(const Duration(days: 365)),\r\n-              );\r\n-              if (date != null) {\r\n-                setState(() => _selectedDate = date);\r\n-              }\r\n-            },\r\n-            child: Container(\r\n-              padding: const EdgeInsets.all(16),\r\n-              decoration: BoxDecoration(\r\n-                color: AppColors.grey100,\r\n-                borderRadius: BorderRadius.circular(12),\r\n-              ),\r\n-              child: Row(\r\n+              // Price and Status\r\n+              Row(\r\n+                mainAxisAlignment: MainAxisAlignment.spaceBetween,\r\n                 children: [\r\n-                  Icon(Icons.calendar_today, color: AppColors.grey600),\r\n-                  const SizedBox(width: 12),\r\n                   Text(\r\n-                    _selectedDate != null\r\n-                        ? DateFormat('MMM dd, yyyy').format(_selectedDate!)\r\n-                        : 'Select date',\r\n-                    style: AppTextStyles.bodyMedium,\r\n+                    '\\$${trip.pricePerKg}/kg',\r\n+                    style: AppTextStyles.h6.copyWith(color: AppColors.primary),\r\n                   ),\r\n-                  const Spacer(),\r\n-                  if (_selectedDate != null)\r\n-                    \n+                  if (trip.status == TripStatus.completed)\r\n+                    Container(\r\n+                      padding: const EdgeInsets.symmetric(horizontal: 8, vertical: 4),\r\n+                      decoration: BoxDecoration(\r\n+                        color: AppColors.success.withOpacity(0.1),\r\n+                        borderRadius: BorderRadius.circular(4),\r\n+                      ),\r\n+                      child: Text(\r\n+                        'Completed',\r\n+                        style: AppTextStyles.caption.copyWith(color: AppColors.success),\r\n+                      ),\r\n+                    ),\r\n+                ],\r\n+              ),\r\n+            ],\r\n+          ),\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+}\r\n"
                },
                {
                    "date": 1766335024515,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -33,12 +33,12 @@\n               Row(\r\n                 children: [\r\n                   CircleAvatar(\r\n                     radius: 20,\r\n-                    backgroundImage: trip.travelerPhotoUrl != null\r\n-                        ? NetworkImage(trip.travelerPhotoUrl!)\r\n+                    backgroundImage: trip.travelerPhoto != null\r\n+                        ? NetworkImage(trip.travelerPhoto!)\r\n                         : null,\r\n-                    child: trip.travelerPhotoUrl == null\r\n+                    child: trip.travelerPhoto == null\r\n                         ? Text(trip.travelerName[0].toUpperCase())\r\n                         : null,\r\n                   ),\r\n                   const SizedBox(width: 12),\r\n@@ -56,9 +56,9 @@\n                           children: [\r\n                             Icon(Icons.star, size: 14, color: AppColors.warning),\r\n                             const SizedBox(width: 4),\r\n                             Text(\r\n-                              '${trip.travelerRating} (${trip.travelerTotalReviews})',\r\n+                              '${trip.travelerRating}',\r\n                               style: AppTextStyles.caption,\r\n                             ),\r\n                           ],\r\n                         ),\r\n@@ -71,9 +71,9 @@\n                       color: AppColors.primary.withOpacity(0.1),\r\n                       borderRadius: BorderRadius.circular(8),\r\n                     ),\r\n                     child: Text(\r\n-                      '${trip.availableWeight}kg available',\r\n+                      '${trip.availableCapacityKg}kg available',\r\n                       style: AppTextStyles.caption.copyWith(\r\n                         color: AppColors.primary,\r\n                         fontWeight: FontWeight.w600,\r\n                       ),\r\n@@ -90,9 +90,9 @@\n                     child: Column(\r\n                       crossAxisAlignment: CrossAxisAlignment.start,\r\n                       children: [\r\n                         Text(\r\n-                          trip.origin,\r\n+                          trip.originCity,\r\n                           style: AppTextStyles.bodyLarge.copyWith(\r\n                             fontWeight: FontWeight.w600,\r\n                           ),\r\n                         ),\r\n@@ -108,17 +108,18 @@\n                     child: Column(\r\n                       crossAxisAlignment: CrossAxisAlignment.end,\r\n                       children: [\r\n                         Text(\r\n-                          trip.destination,\r\n+                          trip.destinationCity,\r\n                           style: AppTextStyles.bodyLarge.copyWith(\r\n                             fontWeight: FontWeight.w600,\r\n                           ),\r\n                         ),\r\n-                        Text(\r\n-                          DateFormat(AppConstants.dateFormat).format(trip.arrivalDate),\r\n-                          style: AppTextStyles.caption,\r\n-                        ),\r\n+                        if (trip.returnDate != null)\r\n+                          Text(\r\n+                            DateFormat(AppConstants.dateFormat).format(trip.returnDate!),\r\n+                            style: AppTextStyles.caption,\r\n+                          ),\r\n                       ],\r\n                     ),\r\n                   ),\r\n                 ],\r\n@@ -152,5 +153,5 @@\n         ),\r\n       ),\r\n     );\r\n   }\r\n-}\n\\ No newline at end of file\n+}\r\n"
                },
                {
                    "date": 1766346761093,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -53,9 +53,10 @@\n                           ),\r\n                         ),\r\n                         Row(\r\n                           children: [\r\n-                            Icon(Icons.star, size: 14, color: AppColors.warning),\r\n+                            const Icon(Icons.star,\r\n+                                size: 14, color: AppColors.warning),\r\n                             const SizedBox(width: 4),\r\n                             Text(\r\n                               '${trip.travelerRating}',\r\n                               style: AppTextStyles.caption,\r\n@@ -65,11 +66,12 @@\n                       ],\r\n                     ),\r\n                   ),\r\n                   Container(\r\n-                    padding: const EdgeInsets.symmetric(horizontal: 8, vertical: 4),\r\n+                    padding:\r\n+                        const EdgeInsets.symmetric(horizontal: 8, vertical: 4),\r\n                     decoration: BoxDecoration(\r\n-                      color: AppColors.primary.withOpacity(0.1),\r\n+                      color: AppColors.primary.withAlpha(26),\r\n                       borderRadius: BorderRadius.circular(8),\r\n                     ),\r\n                     child: Text(\r\n                       '${trip.availableCapacityKg}kg available',\r\n@@ -96,15 +98,17 @@\n                             fontWeight: FontWeight.w600,\r\n                           ),\r\n                         ),\r\n                         Text(\r\n-                          DateFormat(AppConstants.dateFormat).format(trip.departureDate),\r\n+                          DateFormat(AppConstants.dateFormat)\r\n+                              .format(trip.departureDate),\r\n                           style: AppTextStyles.caption,\r\n                         ),\r\n                       ],\r\n                     ),\r\n                   ),\r\n-                  const Icon(Icons.arrow_forward, color: AppColors.textSecondary),\r\n+                  const Icon(Icons.arrow_forward,\r\n+                      color: AppColors.textSecondary),\r\n                   Expanded(\r\n                     child: Column(\r\n                       crossAxisAlignment: CrossAxisAlignment.end,\r\n                       children: [\r\n@@ -115,9 +119,10 @@\n                           ),\r\n                         ),\r\n                         if (trip.returnDate != null)\r\n                           Text(\r\n-                            DateFormat(AppConstants.dateFormat).format(trip.returnDate!),\r\n+                            DateFormat(AppConstants.dateFormat)\r\n+                                .format(trip.returnDate!),\r\n                             style: AppTextStyles.caption,\r\n                           ),\r\n                       ],\r\n                     ),\r\n@@ -135,16 +140,18 @@\n                     style: AppTextStyles.h6.copyWith(color: AppColors.primary),\r\n                   ),\r\n                   if (trip.status == TripStatus.completed)\r\n                     Container(\r\n-                      padding: const EdgeInsets.symmetric(horizontal: 8, vertical: 4),\r\n+                      padding: const EdgeInsets.symmetric(\r\n+                          horizontal: 8, vertical: 4),\r\n                       decoration: BoxDecoration(\r\n-                        color: AppColors.success.withOpacity(0.1),\r\n+                        color: AppColors.success.withAlpha(26),\r\n                         borderRadius: BorderRadius.circular(4),\r\n                       ),\r\n                       child: Text(\r\n                         'Completed',\r\n-                        style: AppTextStyles.caption.copyWith(color: AppColors.success),\r\n+                        style: AppTextStyles.caption\r\n+                            .copyWith(color: AppColors.success),\r\n                       ),\r\n                     ),\r\n                 ],\r\n               ),\r\n"
                }
            ],
            "date": 1766327036644,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
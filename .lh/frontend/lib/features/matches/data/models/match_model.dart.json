{
    "sourceFile": "frontend/lib/features/matches/data/models/match_model.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1766327121722,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766328859742,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,166 @@\n+import 'package:cloud_firestore/cloud_firestore.dart';\r\n+import 'package:equatable/equatable.dart';\r\n \r\n+enum MatchStatus {\r\n+  pending,\r\n+  accepted,\r\n+  rejected,\r\n+  confirmed,\r\n+  pickedUp,\r\n+  inTransit,\r\n+  delivered,\r\n+  completed,\r\n+  cancelled\r\n+}\r\n+\r\n+class MatchModel extends Equatable {\r\n+  final String id;\r\n+  final String tripId;\r\n+  final String requestId;\r\n+  final String travelerId;\r\n+  final String travelerName;\r\n+  final String? travelerPhoto;\r\n+  final String requesterId;\r\n+  final String requesterName;\r\n+  final String? requesterPhoto;\r\n+  final String itemTitle;\r\n+  final String route;\r\n+  final DateTime tripDate;\r\n+  final double agreedPrice;\r\n+  final MatchStatus status;\r\n+  final List<String> participants;\r\n+  final DateTime createdAt;\r\n+  final DateTime? updatedAt;\r\n+  final DateTime? confirmedAt;\r\n+  final DateTime? completedAt;\r\n+\r\n+  const MatchModel({\r\n+    required this.id,\r\n+    required this.tripId,\r\n+    required this.requestId,\r\n+    required this.travelerId,\r\n+    required this.travelerName,\r\n+    this.travelerPhoto,\r\n+    required this.requesterId,\r\n+    required this.requesterName,\r\n+    this.requesterPhoto,\r\n+    required this.itemTitle,\r\n+    required this.route,\r\n+    required this.tripDate,\r\n+    this.agreedPrice = 0.0,\r\n+    this.status = MatchStatus.pending,\r\n+    required this.participants,\r\n+    required this.createdAt,\r\n+    this.updatedAt,\r\n+    this.confirmedAt,\r\n+    this.completedAt,\r\n+  });\r\n+\r\n+  factory MatchModel.fromFirestore(DocumentSnapshot doc) {\r\n+    final data = doc.data() as Map<String, dynamic>;\r\n+    return MatchModel(\r\n+      id: doc.id,\r\n+      tripId: data['tripId'] ?? '',\r\n+      requestId: data['requestId'] ?? '',\r\n+      travelerId: data['travelerId'] ?? '',\r\n+      travelerName: data['travelerName'] ?? '',\r\n+      travelerPhoto: data['travelerPhoto'],\r\n+      requesterId: data['requesterId'] ?? '',\r\n+      requesterName: data['requesterName'] ?? '',\r\n+      requesterPhoto: data['requesterPhoto'],\r\n+      itemTitle: data['itemTitle'] ?? '',\r\n+      route: data['route'] ?? '',\r\n+      tripDate: (data['tripDate'] as Timestamp).toDate(),\r\n+      agreedPrice: (data['agreedPrice'] ?? 0.0).toDouble(),\r\n+      status: MatchStatus.values.firstWhere(\r\n+        (e) => e.name == data['status'],\r\n+        orElse: () => MatchStatus.pending,\r\n+      ),\r\n+      participants: List<String>.from(data['participants'] ?? []),\r\n+      createdAt: (data['createdAt'] as Timestamp?)?.toDate() ?? DateTime.now(),\r\n+      updatedAt: (data['updatedAt'] as Timestamp?)?.toDate(),\r\n+      confirmedAt: (data['confirmedAt'] as Timestamp?)?.toDate(),\r\n+      completedAt: (data['completedAt'] as Timestamp?)?.toDate(),\r\n+    );\r\n+  }\r\n+\r\n+  Map<String, dynamic> toFirestore() {\r\n+    return {\r\n+      'tripId': tripId,\r\n+      'requestId': requestId,\r\n+      'travelerId': travelerId,\r\n+      'travelerName': travelerName,\r\n+      'travelerPhoto': travelerPhoto,\r\n+      'requesterId': requesterId,\r\n+      'requesterName': requesterName,\r\n+      'requesterPhoto': requesterPhoto,\r\n+      'itemTitle': itemTitle,\r\n+      'route': route,\r\n+      'tripDate': Timestamp.fromDate(tripDate),\r\n+      'agreedPrice': agreedPrice,\r\n+      'status': status.name,\r\n+      'participants': participants,\r\n+      'createdAt': Timestamp.fromDate(createdAt),\r\n+      'updatedAt': FieldValue.serverTimestamp(),\r\n+      'confirmedAt': confirmedAt != null ? Timestamp.fromDate(confirmedAt!) : null,\r\n+      'completedAt': completedAt != null ? Timestamp.fromDate(completedAt!) : null,\r\n+    };\r\n+  }\r\n+\r\n+  MatchModel copyWith({\r\n+    String? id,\r\n+    String? tripId,\r\n+    String? requestId,\r\n+    String? travelerId,\r\n+    String? travelerName,\r\n+    String? travelerPhoto,\r\n+    String? requesterId,\r\n+    String? requesterName,\r\n+    String? requesterPhoto,\r\n+    String? itemTitle,\r\n+    String? route,\r\n+    DateTime? tripDate,\r\n+    double? agreedPrice,\r\n+    MatchStatus? status,\r\n+    List<String>? participants,\r\n+    DateTime? createdAt,\r\n+    DateTime? updatedAt,\r\n+    DateTime? confirmedAt,\r\n+    DateTime? completedAt,\r\n+  }) {\r\n+    return MatchModel(\r\n+      id: id ?? this.id,\r\n+      tripId: tripId ?? this.tripId,\r\n+      requestId: requestId ?? this.requestId,\r\n+      travelerId: travelerId ?? this.travelerId,\r\n+      travelerName: travelerName ?? this.travelerName,\r\n+      travelerPhoto: travelerPhoto ?? this.travelerPhoto,\r\n+      requesterId: requesterId ?? this.requesterId,\r\n+      requesterName: requesterName ?? this.requesterName,\r\n+      requesterPhoto: requesterPhoto ?? this.requesterPhoto,\r\n+      itemTitle: itemTitle ?? this.itemTitle,\r\n+      route: route ?? this.route,\r\n+      tripDate: tripDate ?? this.tripDate,\r\n+      agreedPrice: agreedPrice ?? this.agreedPrice,\r\n+      status: status ?? this.status,\r\n+      participants: participants ?? this.participants,\r\n+      createdAt: createdAt ?? this.createdAt,\r\n+      updatedAt: updatedAt ?? this.updatedAt,\r\n+      confirmedAt: confirmedAt ?? this.confirmedAt,\r\n+      completedAt: completedAt ?? this.completedAt,\r\n+    );\r\n+  }\r\n+\r\n+  bool isParticipant(String userId) => participants.contains(userId);\r\n+\r\n+  String getOtherParticipantName(String currentUserId) {\r\n+    return currentUserId == travelerId ? requesterName : travelerName;\r\n+  }\r\n+\r\n+  String? getOtherParticipantPhoto(String currentUserId) {\r\n+    return currentUserId == travelerId ? requesterPhoto : travelerPhoto;\r\n+  }\r\n+\r\n+  @override\r\n+  List<Object?> get props => [id, tripId, requestId, status];\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1766327121722,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
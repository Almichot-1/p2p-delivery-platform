{
    "sourceFile": "frontend/lib/features/auth/data/models/user_model.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1766327036503,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766327614826,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,187 @@\n+import 'package:cloud_firestore/cloud_firestore.dart';\r\n+import 'package:equatable/equatable.dart';\r\n \r\n+enum UserRole { requester, traveler, both }\r\n+\r\n+enum VerificationStatus { unverified, pending, verified, rejected }\r\n+\r\n+class UserModel extends Equatable {\r\n+  final String uid;\r\n+  final String email;\r\n+  final String? phone;\r\n+  final String fullName;\r\n+  final String? photoUrl;\r\n+  final UserRole role;\r\n+  final VerificationStatus verificationStatus;\r\n+  final List<String> verificationDocs;\r\n+  final List<String> languages;\r\n+  final String? bio;\r\n+  final String? currentCity;\r\n+  final String? homeCity;\r\n+  final double rating;\r\n+  final int totalReviews;\r\n+  final int completedDeliveries;\r\n+  final int completedTrips;\r\n+  final bool isOnline;\r\n+  final DateTime? lastSeen;\r\n+  final String? fcmToken;\r\n+  final DateTime createdAt;\r\n+  final DateTime updatedAt;\r\n+\r\n+  const UserModel({\r\n+    required this.uid,\r\n+    required this.email,\r\n+    this.phone,\r\n+    required this.fullName,\r\n+    this.photoUrl,\r\n+    this.role = UserRole.both,\r\n+    this.verificationStatus = VerificationStatus.unverified,\r\n+    this.verificationDocs = const [],\r\n+    this.languages = const ['English'],\r\n+    this.bio,\r\n+    this.currentCity,\r\n+    this.homeCity,\r\n+    this.rating = 0.0,\r\n+    this.totalReviews = 0,\r\n+    this.completedDeliveries = 0,\r\n+    this.completedTrips = 0,\r\n+    this.isOnline = false,\r\n+    this.lastSeen,\r\n+    this.fcmToken,\r\n+    required this.createdAt,\r\n+    required this.updatedAt,\r\n+  });\r\n+\r\n+  factory UserModel.fromFirestore(DocumentSnapshot doc) {\r\n+    final data = doc.data() as Map<String, dynamic>;\r\n+    return UserModel(\r\n+      uid: doc.id,\r\n+      email: data['email'] ?? '',\r\n+      phone: data['phone'],\r\n+      fullName: data['fullName'] ?? '',\r\n+      photoUrl: data['photoUrl'],\r\n+      role: UserRole.values.firstWhere(\r\n+        (e) => e.name == data['role'],\r\n+        orElse: () => UserRole.both,\r\n+      ),\r\n+      verificationStatus: VerificationStatus.values.firstWhere(\r\n+        (e) => e.name == data['verificationStatus'],\r\n+        orElse: () => VerificationStatus.unverified,\r\n+      ),\r\n+      verificationDocs: List<String>.from(data['verificationDocs'] ?? []),\r\n+      languages: List<String>.from(data['languages'] ?? ['English']),\r\n+      bio: data['bio'],\r\n+      currentCity: data['currentCity'],\r\n+      homeCity: data['homeCity'],\r\n+      rating: (data['rating'] ?? 0.0).toDouble(),\r\n+      totalReviews: data['totalReviews'] ?? 0,\r\n+      completedDeliveries: data['completedDeliveries'] ?? 0,\r\n+      completedTrips: data['completedTrips'] ?? 0,\r\n+      isOnline: data['isOnline'] ?? false,\r\n+      lastSeen: (data['lastSeen'] as Timestamp?)?.toDate(),\r\n+      fcmToken: data['fcmToken'],\r\n+      createdAt: (data['createdAt'] as Timestamp?)?.toDate() ?? DateTime.now(),\r\n+      updatedAt: (data['updatedAt'] as Timestamp?)?.toDate() ?? DateTime.now(),\r\n+    );\r\n+  }\r\n+\r\n+  Map<String, dynamic> toFirestore() {\r\n+    return {\r\n+      'email': email,\r\n+      'phone': phone,\r\n+      'fullName': fullName,\r\n+      'photoUrl': photoUrl,\r\n+      'role': role.name,\r\n+      'verificationStatus': verificationStatus.name,\r\n+      'verificationDocs': verificationDocs,\r\n+      'languages': languages,\r\n+      'bio': bio,\r\n+      'currentCity': currentCity,\r\n+      'homeCity': homeCity,\r\n+      'rating': rating,\r\n+      'totalReviews': totalReviews,\r\n+      'completedDeliveries': completedDeliveries,\r\n+      'completedTrips': completedTrips,\r\n+      'isOnline': isOnline,\r\n+      'lastSeen': lastSeen != null ? Timestamp.fromDate(lastSeen!) : null,\r\n+      'fcmToken': fcmToken,\r\n+      'createdAt': Timestamp.fromDate(createdAt),\r\n+      'updatedAt': FieldValue.serverTimestamp(),\r\n+    };\r\n+  }\r\n+\r\n+  UserModel copyWith({\r\n+    String? uid,\r\n+    String? email,\r\n+    String? phone,\r\n+    String? fullName,\r\n+    String? photoUrl,\r\n+    UserRole? role,\r\n+    VerificationStatus? verificationStatus,\r\n+    List<String>? verificationDocs,\r\n+    List<String>? languages,\r\n+    String? bio,\r\n+    String? currentCity,\r\n+    String? homeCity,\r\n+    double? rating,\r\n+    int? totalReviews,\r\n+    int? completedDeliveries,\r\n+    int? completedTrips,\r\n+    bool? isOnline,\r\n+    DateTime? lastSeen,\r\n+    String? fcmToken,\r\n+    DateTime? createdAt,\r\n+    DateTime? updatedAt,\r\n+  }) {\r\n+    return UserModel(\r\n+      uid: uid ?? this.uid,\r\n+      email: email ?? this.email,\r\n+      phone: phone ?? this.phone,\r\n+      fullName: fullName ?? this.fullName,\r\n+      photoUrl: photoUrl ?? this.photoUrl,\r\n+      role: role ?? this.role,\r\n+      verificationStatus: verificationStatus ?? this.verificationStatus,\r\n+      verificationDocs: verificationDocs ?? this.verificationDocs,\r\n+      languages: languages ?? this.languages,\r\n+      bio: bio ?? this.bio,\r\n+      currentCity: currentCity ?? this.currentCity,\r\n+      homeCity: homeCity ?? this.homeCity,\r\n+      rating: rating ?? this.rating,\r\n+      totalReviews: totalReviews ?? this.totalReviews,\r\n+      completedDeliveries: completedDeliveries ?? this.completedDeliveries,\r\n+      completedTrips: completedTrips ?? this.completedTrips,\r\n+      isOnline: isOnline ?? this.isOnline,\r\n+      lastSeen: lastSeen ?? this.lastSeen,\r\n+      fcmToken: fcmToken ?? this.fcmToken,\r\n+      createdAt: createdAt ?? this.createdAt,\r\n+      updatedAt: updatedAt ?? this.updatedAt,\r\n+    );\r\n+  }\r\n+\r\n+  bool get isVerified => verificationStatus == VerificationStatus.verified;\r\n+\r\n+  @override\r\n+  List<Object?> get props => [\r\n+        uid,\r\n+        email,\r\n+        phone,\r\n+        fullName,\r\n+        photoUrl,\r\n+        role,\r\n+        verificationStatus,\r\n+        verificationDocs,\r\n+        languages,\r\n+        bio,\r\n+        currentCity,\r\n+        homeCity,\r\n+        rating,\r\n+        totalReviews,\r\n+        completedDeliveries,\r\n+        completedTrips,\r\n+        isOnline,\r\n+        lastSeen,\r\n+        fcmToken,\r\n+        createdAt,\r\n+        updatedAt,\r\n+      ];\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1766327036503,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
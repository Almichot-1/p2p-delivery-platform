{
    "sourceFile": "frontend/lib/features/auth/presentation/screens/forgot_password_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1766327036535,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766327767089,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,93 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n \r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/utils/validators.dart';\r\n+import '../../../../core/utils/helpers.dart';\r\n+import '../../../../core/widgets/custom_button.dart';\r\n+import '../../../../core/widgets/custom_text_field.dart';\r\n+import '../../bloc/auth_bloc.dart';\r\n+import '../../bloc/auth_event.dart';\r\n+import '../../bloc/auth_state.dart';\r\n+import '../widgets/auth_header.dart';\r\n+\r\n+class ForgotPasswordScreen extends StatefulWidget {\r\n+  const ForgotPasswordScreen({super.key});\r\n+\r\n+  @override\r\n+  State<ForgotPasswordScreen> createState() => _ForgotPasswordScreenState();\r\n+}\r\n+\r\n+class _ForgotPasswordScreenState extends State<ForgotPasswordScreen> {\r\n+  final _formKey = GlobalKey<FormState>();\r\n+  final _emailController = TextEditingController();\r\n+\r\n+  @override\r\n+  void dispose() {\r\n+    _emailController.dispose();\r\n+    super.dispose();\r\n+  }\r\n+\r\n+  void _onSubmit() {\r\n+    if (_formKey.currentState?.validate() ?? false) {\r\n+      context.read<AuthBloc>().add(\r\n+            AuthForgotPasswordRequested(\r\n+              email: _emailController.text.trim(),\r\n+            ),\r\n+          );\r\n+    }\r\n+  }\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Scaffold(\r\n+      appBar: AppBar(\r\n+        backgroundColor: Colors.transparent,\r\n+        elevation: 0,\r\n+      ),\r\n+      body: BlocConsumer<AuthBloc, AuthState>(\r\n+        listener: (context, state) {\r\n+          if (state is AuthPasswordResetSent) {\r\n+            _showSuccessDialog(state.email);\r\n+          } else if (state is AuthError) {\r\n+            Helpers.showErrorSnackBar(context, state.message);\r\n+          }\r\n+        },\r\n+        builder: (context, state) {\r\n+          return SafeArea(\r\n+            child: Padding(\r\n+              padding: const EdgeInsets.all(24),\r\n+              child: Form(\r\n+                key: _formKey,\r\n+                child: Column(\r\n+                  crossAxisAlignment: CrossAxisAlignment.stretch,\r\n+                  children: [\r\n+                    // Header\r\n+                    const AuthHeader(\r\n+                      title: 'Forgot Password?',\r\n+                      subtitle:\r\n+                          \"Don't worry, we'll send you reset instructions.\",\r\n+                    ),\r\n+\r\n+                    const SizedBox(height: 48),\r\n+\r\n+                    // Email field\r\n+                    CustomTextField(\r\n+                      label: 'Email',\r\n+                      hint: 'Enter your email address',\r\n+                      controller: _emailController,\r\n+                      keyboardType: TextInputType.emailAddress,\r\n+                      prefixIcon: Icons.email_outlined,\r\n+                      validator: Validators.email,\r\n+                      textInputAction: TextInputAction.done,\r\n+                      onSubmitted: (_) => _onSubmit(),\r\n+                    ),\r\n+\r\n+                    const SizedBox(height: 32),\r\n+\r\n+                    // Submit button\r\n+                    CustomButton(\r\n+                      text: 'Send Reset Link',\r\n+                      \n\\ No newline at end of file\n"
                },
                {
                    "date": 1766328095146,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -22,17 +22,18 @@\n \r\n class _ForgotPasswordScreenState extends State<ForgotPasswordScreen> {\r\n   final _formKey = GlobalKey<FormState>();\r\n   final _emailController = TextEditingController();\r\n+  bool _emailSent = false;\r\n \r\n   @override\r\n   void dispose() {\r\n     _emailController.dispose();\r\n     super.dispose();\r\n   }\r\n \r\n-  void _onSubmit() {\r\n-    if (_formKey.currentState?.validate() ?? false) {\r\n+  void _onResetPressed() {\r\n+    if (_formKey.currentState!.validate()) {\r\n       context.read<AuthBloc>().add(\r\n             AuthForgotPasswordRequested(\r\n               email: _emailController.text.trim(),\r\n             ),\r\n@@ -41,53 +42,151 @@\n   }\r\n \r\n   @override\r\n   Widget build(BuildContext context) {\r\n-    return Scaffold(\r\n-      appBar: AppBar(\r\n-        backgroundColor: Colors.transparent,\r\n-        elevation: 0,\r\n+    return BlocListener<AuthBloc, AuthState>(\r\n+      listener: (context, state) {\r\n+        if (state is AuthPasswordResetSent) {\r\n+          setState(() {\r\n+            _emailSent = true;\r\n+          });\r\n+        } else if (state is AuthError) {\r\n+          Helpers.showErrorSnackBar(context, state.message);\r\n+        }\r\n+      },\r\n+      child: Scaffold(\r\n+        appBar: AppBar(\r\n+          leading: IconButton(\r\n+            icon: const Icon(Icons.arrow_back),\r\n+            onPressed: () => context.pop(),\r\n+          ),\r\n+        ),\r\n+        body: SafeArea(\r\n+          child: SingleChildScrollView(\r\n+            padding: const EdgeInsets.all(24),\r\n+            child: _emailSent ? _buildSuccessView() : _buildFormView(),\r\n+          ),\r\n+        ),\r\n       ),\r\n-      body: BlocConsumer<AuthBloc, AuthState>(\r\n-        listener: (context, state) {\r\n-          if (state is AuthPasswordResetSent) {\r\n-            _showSuccessDialog(state.email);\r\n-          } else if (state is AuthError) {\r\n-            Helpers.showErrorSnackBar(context, state.message);\r\n-          }\r\n-        },\r\n-        builder: (context, state) {\r\n-          return SafeArea(\r\n-            child: Padding(\r\n-              padding: const EdgeInsets.all(24),\r\n-              child: Form(\r\n-                key: _formKey,\r\n-                child: Column(\r\n-                  crossAxisAlignment: CrossAxisAlignment.stretch,\r\n-                  children: [\r\n-                    // Header\r\n-                    const AuthHeader(\r\n-                      title: 'Forgot Password?',\r\n-                      subtitle:\r\n\\ No newline at end of file\n-                          \"Don't worry, we'll send you reset instructions.\",\r\n-                    ),\r\n+    );\r\n+  }\r\n \r\n-                    const SizedBox(height: 48),\r\n+  Widget _buildFormView() {\r\n+    return Form(\r\n+      key: _formKey,\r\n+      child: Column(\r\n+        crossAxisAlignment: CrossAxisAlignment.stretch,\r\n+        children: [\r\n+          const SizedBox(height: 20),\r\n \r\n-                    // Email field\r\n-                    CustomTextField(\r\n-                      label: 'Email',\r\n-                      hint: 'Enter your email address',\r\n-                      controller: _emailController,\r\n-                      keyboardType: TextInputType.emailAddress,\r\n-                      prefixIcon: Icons.email_outlined,\r\n-                      validator: Validators.email,\r\n-                      textInputAction: TextInputAction.done,\r\n-                      onSubmitted: (_) => _onSubmit(),\r\n-                    ),\r\n+          // Header\r\n+          const AuthHeader(\r\n+            title: 'Forgot Password?',\r\n+            subtitle:\r\n+                \"Enter your email and we'll send you a link to reset your password\",\r\n+          ),\r\n+          const SizedBox(height: 40),\r\n \r\n-                    const SizedBox(height: 32),\r\n+          // Email field\r\n+          CustomTextField(\r\n+            label: 'Email',\r\n+            hint: 'Enter your email',\r\n+            controller: _emailController,\r\n+            keyboardType: TextInputType.emailAddress,\r\n+            prefixIcon: Icons.email_outlined,\r\n+            textInputAction: TextInputAction.done,\r\n+            validator: Validators.email,\r\n+          ),\r\n+          const SizedBox(height: 32),\r\n \r\n-                    // Submit button\r\n-                    CustomButton(\r\n-                      text: 'Send Reset Link',\r\n-                      \n+          // Reset button\r\n+          BlocBuilder<AuthBloc, AuthState>(\r\n+            builder: (context, state) {\r\n+              return CustomButton(\r\n+                text: 'Reset Password',\r\n+                onPressed: _onResetPressed,\r\n+                isLoading: state is AuthLoading,\r\n+              );\r\n+            },\r\n+          ),\r\n+          const SizedBox(height: 24),\r\n+\r\n+          // Back to login\r\n+          Center(\r\n+            child: GestureDetector(\r\n+              onTap: () => context.pop(),\r\n+              child: Text(\r\n+                'Back to Login',\r\n+                style: AppTextStyles.bodyMedium.copyWith(\r\n+                  color: AppColors.primary,\r\n+                  fontWeight: FontWeight.w600,\r\n+                ),\r\n+              ),\r\n+            ),\r\n+          ),\r\n+        ],\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildSuccessView() {\r\n+    return Column(\r\n+      mainAxisAlignment: MainAxisAlignment.center,\r\n+      children: [\r\n+        const SizedBox(height: 60),\r\n+        \r\n+        // Success icon\r\n+        Container(\r\n+          width: 100,\r\n+          height: 100,\r\n+          decoration: BoxDecoration(\r\n+            color: AppColors.success.withOpacity(0.1),\r\n+            shape: BoxShape.circle,\r\n+          ),\r\n+          child: const Icon(\r\n+            Icons.mark_email_read_outlined,\r\n+            size: 50,\r\n+            color: AppColors.success,\r\n+          ),\r\n+        ),\r\n+        const SizedBox(height: 32),\r\n+\r\n+        // Success message\r\n+        Text(\r\n+          'Email Sent!',\r\n+          style: AppTextStyles.h3.copyWith(\r\n+            color: AppColors.textPrimaryLight,\r\n+          ),\r\n+        ),\r\n+        const SizedBox(height: 16),\r\n+        \r\n+        Text(\r\n+          'We\\'ve sent a password reset link to\\n${_emailController.text}',\r\n+          style: AppTextStyles.bodyMedium.copyWith(\r\n+            color: AppColors.grey600,\r\n+            height: 1.5,\r\n+          ),\r\n+          textAlign: TextAlign.center,\r\n+        ),\r\n+        const SizedBox(height: 40),\r\n+\r\n+        // Back to login button\r\n+        CustomButton(\r\n+          text: 'Back to Login',\r\n+          onPressed: () => context.pop(),\r\n+        ),\r\n+        const SizedBox(height: 16),\r\n+\r\n+        // Resend link\r\n+        TextButton(\r\n+          onPressed: _onResetPressed,\r\n+          child: Text(\r\n+            \"Didn't receive the email? Resend\",\r\n+            style: AppTextStyles.bodySmall.copyWith(\r\n+              color: AppColors.primary,\r\n+            ),\r\n+          ),\r\n+        ),\r\n+      ],\r\n+    );\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766346700160,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -132,15 +132,15 @@\n     return Column(\r\n       mainAxisAlignment: MainAxisAlignment.center,\r\n       children: [\r\n         const SizedBox(height: 60),\r\n-        \r\n+\r\n         // Success icon\r\n         Container(\r\n           width: 100,\r\n           height: 100,\r\n           decoration: BoxDecoration(\r\n-            color: AppColors.success.withOpacity(0.1),\r\n+            color: AppColors.success.withAlpha(26),\r\n             shape: BoxShape.circle,\r\n           ),\r\n           child: const Icon(\r\n             Icons.mark_email_read_outlined,\r\n@@ -157,9 +157,9 @@\n             color: AppColors.textPrimaryLight,\r\n           ),\r\n         ),\r\n         const SizedBox(height: 16),\r\n-        \r\n+\r\n         Text(\r\n           'We\\'ve sent a password reset link to\\n${_emailController.text}',\r\n           style: AppTextStyles.bodyMedium.copyWith(\r\n             color: AppColors.grey600,\r\n@@ -188,5 +188,5 @@\n         ),\r\n       ],\r\n     );\r\n   }\r\n-}\n\\ No newline at end of file\n+}\r\n"
                }
            ],
            "date": 1766327036535,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
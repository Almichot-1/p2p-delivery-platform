{
    "sourceFile": "frontend/lib/features/auth/presentation/widgets/otp_input_field.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1766333967369,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766346640737,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,121 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter/services.dart';\r\n+\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+\r\n+class OTPInputField extends StatefulWidget {\r\n+  final int length;\r\n+  final Function(String) onCompleted;\r\n+  final Function(String)? onChanged;\r\n+\r\n+  const OTPInputField({\r\n+    super.key,\r\n+    this.length = 6,\r\n+    required this.onCompleted,\r\n+    this.onChanged,\r\n+  });\r\n+\r\n+  @override\r\n+  State<OTPInputField> createState() => _OTPInputFieldState();\r\n+}\r\n+\r\n+class _OTPInputFieldState extends State<OTPInputField> {\r\n+  late List<TextEditingController> _controllers;\r\n+  late List<FocusNode> _focusNodes;\r\n+\r\n+  @override\r\n+  void initState() {\r\n+    super.initState();\r\n+    _controllers = List.generate(\r\n+      widget.length,\r\n+      (_) => TextEditingController(),\r\n+    );\r\n+    _focusNodes = List.generate(\r\n+      widget.length,\r\n+      (_) => FocusNode(),\r\n+    );\r\n+  }\r\n+\r\n+  @override\r\n+  void dispose() {\r\n+    for (final controller in _controllers) {\r\n+      controller.dispose();\r\n+    }\r\n+    for (final focusNode in _focusNodes) {\r\n+      focusNode.dispose();\r\n+    }\r\n+    super.dispose();\r\n+  }\r\n+\r\n+  String get _otp {\r\n+    return _controllers.map((c) => c.text).join();\r\n+  }\r\n+\r\n+  void _onChanged(int index, String value) {\r\n+    if (value.length == 1 && index < widget.length - 1) {\r\n+      _focusNodes[index + 1].requestFocus();\r\n+    }\r\n+\r\n+    widget.onChanged?.call(_otp);\r\n+\r\n+    if (_otp.length == widget.length) {\r\n+      widget.onCompleted(_otp);\r\n+    }\r\n+  }\r\n+\r\n+  void _onKeyDown(int index, KeyEvent event) {\r\n+    if (event is KeyDownEvent &&\r\n+        event.logicalKey == LogicalKeyboardKey.backspace) {\r\n+      if (_controllers[index].text.isEmpty && index > 0) {\r\n+        _focusNodes[index - 1].requestFocus();\r\n+        _controllers[index - 1].clear();\r\n+      }\r\n+    }\r\n+  }\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Row(\r\n+      mainAxisAlignment: MainAxisAlignment.spaceEvenly,\r\n+      children: List.generate(widget.length, (index) {\r\n+        return SizedBox(\r\n+          width: 50,\r\n+          height: 60,\r\n+          child: KeyboardListener(\r\n+            focusNode: FocusNode(),\r\n+            onKeyEvent: (event) => _onKeyDown(index, event),\r\n+            child: TextFormField(\r\n+              controller: _controllers[index],\r\n+              focusNode: _focusNodes[index],\r\n+              textAlign: TextAlign.center,\r\n+              keyboardType: TextInputType.number,\r\n+              maxLength: 1,\r\n+              style: AppTextStyles.h4,\r\n+              decoration: InputDecoration(\r\n+                counterText: '',\r\n+                filled: true,\r\n+                fillColor: AppColors.grey100,\r\n+                border: OutlineInputBorder(\r\n+                  borderRadius: BorderRadius.circular(12),\r\n+                  borderSide: BorderSide.none,\r\n+                ),\r\n+                focusedBorder: OutlineInputBorder(\r\n+                  borderRadius: BorderRadius.circular(12),\r\n+                  borderSide: const BorderSide(\r\n+                    color: AppColors.primary,\r\n+                    width: 2,\r\n+                  ),\r\n+                ),\r\n+              ),\r\n+              inputFormatters: [\r\n+                FilteringTextInputFormatter.digitsOnly,\r\n+              ],\r\n+              onChanged: (value) => _onChanged(index, value),\r\n+            ),\r\n+          ),\r\n+        );\r\n+      }),\r\n+    );\r\n+  }\r\n+}\r\n"
                }
            ],
            "date": 1766333967369,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\nimport 'package:flutter/services.dart';\r\n\r\nimport '../../../../core/theme/app_colors.dart';\r\nimport '../../../../core/theme/app_text_styles.dart';\r\n\r\nclass OTPInputField extends StatefulWidget {\r\n  final int length;\r\n  final Function(String) onCompleted;\r\n  final Function(String)? onChanged;\r\n\r\n  const OTPInputField({\r\n    super.key,\r\n    this.length = 6,\r\n    required this.onCompleted,\r\n    this.onChanged,\r\n  });\r\n\r\n  @override\r\n  State<OTPInputField> createState() => _OTPInputFieldState();\r\n}\r\n\r\nclass _OTPInputFieldState extends State<OTPInputField> {\r\n  late List<TextEditingController> _controllers;\r\n  late List<FocusNode> _focusNodes;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n    _controllers = List.generate(\r\n      widget.length,\r\n      (_) => TextEditingController(),\r\n    );\r\n    _focusNodes = List.generate(\r\n      widget.length,\r\n      (_) => FocusNode(),\r\n    );\r\n  }\r\n\r\n  @override\r\n  void dispose() {\r\n    for (final controller in _controllers) {\r\n      controller.dispose();\r\n    }\r\n    for (final focusNode in _focusNodes) {\r\n      focusNode.dispose();\r\n    }\r\n    super.dispose();\r\n  }\r\n\r\n  String get _otp {\r\n    return _controllers.map((c) => c.text).join();\r\n  }\r\n\r\n  void _onChanged(int index, String value) {\r\n    if (value.length == 1 && index < widget.length - 1) {\r\n      _focusNodes[index + 1].requestFocus();\r\n    }\r\n\r\n    widget.onChanged?.call(_otp);\r\n\r\n    if (_otp.length == widget.length) {\r\n      widget.onCompleted(_otp);\r\n    }\r\n  }\r\n\r\n  void _onKeyDown(int index, RawKeyEvent event) {\r\n    if (event is RawKeyDownEvent) {\r\n      if (event.logicalKey == LogicalKeyboardKey.backspace) {\r\n        if (_controllers[index].text.isEmpty && index > 0) {\r\n          _focusNodes[index - 1].requestFocus();\r\n          _controllers[index - 1].clear();\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return Row(\r\n      mainAxisAlignment: MainAxisAlignment.spaceEvenly,\r\n      children: List.generate(widget.length, (index) {\r\n        return SizedBox(\r\n          width: 50,\r\n          height: 60,\r\n          child: RawKeyboardListener(\r\n            focusNode: FocusNode(),\r\n            onKey: (event) => _onKeyDown(index, event),\r\n            child: TextFormField(\r\n              controller: _controllers[index],\r\n              focusNode: _focusNodes[index],\r\n              textAlign: TextAlign.center,\r\n              keyboardType: TextInputType.number,\r\n              maxLength: 1,\r\n              style: AppTextStyles.h4,\r\n              decoration: InputDecoration(\r\n                counterText: '',\r\n                filled: true,\r\n                fillColor: AppColors.grey100,\r\n                border: OutlineInputBorder(\r\n                  borderRadius: BorderRadius.circular(12),\r\n                  borderSide: BorderSide.none,\r\n                ),\r\n                focusedBorder: OutlineInputBorder(\r\n                  borderRadius: BorderRadius.circular(12),\r\n                  borderSide: const BorderSide(\r\n                    color: AppColors.primary,\r\n                    width: 2,\r\n                  ),\r\n                ),\r\n              ),\r\n              inputFormatters: [\r\n                FilteringTextInputFormatter.digitsOnly,\r\n              ],\r\n              onChanged: (value) => _onChanged(index, value),\r\n            ),\r\n          ),\r\n        );\r\n      }),\r\n    );\r\n  }\r\n}"
        }
    ]
}
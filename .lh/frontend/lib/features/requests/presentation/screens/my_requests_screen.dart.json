{
    "sourceFile": "frontend/lib/features/requests/presentation/screens/my_requests_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1766327062897,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766333745096,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,148 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n \r\n+import '../../../../config/dependency_injection.dart';\r\n+import '../../../../core/constants/route_constants.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/widgets/loading_widget.dart';\r\n+import '../../../../core/widgets/empty_state_widget.dart';\r\n+import '../../../auth/bloc/auth_bloc.dart';\r\n+import '../../../auth/bloc/auth_state.dart';\r\n+import '../../bloc/request_bloc.dart';\r\n+import '../../bloc/request_event.dart';\r\n+import '../../bloc/request_state.dart';\r\n+import '../../data/models/request_model.dart';\r\n+import '../widgets/request_card.dart';\r\n+\r\n+class MyRequestsScreen extends StatelessWidget {\r\n+  const MyRequestsScreen({super.key});\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocProvider(\r\n+      create: (_) => getIt<RequestBloc>()..add(MyRequestsLoadRequested()),\r\n+      child: const _MyRequestsView(),\r\n+    );\r\n+  }\r\n+}\r\n+\r\n+class _MyRequestsView extends StatefulWidget {\r\n+  const _MyRequestsView();\r\n+\r\n+  @override\r\n+  State<_MyRequestsView> createState() => _MyRequestsViewState();\r\n+}\r\n+\r\n+class _MyRequestsViewState extends State<_MyRequestsView>\r\n+    with SingleTickerProviderStateMixin {\r\n+  late TabController _tabController;\r\n+\r\n+  @override\r\n+  void initState() {\r\n+    super.initState();\r\n+    _tabController = TabController(length: 4, vsync: this);\r\n+  }\r\n+\r\n+  @override\r\n+  void dispose() {\r\n+    _tabController.dispose();\r\n+    super.dispose();\r\n+  }\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Scaffold(\r\n+      appBar: AppBar(\r\n+        title: const Text('My Requests'),\r\n+        bottom: TabBar(\r\n+          controller: _tabController,\r\n+          isScrollable: true,\r\n+          tabs: const [\r\n+            Tab(text: 'Active'),\r\n+            Tab(text: 'Matched'),\r\n+            Tab(text: 'Completed'),\r\n+            Tab(text: 'Cancelled'),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+      body: BlocBuilder<RequestBloc, RequestState>(\r\n+        builder: (context, state) {\r\n+          if (state is RequestLoading) {\r\n+            return const LoadingWidget();\r\n+          }\r\n+\r\n+          if (state is RequestError) {\r\n+            return Center(child: Text(state.message));\r\n+          }\r\n+\r\n+          if (state is RequestsLoaded) {\r\n+            final activeRequests = state.requests\r\n+                .where((r) => r.status == RequestStatus.active)\r\n+                .toList();\r\n+            final matchedRequests = state.requests\r\n+                .where((r) =>\r\n+                    r.status == RequestStatus.matched ||\r\n+                    r.status == RequestStatus.inProgress)\r\n+                .toList();\r\n+            final completedRequests = state.requests\r\n+                .where((r) => r.status == RequestStatus.completed)\r\n+                .toList();\r\n+            final cancelledRequests = state.requests\r\n+                .where((r) => r.status == RequestStatus.cancelled)\r\n+                .toList();\r\n+\r\n+            return TabBarView(\r\n+              controller: _tabController,\r\n+              children: [\r\n+                _buildRequestsList(activeRequests, 'No active requests'),\r\n+                _buildRequestsList(matchedRequests, 'No matched requests'),\r\n+                _buildRequestsList(completedRequests, 'No completed requests'),\r\n+                _buildRequestsList(cancelledRequests, 'No cancelled requests'),\r\n+              ],\r\n+            );\r\n+          }\r\n+\r\n+          return const SizedBox.shrink();\r\n+        },\r\n+      ),\r\n+      floatingActionButton: FloatingActionButton.extended(\r\n+        onPressed: () => context.push(RouteConstants.createRequest),\r\n+        icon: const Icon(Icons.add),\r\n+        label: const Text('New Request'),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildRequestsList(List<RequestModel> requests, String emptyMessage) {\r\n+    if (requests.isEmpty) {\r\n+      return EmptyStateWidget(\r\n+        icon: Icons.inventory_2_outlined,\r\n+        title: emptyMessage,\r\n+        subtitle: 'Your requests will appear here',\r\n+      );\r\n+    }\r\n+\r\n+    return RefreshIndicator(\r\n+      onRefresh: () async {\r\n+        context.read<RequestBloc>().add(MyRequestsLoadRequested());\r\n+      },\r\n+      child: ListView.builder(\r\n+        padding: const EdgeInsets.all(16),\r\n+        itemCount: requests.length,\r\n+        itemBuilder: (context, index) {\r\n+          final request = requests[index];\r\n+          return Padding(\r\n+            padding: const EdgeInsets.only(bottom: 16),\r\n+            child: RequestCard(\r\n+              request: request,\r\n+              onTap: () => context.push(\r\n+                RouteConstants.requestDetails.replaceFirst(':id', request.id),\r\n+              ),\r\n+            ),\r\n+          );\r\n+        },\r\n+      ),\r\n+    );\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1766327062897,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
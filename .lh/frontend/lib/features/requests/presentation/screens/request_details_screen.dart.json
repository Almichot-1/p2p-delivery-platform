{
    "sourceFile": "frontend/lib/features/requests/presentation/screens/request_details_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1766327062897,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766333754254,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,520 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n+import 'package:intl/intl.dart';\r\n+import 'package:cached_network_image/cached_network_image.dart';\r\n \r\n+import '../../../../config/dependency_injection.dart';\r\n+import '../../../../core/constants/route_constants.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/utils/helpers.dart';\r\n+import '../../../../core/widgets/custom_button.dart';\r\n+import '../../../../core/widgets/loading_widget.dart';\r\n+import '../../../../core/widgets/user_avatar.dart';\r\n+import '../../../../core/widgets/rating_stars.dart';\r\n+import '../../../../core/widgets/status_badge.dart';\r\n+import '../../../auth/bloc/auth_bloc.dart';\r\n+import '../../../auth/bloc/auth_state.dart';\r\n+import '../../bloc/request_bloc.dart';\r\n+import '../../bloc/request_event.dart';\r\n+import '../../bloc/request_state.dart';\r\n+import '../../data/models/request_model.dart';\r\n+import '../widgets/item_images_carousel.dart';\r\n+\r\n+class RequestDetailsScreen extends StatelessWidget {\r\n+  final String requestId;\r\n+\r\n+  const RequestDetailsScreen({super.key, required this.requestId});\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocProvider(\r\n+      create: (_) => getIt<RequestBloc>()..add(RequestDetailsRequested(requestId)),\r\n+      child: const _RequestDetailsView(),\r\n+    );\r\n+  }\r\n+}\r\n+\r\n+class _RequestDetailsView extends StatelessWidget {\r\n+  const _RequestDetailsView();\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Scaffold(\r\n+      body: BlocConsumer<RequestBloc, RequestState>(\r\n+        listener: (context, state) {\r\n+          if (state is RequestCancelled) {\r\n+            Helpers.showSuccessSnackBar(context, 'Request cancelled');\r\n+            context.pop();\r\n+          } else if (state is RequestError) {\r\n+            Helpers.showErrorSnackBar(context, state.message);\r\n+          }\r\n+        },\r\n+        builder: (context, state) {\r\n+          if (state is RequestLoading) {\r\n+            return const LoadingWidget();\r\n+          }\r\n+\r\n+          if (state is RequestError) {\r\n+            return Center(child: Text(state.message));\r\n+          }\r\n+\r\n+          if (state is RequestDetailsLoaded) {\r\n+            return _buildContent(context, state.request);\r\n+          }\r\n+\r\n+          return const SizedBox.shrink();\r\n+        },\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildContent(BuildContext context, RequestModel request) {\r\n+    final authState = context.read<AuthBloc>().state;\r\n+    final isOwner = authState is AuthAuthenticated &&\r\n+        authState.user.uid == request.requesterId;\r\n+\r\n+    return CustomScrollView(\r\n+      slivers: [\r\n+        // App Bar with images\r\n+        SliverAppBar(\r\n+          expandedHeight: request.imageUrls.isNotEmpty ? 300 : 150,\r\n+          pinned: true,\r\n+          flexibleSpace: FlexibleSpaceBar(\r\n+            background: request.imageUrls.isNotEmpty\r\n+                ? ItemImagesCarousel(imageUrls: request.imageUrls)\r\n+                : Container(\r\n+                    decoration: const BoxDecoration(\r\n+                      gradient: AppColors.primaryGradient,\r\n+                    ),\r\n+                    child: Center(\r\n+                      child: Icon(\r\n+                        _getCategoryIcon(request.category),\r\n+                        size: 60,\r\n+                        color: Colors.white.withOpacity(0.9),\r\n+                      ),\r\n+                    ),\r\n+                  ),\r\n+          ),\r\n+          actions: [\r\n+            if (isOwner && request.status == RequestStatus.active)\r\n+              PopupMenuButton<String>(\r\n+                onSelected: (value) => _handleMenuAction(context, value, request),\r\n+                itemBuilder: (context) => [\r\n+                  const PopupMenuItem(\r\n+                    value: 'edit',\r\n+                    child: Row(\r\n+                      children: [\r\n+                        Icon(Icons.edit),\r\n+                        SizedBox(width: 8),\r\n+                        Text('Edit'),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                  const PopupMenuItem(\r\n+                    value: 'cancel',\r\n+                    child: Row(\r\n+                      children: [\r\n+                        Icon(Icons.cancel, color: AppColors.error),\r\n+                        SizedBox(width: 8),\r\n+                        Text('Cancel Request',\r\n+                            style: TextStyle(color: AppColors.error)),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+          ],\r\n+        ),\r\n+\r\n+        // Content\r\n+        SliverToBoxAdapter(\r\n+          child: Padding(\r\n+            padding: const EdgeInsets.all(16),\r\n+            child: Column(\r\n+              crossAxisAlignment: CrossAxisAlignment.start,\r\n+              children: [\r\n+                // Title and status\r\n+                Row(\r\n+                  children: [\r\n+                    Expanded(\r\n+                      child: Text(request.title, style: AppTextStyles.h4),\r\n+                    ),\r\n+                    StatusBadge(status: request.status.name),\r\n+                  ],\r\n+                ),\r\n+                const SizedBox(height: 8),\r\n+\r\n+                // Urgent badge\r\n+                if (request.isUrgent)\r\n+                  Container(\r\n+                    padding: const EdgeInsets.symmetric(\r\n+                      horizontal: 12,\r\n+                      vertical: 6,\r\n+                    ),\r\n+                    decoration: BoxDecoration(\r\n+                      color: AppColors.error.withOpacity(0.1),\r\n+                      borderRadius: BorderRadius.circular(20),\r\n+                    ),\r\n+                    child: Row(\r\n+                      mainAxisSize: MainAxisSize.min,\r\n+                      children: [\r\n+                        const Icon(Icons.bolt, size: 16, color: AppColors.error),\r\n+                        const SizedBox(width: 4),\r\n+                        Text(\r\n+                          'Urgent Delivery',\r\n+                          style: AppTextStyles.labelMedium.copyWith(\r\n+                            color: AppColors.error,\r\n+                          ),\r\n+                        ),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                const SizedBox(height: 16),\r\n+\r\n+                // Description\r\n+                Text(\r\n+                  request.description,\r\n+                  style: AppTextStyles.bodyMedium.copyWith(\r\n+                    color: AppColors.grey700,\r\n+                    height: 1.5,\r\n+                  ),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Requester card\r\n+                _buildRequesterCard(context, request),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Route section\r\n+                _buildSection(\r\n+                  title: 'Delivery Route',\r\n+                  child: _buildRouteCard(request),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Item details\r\n+                _buildSection(\r\n+                  title: 'Item Details',\r\n+                  child: _buildItemDetails(request),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Recipient info\r\n+                _buildSection(\r\n+                  title: 'Recipient Information',\r\n+                  child: _buildRecipientInfo(request),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Price\r\n+                if (request.offeredPrice != null)\r\n+                  _buildSection(\r\n+                    title: 'Offered Compensation',\r\n+                    child: Container(\r\n+                      padding: const EdgeInsets.all(16),\r\n+                      decoration: BoxDecoration(\r\n+                        color: AppColors.success.withOpacity(0.1),\r\n+                        borderRadius: BorderRadius.circular(12),\r\n+                      ),\r\n+                      child: Row(\r\n+                        mainAxisAlignment: MainAxisAlignment.center,\r\n+                        children: [\r\n+                          const Icon(Icons.attach_money,\r\n+                              color: AppColors.success),\r\n+                          Text(\r\n+                            '\\$${request.offeredPrice!.toStringAsFixed(2)}',\r\n+                            style: AppTextStyles.h3.copyWith(\r\n+                              color: AppColors.success,\r\n+                            ),\r\n+                          ),\r\n+                        ],\r\n+                      ),\r\n+                    ),\r\n+                  ),\r\n+                const SizedBox(height: 100),\r\n+              ],\r\n+            ),\r\n+          ),\r\n+        ),\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildRequesterCard(BuildContext context, RequestModel request) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Row(\r\n+          children: [\r\n+            UserAvatar(\r\n+              imageUrl: request.requesterPhoto,\r\n+              name: request.requesterName,\r\n+              size: 60,\r\n+            ),\r\n+            const SizedBox(width: 16),\r\n+            Expanded(\r\n+              child: Column(\r\n+                crossAxisAlignment: CrossAxisAlignment.start,\r\n+                children: [\r\n+                  Text(request.requesterName, style: AppTextStyles.h5),\r\n+                  const SizedBox(height: 4),\r\n+                  RatingStars(\r\n+                    rating: request.requesterRating,\r\n+                    size: 16,\r\n+                    showValue: true,\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+            IconButton(\r\n+              onPressed: () {\r\n+                // View profile\r\n+              },\r\n+              icon: const Icon(Icons.arrow_forward_ios),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildSection({required String title, required Widget child}) {\r\n+    return Column(\r\n+      crossAxisAlignment: CrossAxisAlignment.start,\r\n+      children: [\r\n+        Text(title, style: AppTextStyles.h6),\r\n+        const SizedBox(height: 12),\r\n+        child,\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildRouteCard(RequestModel request) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Column(\r\n+          children: [\r\n+            Row(\r\n+              children: [\r\n+                Expanded(\r\n+                  child: Column(\r\n+                    children: [\r\n+                      const Icon(Icons.location_on, color: AppColors.primary),\r\n+                      const SizedBox(height: 8),\r\n+                      Text('Pickup', style: AppTextStyles.caption),\r\n+                      const SizedBox(height: 4),\r\n+                      Text(\r\n+                        request.pickupCity,\r\n+                        style: AppTextStyles.bodyLarge\r\n+                            .copyWith(fontWeight: FontWeight.w600),\r\n+                        textAlign: TextAlign.center,\r\n+                      ),\r\n+                      Text(\r\n+                        request.pickupCountry,\r\n+                        style: AppTextStyles.bodySmall\r\n+                            .copyWith(color: AppColors.grey600),\r\n+                      ),\r\n+                    ],\r\n+                  ),\r\n+                ),\r\n+                Expanded(\r\n+                  child: Column(\r\n+                    children: [\r\n+                      Icon(Icons.arrow_forward,\r\n+                          color: AppColors.grey400, size: 32),\r\n+                    ],\r\n+                  ),\r\n+                ),\r\n+                Expanded(\r\n+                  child: Column(\r\n+                    children: [\r\n+                      const Icon(Icons.flag, color: AppColors.success),\r\n+                      const SizedBox(height: 8),\r\n+                      Text('Delivery', style: AppTextStyles.caption),\r\n+                      const SizedBox(height: 4),\r\n+                      Text(\r\n+                        request.deliveryCity,\r\n+                        style: AppTextStyles.bodyLarge\r\n+                            .copyWith(fontWeight: FontWeight.w600),\r\n+                        textAlign: TextAlign.center,\r\n+                      ),\r\n+                      Text(\r\n+                        request.deliveryCountry,\r\n+                        style: AppTextStyles.bodySmall\r\n+                            .copyWith(color: AppColors.grey600),\r\n+                      ),\r\n+                    ],\r\n+                  ),\r\n+                ),\r\n+              ],\r\n+            ),\r\n+            if (request.preferredDeliveryDate != null) ...[\r\n+              const Divider(height: 24),\r\n+              Row(\r\n+                mainAxisAlignment: MainAxisAlignment.center,\r\n+                children: [\r\n+                  const Icon(Icons.calendar_today,\r\n+                      size: 16, color: AppColors.grey600),\r\n+                  const SizedBox(width: 8),\r\n+                  Text(\r\n+                    'Preferred by ${DateFormat('MMM dd, yyyy').format(request.preferredDeliveryDate!)}',\r\n+                    style: AppTextStyles.bodyMedium,\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ],\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildItemDetails(RequestModel request) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Column(\r\n+          children: [\r\n+            _buildDetailRow(\r\n+              icon: Icons.category,\r\n+              label: 'Category',\r\n+              value: request.categoryDisplay,\r\n+            ),\r\n+            const Divider(height: 24),\r\n+            _buildDetailRow(\r\n+              icon: Icons.fitness_center,\r\n+              label: 'Weight',\r\n+              value: '${request.weightKg.toStringAsFixed(1)} kg',\r\n+            ),\r\n+            const Divider(height: 24),\r\n+            _buildDetailRow(\r\n+              icon: Icons.access_time,\r\n+              label: 'Posted',\r\n+              value: DateFormat('MMM dd, yyyy').format(request.createdAt),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildRecipientInfo(RequestModel request) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Column(\r\n+          children: [\r\n+            _buildDetailRow(\r\n+              icon: Icons.person,\r\n+              label: 'Name',\r\n+              value: request.recipientName,\r\n+            ),\r\n+            const Divider(height: 24),\r\n+            _buildDetailRow(\r\n+              icon: Icons.phone,\r\n+              label: 'Phone',\r\n+              value: request.recipientPhone,\r\n+            ),\r\n+            const Divider(height: 24),\r\n+            _buildDetailRow(\r\n+              icon: Icons.location_on,\r\n+              label: 'Address',\r\n+              value: request.deliveryAddress,\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildDetailRow({\r\n+    required IconData icon,\r\n+    required String label,\r\n+    required String value,\r\n+  }) {\r\n+    return Row(\r\n+      children: [\r\n+        Container(\r\n+          padding: const EdgeInsets.all(8),\r\n+          decoration: BoxDecoration(\r\n+            color: AppColors.primary.withOpacity(0.1),\r\n+            borderRadius: BorderRadius.circular(8),\r\n+          ),\r\n+          child: Icon(icon, color: AppColors.primary, size: 20),\r\n+        ),\r\n+        const SizedBox(width: 12),\r\n+        Expanded(\r\n+          child: Column(\r\n+            crossAxisAlignment: CrossAxisAlignment.start,\r\n+            children: [\r\n+              Text(label, style: AppTextStyles.caption),\r\n+              Text(value, style: AppTextStyles.bodyMedium),\r\n+            ],\r\n+          ),\r\n+        ),\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  IconData _getCategoryIcon(ItemCategory category) {\r\n+    switch (category) {\r\n+      case ItemCategory.documents:\r\n+        return Icons.description;\r\n+      case ItemCategory.electronics:\r\n+        return Icons.devices;\r\n+      case ItemCategory.clothing:\r\n+        return Icons.checkroom;\r\n+      case ItemCategory.food:\r\n+        return Icons.restaurant;\r\n+      case ItemCategory.medicine:\r\n+        return Icons.medical_services;\r\n+      case ItemCategory.gifts:\r\n+        return Icons.card_giftcard;\r\n+      case ItemCategory.other:\r\n+        return Icons.inventory_2;\r\n+    }\r\n+  }\r\n+\r\n+  void _handleMenuAction(\r\n+      BuildContext context, String action, RequestModel request) {\r\n+    switch (action) {\r\n+      case 'edit':\r\n+        // Navigate to edit screen\r\n+        break;\r\n+      case 'cancel':\r\n+        _showCancelDialog(context, request);\r\n+        break;\r\n+    }\r\n+  }\r\n+\r\n+  void _showCancelDialog(BuildContext context, RequestModel request) {\r\n+    showDialog(\r\n+      context: context,\r\n+      builder: (ctx) => AlertDialog(\r\n+        title: const Text('Cancel Request'),\r\n+        content: const Text(\r\n+          'Are you sure you want to cancel this request? This action cannot be undone.',\r\n+        ),\r\n+        actions: [\r\n+          TextButton(\r\n+            onPressed: () => Navigator.pop(ctx),\r\n+            child: const Text('No'),\r\n+          ),\r\n+          ElevatedButton(\r\n+            onPressed: () {\r\n+              Navigator.pop(ctx);\r\n+              context.read<RequestBloc>().add(RequestCancelRequested(request.id));\r\n+            },\r\n+            style: ElevatedButton.styleFrom(\r\n+              backgroundColor: AppColors.error,\r\n+            ),\r\n+            child: const Text('Yes, Cancel'),\r\n+          ),\r\n+        ],\r\n+      ),\r\n+    );\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766346761055,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,522 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n+import 'package:intl/intl.dart';\r\n+\r\n+import '../../../../config/dependency_injection.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/utils/helpers.dart';\r\n+import '../../../../core/widgets/loading_widget.dart';\r\n+import '../../../../core/widgets/user_avatar.dart';\r\n+import '../../../../core/widgets/rating_stars.dart';\r\n+import '../../../../core/widgets/status_badge.dart';\r\n+import '../../../auth/bloc/auth_bloc.dart';\r\n+import '../../../auth/bloc/auth_state.dart';\r\n+import '../../bloc/request_bloc.dart';\r\n+import '../../bloc/request_event.dart';\r\n+import '../../bloc/request_state.dart';\r\n+import '../../data/models/request_model.dart';\r\n+import '../widgets/item_images_carousel.dart';\r\n+\r\n+class RequestDetailsScreen extends StatelessWidget {\r\n+  final String requestId;\r\n+\r\n+  const RequestDetailsScreen({super.key, required this.requestId});\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocProvider(\r\n+      create: (_) =>\r\n+          getIt<RequestBloc>()..add(RequestDetailsRequested(requestId)),\r\n+      child: const _RequestDetailsView(),\r\n+    );\r\n+  }\r\n+}\r\n+\r\n+class _RequestDetailsView extends StatelessWidget {\r\n+  const _RequestDetailsView();\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return Scaffold(\r\n+      body: BlocConsumer<RequestBloc, RequestState>(\r\n+        listener: (context, state) {\r\n+          if (state is RequestCancelled) {\r\n+            Helpers.showSuccessSnackBar(context, 'Request cancelled');\r\n+            context.pop();\r\n+          } else if (state is RequestError) {\r\n+            Helpers.showErrorSnackBar(context, state.message);\r\n+          }\r\n+        },\r\n+        builder: (context, state) {\r\n+          if (state is RequestLoading) {\r\n+            return const LoadingWidget();\r\n+          }\r\n+\r\n+          if (state is RequestError) {\r\n+            return Center(child: Text(state.message));\r\n+          }\r\n+\r\n+          if (state is RequestDetailsLoaded) {\r\n+            return _buildContent(context, state.request);\r\n+          }\r\n+\r\n+          return const SizedBox.shrink();\r\n+        },\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildContent(BuildContext context, RequestModel request) {\r\n+    final authState = context.read<AuthBloc>().state;\r\n+    final isOwner = authState is AuthAuthenticated &&\r\n+        authState.user.uid == request.requesterId;\r\n+\r\n+    return CustomScrollView(\r\n+      slivers: [\r\n+        // App Bar with images\r\n+        SliverAppBar(\r\n+          expandedHeight: request.imageUrls.isNotEmpty ? 300 : 150,\r\n+          pinned: true,\r\n+          flexibleSpace: FlexibleSpaceBar(\r\n+            background: request.imageUrls.isNotEmpty\r\n+                ? ItemImagesCarousel(imageUrls: request.imageUrls)\r\n+                : Container(\r\n+                    decoration: const BoxDecoration(\r\n+                      gradient: AppColors.primaryGradient,\r\n+                    ),\r\n+                    child: Center(\r\n+                      child: Icon(\r\n+                        _getCategoryIcon(request.category),\r\n+                        size: 60,\r\n+                        color: Colors.white.withAlpha(230),\r\n+                      ),\r\n+                    ),\r\n+                  ),\r\n+          ),\r\n+          actions: [\r\n+            if (isOwner && request.status == RequestStatus.active)\r\n+              PopupMenuButton<String>(\r\n+                onSelected: (value) =>\r\n+                    _handleMenuAction(context, value, request),\r\n+                itemBuilder: (context) => [\r\n+                  const PopupMenuItem(\r\n+                    value: 'edit',\r\n+                    child: Row(\r\n+                      children: [\r\n+                        Icon(Icons.edit),\r\n+                        SizedBox(width: 8),\r\n+                        Text('Edit'),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                  const PopupMenuItem(\r\n+                    value: 'cancel',\r\n+                    child: Row(\r\n+                      children: [\r\n+                        Icon(Icons.cancel, color: AppColors.error),\r\n+                        SizedBox(width: 8),\r\n+                        Text('Cancel Request',\r\n+                            style: TextStyle(color: AppColors.error)),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+          ],\r\n+        ),\r\n+\r\n+        // Content\r\n+        SliverToBoxAdapter(\r\n+          child: Padding(\r\n+            padding: const EdgeInsets.all(16),\r\n+            child: Column(\r\n+              crossAxisAlignment: CrossAxisAlignment.start,\r\n+              children: [\r\n+                // Title and status\r\n+                Row(\r\n+                  children: [\r\n+                    Expanded(\r\n+                      child: Text(request.title, style: AppTextStyles.h4),\r\n+                    ),\r\n+                    StatusBadge(status: request.status.name),\r\n+                  ],\r\n+                ),\r\n+                const SizedBox(height: 8),\r\n+\r\n+                // Urgent badge\r\n+                if (request.isUrgent)\r\n+                  Container(\r\n+                    padding: const EdgeInsets.symmetric(\r\n+                      horizontal: 12,\r\n+                      vertical: 6,\r\n+                    ),\r\n+                    decoration: BoxDecoration(\r\n+                      color: AppColors.error.withAlpha(26),\r\n+                      borderRadius: BorderRadius.circular(20),\r\n+                    ),\r\n+                    child: Row(\r\n+                      mainAxisSize: MainAxisSize.min,\r\n+                      children: [\r\n+                        const Icon(Icons.bolt,\r\n+                            size: 16, color: AppColors.error),\r\n+                        const SizedBox(width: 4),\r\n+                        Text(\r\n+                          'Urgent Delivery',\r\n+                          style: AppTextStyles.labelMedium.copyWith(\r\n+                            color: AppColors.error,\r\n+                          ),\r\n+                        ),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                const SizedBox(height: 16),\r\n+\r\n+                // Description\r\n+                Text(\r\n+                  request.description,\r\n+                  style: AppTextStyles.bodyMedium.copyWith(\r\n+                    color: AppColors.grey700,\r\n+                    height: 1.5,\r\n+                  ),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Requester card\r\n+                _buildRequesterCard(context, request),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Route section\r\n+                _buildSection(\r\n+                  title: 'Delivery Route',\r\n+                  child: _buildRouteCard(request),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Item details\r\n+                _buildSection(\r\n+                  title: 'Item Details',\r\n+                  child: _buildItemDetails(request),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Recipient info\r\n+                _buildSection(\r\n+                  title: 'Recipient Information',\r\n+                  child: _buildRecipientInfo(request),\r\n+                ),\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Price\r\n+                if (request.offeredPrice != null)\r\n+                  _buildSection(\r\n+                    title: 'Offered Compensation',\r\n+                    child: Container(\r\n+                      padding: const EdgeInsets.all(16),\r\n+                      decoration: BoxDecoration(\r\n+                        color: AppColors.success.withAlpha(26),\r\n+                        borderRadius: BorderRadius.circular(12),\r\n+                      ),\r\n+                      child: Row(\r\n+                        mainAxisAlignment: MainAxisAlignment.center,\r\n+                        children: [\r\n+                          const Icon(Icons.attach_money,\r\n+                              color: AppColors.success),\r\n+                          Text(\r\n+                            '\\$${request.offeredPrice!.toStringAsFixed(2)}',\r\n+                            style: AppTextStyles.h3.copyWith(\r\n+                              color: AppColors.success,\r\n+                            ),\r\n+                          ),\r\n+                        ],\r\n+                      ),\r\n+                    ),\r\n+                  ),\r\n+                const SizedBox(height: 100),\r\n+              ],\r\n+            ),\r\n+          ),\r\n+        ),\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildRequesterCard(BuildContext context, RequestModel request) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Row(\r\n+          children: [\r\n+            UserAvatar(\r\n+              imageUrl: request.requesterPhoto,\r\n+              name: request.requesterName,\r\n+              size: 60,\r\n+            ),\r\n+            const SizedBox(width: 16),\r\n+            Expanded(\r\n+              child: Column(\r\n+                crossAxisAlignment: CrossAxisAlignment.start,\r\n+                children: [\r\n+                  Text(request.requesterName, style: AppTextStyles.h5),\r\n+                  const SizedBox(height: 4),\r\n+                  RatingStars(\r\n+                    rating: request.requesterRating,\r\n+                    size: 16,\r\n+                    showValue: true,\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+            IconButton(\r\n+              onPressed: () {\r\n+                // View profile\r\n+              },\r\n+              icon: const Icon(Icons.arrow_forward_ios),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildSection({required String title, required Widget child}) {\r\n+    return Column(\r\n+      crossAxisAlignment: CrossAxisAlignment.start,\r\n+      children: [\r\n+        Text(title, style: AppTextStyles.h6),\r\n+        const SizedBox(height: 12),\r\n+        child,\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildRouteCard(RequestModel request) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Column(\r\n+          children: [\r\n+            Row(\r\n+              children: [\r\n+                Expanded(\r\n+                  child: Column(\r\n+                    children: [\r\n+                      const Icon(Icons.location_on, color: AppColors.primary),\r\n+                      const SizedBox(height: 8),\r\n+                      const Text('Pickup', style: AppTextStyles.caption),\r\n+                      const SizedBox(height: 4),\r\n+                      Text(\r\n+                        request.pickupCity,\r\n+                        style: AppTextStyles.bodyLarge\r\n+                            .copyWith(fontWeight: FontWeight.w600),\r\n+                        textAlign: TextAlign.center,\r\n+                      ),\r\n+                      Text(\r\n+                        request.pickupCountry,\r\n+                        style: AppTextStyles.bodySmall\r\n+                            .copyWith(color: AppColors.grey600),\r\n+                      ),\r\n+                    ],\r\n+                  ),\r\n+                ),\r\n+                const Expanded(\r\n+                  child: Column(\r\n+                    children: [\r\n+                      Icon(Icons.arrow_forward,\r\n+                          color: AppColors.grey400, size: 32),\r\n+                    ],\r\n+                  ),\r\n+                ),\r\n+                Expanded(\r\n+                  child: Column(\r\n+                    children: [\r\n+                      const Icon(Icons.flag, color: AppColors.success),\r\n+                      const SizedBox(height: 8),\r\n+                      const Text('Delivery', style: AppTextStyles.caption),\r\n+                      const SizedBox(height: 4),\r\n+                      Text(\r\n+                        request.deliveryCity,\r\n+                        style: AppTextStyles.bodyLarge\r\n+                            .copyWith(fontWeight: FontWeight.w600),\r\n+                        textAlign: TextAlign.center,\r\n+                      ),\r\n+                      Text(\r\n+                        request.deliveryCountry,\r\n+                        style: AppTextStyles.bodySmall\r\n+                            .copyWith(color: AppColors.grey600),\r\n+                      ),\r\n+                    ],\r\n+                  ),\r\n+                ),\r\n+              ],\r\n+            ),\r\n+            if (request.preferredDeliveryDate != null) ...[\r\n+              const Divider(height: 24),\r\n+              Row(\r\n+                mainAxisAlignment: MainAxisAlignment.center,\r\n+                children: [\r\n+                  const Icon(Icons.calendar_today,\r\n+                      size: 16, color: AppColors.grey600),\r\n+                  const SizedBox(width: 8),\r\n+                  Text(\r\n+                    'Preferred by ${DateFormat('MMM dd, yyyy').format(request.preferredDeliveryDate!)}',\r\n+                    style: AppTextStyles.bodyMedium,\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ],\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildItemDetails(RequestModel request) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Column(\r\n+          children: [\r\n+            _buildDetailRow(\r\n+              icon: Icons.category,\r\n+              label: 'Category',\r\n+              value: request.categoryDisplay,\r\n+            ),\r\n+            const Divider(height: 24),\r\n+            _buildDetailRow(\r\n+              icon: Icons.fitness_center,\r\n+              label: 'Weight',\r\n+              value: '${request.weightKg.toStringAsFixed(1)} kg',\r\n+            ),\r\n+            const Divider(height: 24),\r\n+            _buildDetailRow(\r\n+              icon: Icons.access_time,\r\n+              label: 'Posted',\r\n+              value: DateFormat('MMM dd, yyyy').format(request.createdAt),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildRecipientInfo(RequestModel request) {\r\n+    return Card(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(16),\r\n+        child: Column(\r\n+          children: [\r\n+            _buildDetailRow(\r\n+              icon: Icons.person,\r\n+              label: 'Name',\r\n+              value: request.recipientName,\r\n+            ),\r\n+            const Divider(height: 24),\r\n+            _buildDetailRow(\r\n+              icon: Icons.phone,\r\n+              label: 'Phone',\r\n+              value: request.recipientPhone,\r\n+            ),\r\n+            const Divider(height: 24),\r\n+            _buildDetailRow(\r\n+              icon: Icons.location_on,\r\n+              label: 'Address',\r\n+              value: request.deliveryAddress,\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildDetailRow({\r\n+    required IconData icon,\r\n+    required String label,\r\n+    required String value,\r\n+  }) {\r\n+    return Row(\r\n+      children: [\r\n+        Container(\r\n+          padding: const EdgeInsets.all(8),\r\n+          decoration: BoxDecoration(\r\n+            color: AppColors.primary.withAlpha(26),\r\n+            borderRadius: BorderRadius.circular(8),\r\n+          ),\r\n+          child: Icon(icon, color: AppColors.primary, size: 20),\r\n+        ),\r\n+        const SizedBox(width: 12),\r\n+        Expanded(\r\n+          child: Column(\r\n+            crossAxisAlignment: CrossAxisAlignment.start,\r\n+            children: [\r\n+              Text(label, style: AppTextStyles.caption),\r\n+              Text(value, style: AppTextStyles.bodyMedium),\r\n+            ],\r\n+          ),\r\n+        ),\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  IconData _getCategoryIcon(ItemCategory category) {\r\n+    switch (category) {\r\n+      case ItemCategory.documents:\r\n+        return Icons.description;\r\n+      case ItemCategory.electronics:\r\n+        return Icons.devices;\r\n+      case ItemCategory.clothing:\r\n+        return Icons.checkroom;\r\n+      case ItemCategory.food:\r\n+        return Icons.restaurant;\r\n+      case ItemCategory.medicine:\r\n+        return Icons.medical_services;\r\n+      case ItemCategory.gifts:\r\n+        return Icons.card_giftcard;\r\n+      case ItemCategory.other:\r\n+        return Icons.inventory_2;\r\n+    }\r\n+  }\r\n+\r\n+  void _handleMenuAction(\r\n+      BuildContext context, String action, RequestModel request) {\r\n+    switch (action) {\r\n+      case 'edit':\r\n+        // Navigate to edit screen\r\n+        break;\r\n+      case 'cancel':\r\n+        _showCancelDialog(context, request);\r\n+        break;\r\n+    }\r\n+  }\r\n+\r\n+  void _showCancelDialog(BuildContext context, RequestModel request) {\r\n+    showDialog(\r\n+      context: context,\r\n+      builder: (ctx) => AlertDialog(\r\n+        title: const Text('Cancel Request'),\r\n+        content: const Text(\r\n+          'Are you sure you want to cancel this request? This action cannot be undone.',\r\n+        ),\r\n+        actions: [\r\n+          TextButton(\r\n+            onPressed: () => Navigator.pop(ctx),\r\n+            child: const Text('No'),\r\n+          ),\r\n+          ElevatedButton(\r\n+            onPressed: () {\r\n+              Navigator.pop(ctx);\r\n+              context\r\n+                  .read<RequestBloc>()\r\n+                  .add(RequestCancelRequested(request.id));\r\n+            },\r\n+            style: ElevatedButton.styleFrom(\r\n+              backgroundColor: AppColors.error,\r\n+            ),\r\n+            child: const Text('Yes, Cancel'),\r\n+          ),\r\n+        ],\r\n+      ),\r\n+    );\r\n+  }\r\n+}\r\n"
                }
            ],
            "date": 1766327062897,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
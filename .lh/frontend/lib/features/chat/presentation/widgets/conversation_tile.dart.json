{
    "sourceFile": "frontend/lib/features/chat/presentation/widgets/conversation_tile.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1766327121761,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766333862605,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,164 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:intl/intl.dart';\r\n \r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/widgets/user_avatar.dart';\r\n+import '../../../matches/data/models/match_model.dart';\r\n+\r\n+class ConversationTile extends StatelessWidget {\r\n+  final MatchModel match;\r\n+  final String currentUserId;\r\n+  final String? lastMessage;\r\n+  final DateTime? lastMessageTime;\r\n+  final int unreadCount;\r\n+  final VoidCallback onTap;\r\n+\r\n+  const ConversationTile({\r\n+    super.key,\r\n+    required this.match,\r\n+    required this.currentUserId,\r\n+    this.lastMessage,\r\n+    this.lastMessageTime,\r\n+    this.unreadCount = 0,\r\n+    required this.onTap,\r\n+  });\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    final otherName = match.getOtherParticipantName(currentUserId);\r\n+    final otherPhoto = match.getOtherParticipantPhoto(currentUserId);\r\n+    final hasUnread = unreadCount > 0;\r\n+\r\n+    return InkWell(\r\n+      onTap: onTap,\r\n+      child: Container(\r\n+        padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),\r\n+        decoration: BoxDecoration(\r\n+          color: hasUnread ? AppColors.primary.withOpacity(0.05) : null,\r\n+          border: Border(\r\n+            bottom: BorderSide(color: AppColors.grey200),\r\n+          ),\r\n+        ),\r\n+        child: Row(\r\n+          children: [\r\n+            // Avatar with online indicator\r\n+            Stack(\r\n+              children: [\r\n+                UserAvatar(\r\n+                  imageUrl: otherPhoto,\r\n+                  name: otherName,\r\n+                  size: 56,\r\n+                ),\r\n+                // You can add online status here if needed\r\n+              ],\r\n+            ),\r\n+            const SizedBox(width: 12),\r\n+\r\n+            // Content\r\n+            Expanded(\r\n+              child: Column(\r\n+                crossAxisAlignment: CrossAxisAlignment.start,\r\n+                children: [\r\n+                  // Name and time\r\n+                  Row(\r\n+                    children: [\r\n+                      Expanded(\r\n+                        child: Text(\r\n+                          otherName,\r\n+                          style: AppTextStyles.bodyLarge.copyWith(\r\n+                            fontWeight:\r\n+                                hasUnread ? FontWeight.w600 : FontWeight.w500,\r\n+                          ),\r\n+                          maxLines: 1,\r\n+                          overflow: TextOverflow.ellipsis,\r\n+                        ),\r\n+                      ),\r\n+                      if (lastMessageTime != null)\r\n+                        Text(\r\n+                          _formatTime(lastMessageTime!),\r\n+                          style: AppTextStyles.caption.copyWith(\r\n+                            color: hasUnread\r\n+                                ? AppColors.primary\r\n+                                : AppColors.grey500,\r\n+                          ),\r\n+                        ),\r\n+                    ],\r\n+                  ),\r\n+                  const SizedBox(height: 4),\r\n+\r\n+                  // Item title\r\n+                  Text(\r\n+                    match.itemTitle,\r\n+                    style: AppTextStyles.caption.copyWith(\r\n+                      color: AppColors.grey600,\r\n+                    ),\r\n+                    maxLines: 1,\r\n+                    overflow: TextOverflow.ellipsis,\r\n+                  ),\r\n+                  const SizedBox(height: 4),\r\n+\r\n+                  // Last message\r\n+                  Row(\r\n+                    children: [\r\n+                      Expanded(\r\n+                        child: Text(\r\n+                          lastMessage ?? 'Tap to start chatting',\r\n+                          style: AppTextStyles.bodySmall.copyWith(\r\n+                            color: hasUnread\r\n+                                ? AppColors.textPrimaryLight\r\n+                                : AppColors.grey600,\r\n+                            fontWeight:\r\n+                                hasUnread ? FontWeight.w500 : FontWeight.normal,\r\n+                          ),\r\n+                          maxLines: 1,\r\n+                          overflow: TextOverflow.ellipsis,\r\n+                        ),\r\n+                      ),\r\n+                      if (hasUnread)\r\n+                        Container(\r\n+                          margin: const EdgeInsets.only(left: 8),\r\n+                          padding: const EdgeInsets.symmetric(\r\n+                            horizontal: 8,\r\n+                            vertical: 2,\r\n+                          ),\r\n+                          decoration: BoxDecoration(\r\n+                            color: AppColors.primary,\r\n+                            borderRadius: BorderRadius.circular(10),\r\n+                          ),\r\n+                          child: Text(\r\n+                            unreadCount > 99 ? '99+' : '$unreadCount',\r\n+                            style: const TextStyle(\r\n+                              color: Colors.white,\r\n+                              fontSize: 12,\r\n+                              fontWeight: FontWeight.bold,\r\n+                            ),\r\n+                          ),\r\n+                        ),\r\n+                    ],\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  String _formatTime(DateTime dateTime) {\r\n+    final now = DateTime.now();\r\n+    final today = DateTime(now.year, now.month, now.day);\r\n+    final messageDate = DateTime(dateTime.year, dateTime.month, dateTime.day);\r\n+\r\n+    if (messageDate == today) {\r\n+      return DateFormat('HH:mm').format(dateTime);\r\n+    } else if (messageDate == today.subtract(const Duration(days: 1))) {\r\n+      return 'Yesterday';\r\n+    } else if (now.difference(dateTime).inDays < 7) {\r\n+      return DateFormat('EEE').format(dateTime);\r\n+    } else {\r\n+      return DateFormat('dd/MM').format(dateTime);\r\n+    }\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766346747527,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,10 +34,10 @@\n       onTap: onTap,\r\n       child: Container(\r\n         padding: const EdgeInsets.symmetric(horizontal: 16, vertical: 12),\r\n         decoration: BoxDecoration(\r\n-          color: hasUnread ? AppColors.primary.withOpacity(0.05) : null,\r\n-          border: Border(\r\n+          color: hasUnread ? AppColors.primary.withAlpha(13) : null,\r\n+          border: const Border(\r\n             bottom: BorderSide(color: AppColors.grey200),\r\n           ),\r\n         ),\r\n         child: Row(\r\n@@ -160,5 +160,5 @@\n     } else {\r\n       return DateFormat('dd/MM').format(dateTime);\r\n     }\r\n   }\r\n-}\n\\ No newline at end of file\n+}\r\n"
                }
            ],
            "date": 1766327121761,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
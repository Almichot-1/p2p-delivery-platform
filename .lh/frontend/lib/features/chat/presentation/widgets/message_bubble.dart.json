{
    "sourceFile": "frontend/lib/features/chat/presentation/widgets/message_bubble.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1766327121760,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766329202933,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,64 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:cached_network_image/cached_network_image.dart';\r\n+import 'package:intl/intl.dart';\r\n \r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../data/models/message_model.dart';\r\n+\r\n+class MessageBubble extends StatelessWidget {\r\n+  final MessageModel message;\r\n+  final bool isMine;\r\n+\r\n+  const MessageBubble({\r\n+    super.key,\r\n+    required this.message,\r\n+    required this.isMine,\r\n+  });\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    if (message.type == MessageType.system) {\r\n+      return _buildSystemMessage();\r\n+    }\r\n+\r\n+    return Align(\r\n+      alignment: isMine ? Alignment.centerRight : Alignment.centerLeft,\r\n+      child: Container(\r\n+        constraints: BoxConstraints(\r\n+          maxWidth: MediaQuery.of(context).size.width * 0.75,\r\n+        ),\r\n+        margin: const EdgeInsets.symmetric(vertical: 4),\r\n+        child: Column(\r\n+          crossAxisAlignment:\r\n+              isMine ? CrossAxisAlignment.end : CrossAxisAlignment.start,\r\n+          children: [\r\n+            Container(\r\n+              padding: message.type == MessageType.image\r\n+                  ? const EdgeInsets.all(4)\r\n+                  : const EdgeInsets.symmetric(horizontal: 16, vertical: 10),\r\n+              decoration: BoxDecoration(\r\n+                color: isMine ? AppColors.primary : AppColors.grey100,\r\n+                borderRadius: BorderRadius.only(\r\n+                  topLeft: const Radius.circular(16),\r\n+                  topRight: const Radius.circular(16),\r\n+                  bottomLeft: Radius.circular(isMine ? 16 : 4),\r\n+                  bottomRight: Radius.circular(isMine ? 4 : 16),\r\n+                ),\r\n+              ),\r\n+              child: _buildContent(),\r\n+            ),\r\n+            const SizedBox(height: 4),\r\n+            Row(\r\n+              mainAxisSize: MainAxisSize.min,\r\n+              children: [\r\n+                Text(\r\n+                  DateFormat('HH:mm').format(message.createdAt),\r\n+                  style: AppTextStyles.caption.copyWith(\r\n+                    fontSize: 10,\r\n+                  ),\r\n+                ),\r\n+                if (isMine) ...[\r\n+                  const SizedBox(width: 4),\r\n+                  Icon(\r\n+                    message.isRead ? \n\\ No newline at end of file\n"
                },
                {
                    "date": 1766335285957,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -60,5 +60,74 @@\n                 ),\r\n                 if (isMine) ...[\r\n                   const SizedBox(width: 4),\r\n                   Icon(\r\n-                    message.isRead ? \n\\ No newline at end of file\n+                    message.isRead ? Icons.done_all : Icons.done,\r\n+                    size: 14,\r\n+                    color: message.isRead ? AppColors.primary : AppColors.grey400,\r\n+                  ),\r\n+                ],\r\n+              ],\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildContent() {\r\n+    switch (message.type) {\r\n+      case MessageType.text:\r\n+        return Text(\r\n+          message.content,\r\n+          style: AppTextStyles.bodyMedium.copyWith(\r\n+            color: isMine ? AppColors.white : AppColors.textPrimaryLight,\r\n+          ),\r\n+        );\r\n+\r\n+      case MessageType.image:\r\n+        return ClipRRect(\r\n+          borderRadius: BorderRadius.circular(12),\r\n+          child: CachedNetworkImage(\r\n+            imageUrl: message.imageUrl!,\r\n+            width: 200,\r\n+            height: 200,\r\n+            fit: BoxFit.cover,\r\n+            placeholder: (context, url) => Container(\r\n+              width: 200,\r\n+              height: 200,\r\n+              color: AppColors.grey200,\r\n+              child: const Center(child: CircularProgressIndicator()),\r\n+            ),\r\n+            errorWidget: (context, url, error) => Container(\r\n+              width: 200,\r\n+              height: 200,\r\n+              color: AppColors.grey200,\r\n+              child: const Icon(Icons.error),\r\n+            ),\r\n+          ),\r\n+        );\r\n+\r\n+      case MessageType.system:\r\n+        return _buildSystemMessage();\r\n+    }\r\n+  }\r\n+\r\n+  Widget _buildSystemMessage() {\r\n+    return Center(\r\n+      child: Container(\r\n+        margin: const EdgeInsets.symmetric(vertical: 8),\r\n+        padding: const EdgeInsets.symmetric(horizontal: 12, vertical: 6),\r\n+        decoration: BoxDecoration(\r\n+          color: AppColors.grey200,\r\n+          borderRadius: BorderRadius.circular(12),\r\n+        ),\r\n+        child: Text(\r\n+          message.content,\r\n+          style: AppTextStyles.caption.copyWith(\r\n+            fontStyle: FontStyle.italic,\r\n+          ),\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1766327121760,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
{
    "sourceFile": "frontend/lib/features/profile/presentation/screens/edit_profile_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1766327036640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766329452551,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,225 @@\n+import 'dart:io';\r\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n+import 'package:image_picker/image_picker.dart';\r\n \r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/utils/validators.dart';\r\n+import '../../../../core/utils/helpers.dart';\r\n+import '../../../../core/widgets/custom_button.dart';\r\n+import '../../../../core/widgets/custom_text_field.dart';\r\n+import '../../../../core/widgets/user_avatar.dart';\r\n+import '../../../auth/bloc/auth_bloc.dart';\r\n+import '../../../auth/bloc/auth_state.dart';\r\n+import '../../../auth/data/models/user_model.dart';\r\n+\r\n+class EditProfileScreen extends StatefulWidget {\r\n+  const EditProfileScreen({super.key});\r\n+\r\n+  @override\r\n+  State<EditProfileScreen> createState() => _EditProfileScreenState();\r\n+}\r\n+\r\n+class _EditProfileScreenState extends State<EditProfileScreen> {\r\n+  final _formKey = GlobalKey<FormState>();\r\n+  final _nameController = TextEditingController();\r\n+  final _phoneController = TextEditingController();\r\n+  final _bioController = TextEditingController();\r\n+  \r\n+  File? _selectedImage;\r\n+  List<String> _selectedLanguages = [];\r\n+  bool _isLoading = false;\r\n+\r\n+  final List<String> _availableLanguages = [\r\n+    'English',\r\n+    'Amharic',\r\n+    'Oromiffa',\r\n+    'Tigrinya',\r\n+    'Arabic',\r\n+    'French',\r\n+    'German',\r\n+  ];\r\n+\r\n+  @override\r\n+  void initState() {\r\n+    super.initState();\r\n+    _loadUserData();\r\n+  }\r\n+\r\n+  void _loadUserData() {\r\n+    final authState = context.read<AuthBloc>().state;\r\n+    if (authState is AuthAuthenticated) {\r\n+      final user = authState.user;\r\n+      _nameController.text = user.fullName;\r\n+      _phoneController.text = user.phone ?? '';\r\n+      _bioController.text = user.bio ?? '';\r\n+      _selectedLanguages = List.from(user.languages);\r\n+    }\r\n+  }\r\n+\r\n+  @override\r\n+  void dispose() {\r\n+    _nameController.dispose();\r\n+    _phoneController.dispose();\r\n+    _bioController.dispose();\r\n+    super.dispose();\r\n+  }\r\n+\r\n+  Future<void> _pickImage() async {\r\n+    final picker = ImagePicker();\r\n+    final pickedFile = await picker.pickImage(\r\n+      source: ImageSource.gallery,\r\n+      maxWidth: 512,\r\n+      maxHeight: 512,\r\n+      imageQuality: 80,\r\n+    );\r\n+\r\n+    if (pickedFile != null) {\r\n+      setState(() {\r\n+        _selectedImage = File(pickedFile.path);\r\n+      });\r\n+    }\r\n+  }\r\n+\r\n+  void _saveProfile() {\r\n+    if (!_formKey.currentState!.validate()) return;\r\n+\r\n+    // TODO: Implement save profile logic\r\n+    Helpers.showSuccessSnackBar(context, 'Profile updated!');\r\n+    context.pop();\r\n+  }\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocBuilder<AuthBloc, AuthState>(\r\n+      builder: (context, state) {\r\n+        if (state is! AuthAuthenticated) {\r\n+          return const Scaffold(\r\n+            body: Center(child: CircularProgressIndicator()),\r\n+          );\r\n+        }\r\n+\r\n+        final user = state.user;\r\n+\r\n+        return Scaffold(\r\n+          appBar: AppBar(\r\n+            title: const Text('Edit Profile'),\r\n+          ),\r\n+          body: SingleChildScrollView(\r\n+            padding: const EdgeInsets.all(24),\r\n+            child: Form(\r\n+              key: _formKey,\r\n+              child: Column(\r\n+                children: [\r\n+                  // Profile photo\r\n+                  Center(\r\n+                    child: Stack(\r\n+                      children: [\r\n+                        _selectedImage != null\r\n+                            ? CircleAvatar(\r\n+                                radius: 50,\r\n+                                backgroundImage: FileImage(_selectedImage!),\r\n+                              )\r\n+                            : UserAvatar(\r\n+                                imageUrl: user.photoUrl,\r\n+                                name: user.fullName,\r\n+                                size: 100,\r\n+                              ),\r\n+                        Positioned(\r\n+                          right: 0,\r\n+                          bottom: 0,\r\n+                          child: GestureDetector(\r\n+                            onTap: _pickImage,\r\n+                            child: Container(\r\n+                              padding: const EdgeInsets.all(8),\r\n+                              decoration: const BoxDecoration(\r\n+                                color: AppColors.primary,\r\n+                                shape: BoxShape.circle,\r\n+                              ),\r\n+                              child: const Icon(\r\n+                                Icons.camera_alt,\r\n+                                color: Colors.white,\r\n+                                size: 20,\r\n+                              ),\r\n+                            ),\r\n+                          ),\r\n+                        ),\r\n+                      ],\r\n+                    ),\r\n+                  ),\r\n+                  const SizedBox(height: 32),\r\n+\r\n+                  // Name\r\n+                  CustomTextField(\r\n+                    label: 'Full Name',\r\n+                    controller: _nameController,\r\n+                    prefixIcon: Icons.person,\r\n+                    validator: (v) => Validators.required(v, 'Name'),\r\n+                  ),\r\n+                  const SizedBox(height: 20),\r\n+\r\n+                  // Phone\r\n+                  CustomTextField(\r\n+                    label: 'Phone Number',\r\n+                    controller: _phoneController,\r\n+                    prefixIcon: Icons.phone,\r\n+                    keyboardType: TextInputType.phone,\r\n+                  ),\r\n+                  const SizedBox(height: 20),\r\n+\r\n+                  // Bio\r\n+                  CustomTextField(\r\n+                    label: 'Bio',\r\n+                    hint: 'Tell us about yourself',\r\n+                    controller: _bioController,\r\n+                    maxLines: 3,\r\n+                  ),\r\n+                  const SizedBox(height: 20),\r\n+\r\n+                  // Languages\r\n+                  Align(\r\n+                    alignment: Alignment.centerLeft,\r\n+                    child: Text('Languages', style: AppTextStyles.labelLarge),\r\n+                  ),\r\n+                  const SizedBox(height: 8),\r\n+                  Wrap(\r\n+                    spacing: 8,\r\n+                    runSpacing: 8,\r\n+                    children: _availableLanguages.map((lang) {\r\n+                      final isSelected = _selectedLanguages.contains(lang);\r\n+                      return FilterChip(\r\n+                        label: Text(lang),\r\n+                        selected: isSelected,\r\n+                        onSelected: (selected) {\r\n+                          setState(() {\r\n+                            if (selected) {\r\n+                              _selectedLanguages.add(lang);\r\n+                            } else {\r\n+                              _selectedLanguages.remove(lang);\r\n+                            }\r\n+                          });\r\n+                        },\r\n+                        selectedColor: AppColors.primary.withOpacity(0.2),\r\n+                        checkmarkColor: AppColors.primary,\r\n+                      );\r\n+                    }).toList(),\r\n+                  ),\r\n+                  const SizedBox(height: 32),\r\n+\r\n+                  // Save button\r\n+                  CustomButton(\r\n+                    text: 'Save Changes',\r\n+                    onPressed: _saveProfile,\r\n+                    isLoading: _isLoading,\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+          ),\r\n+        );\r\n+      },\r\n+    );\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766346727307,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -12,9 +12,8 @@\n import '../../../../core/widgets/custom_text_field.dart';\r\n import '../../../../core/widgets/user_avatar.dart';\r\n import '../../../auth/bloc/auth_bloc.dart';\r\n import '../../../auth/bloc/auth_state.dart';\r\n-import '../../../auth/data/models/user_model.dart';\r\n \r\n class EditProfileScreen extends StatefulWidget {\r\n   const EditProfileScreen({super.key});\r\n \r\n@@ -26,12 +25,12 @@\n   final _formKey = GlobalKey<FormState>();\r\n   final _nameController = TextEditingController();\r\n   final _phoneController = TextEditingController();\r\n   final _bioController = TextEditingController();\r\n-  \r\n+\r\n   File? _selectedImage;\r\n   List<String> _selectedLanguages = [];\r\n-  bool _isLoading = false;\r\n+  final bool _isLoading = false;\r\n \r\n   final List<String> _availableLanguages = [\r\n     'English',\r\n     'Amharic',\r\n@@ -178,9 +177,9 @@\n                   ),\r\n                   const SizedBox(height: 20),\r\n \r\n                   // Languages\r\n-                  Align(\r\n+                  const Align(\r\n                     alignment: Alignment.centerLeft,\r\n                     child: Text('Languages', style: AppTextStyles.labelLarge),\r\n                   ),\r\n                   const SizedBox(height: 8),\r\n@@ -200,9 +199,9 @@\n                               _selectedLanguages.remove(lang);\r\n                             }\r\n                           });\r\n                         },\r\n-                        selectedColor: AppColors.primary.withOpacity(0.2),\r\n+                        selectedColor: AppColors.primary.withAlpha(51),\r\n                         checkmarkColor: AppColors.primary,\r\n                       );\r\n                     }).toList(),\r\n                   ),\r\n@@ -221,5 +220,5 @@\n         );\r\n       },\r\n     );\r\n   }\r\n-}\n\\ No newline at end of file\n+}\r\n"
                }
            ],
            "date": 1766327036640,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
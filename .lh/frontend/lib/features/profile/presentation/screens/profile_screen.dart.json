{
    "sourceFile": "frontend/lib/features/profile/presentation/screens/profile_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1766327036639,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766329440472,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,215 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n \r\n+import '../../../../core/constants/route_constants.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/widgets/user_avatar.dart';\r\n+import '../../../../core/widgets/rating_stars.dart';\r\n+import '../../../auth/bloc/auth_bloc.dart';\r\n+import '../../../auth/bloc/auth_event.dart';\r\n+import '../../../auth/bloc/auth_state.dart';\r\n+\r\n+class ProfileScreen extends StatelessWidget {\r\n+  const ProfileScreen({super.key});\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocBuilder<AuthBloc, AuthState>(\r\n+      builder: (context, state) {\r\n+        if (state is! AuthAuthenticated) {\r\n+          return const Center(child: CircularProgressIndicator());\r\n+        }\r\n+\r\n+        final user = state.user;\r\n+\r\n+        return Scaffold(\r\n+          appBar: AppBar(\r\n+            title: const Text('Profile'),\r\n+            actions: [\r\n+              IconButton(\r\n+                icon: const Icon(Icons.settings),\r\n+                onPressed: () => context.push(RouteConstants.settings),\r\n+              ),\r\n+            ],\r\n+          ),\r\n+          body: SingleChildScrollView(\r\n+            child: Column(\r\n+              children: [\r\n+                const SizedBox(height: 24),\r\n+\r\n+                // Profile header\r\n+                Center(\r\n+                  child: Column(\r\n+                    children: [\r\n+                      Stack(\r\n+                        children: [\r\n+                          UserAvatar(\r\n+                            imageUrl: user.photoUrl,\r\n+                            name: user.fullName,\r\n+                            size: 100,\r\n+                          ),\r\n+                          if (user.isVerified)\r\n+                            Positioned(\r\n+                              right: 0,\r\n+                              bottom: 0,\r\n+                              child: Container(\r\n+                                padding: const EdgeInsets.all(4),\r\n+                                decoration: const BoxDecoration(\r\n+                                  color: AppColors.success,\r\n+                                  shape: BoxShape.circle,\r\n+                                ),\r\n+                                child: const Icon(\r\n+                                  Icons.check,\r\n+                                  color: Colors.white,\r\n+                                  size: 16,\r\n+                                ),\r\n+                              ),\r\n+                            ),\r\n+                        ],\r\n+                      ),\r\n+                      const SizedBox(height: 16),\r\n+                      Text(user.fullName, style: AppTextStyles.h4),\r\n+                      const SizedBox(height: 4),\r\n+                      Text(\r\n+                        user.email,\r\n+                        style: AppTextStyles.bodyMedium.copyWith(\r\n+                          color: AppColors.grey600,\r\n+                        ),\r\n+                      ),\r\n+                      const SizedBox(height: 8),\r\n+                      RatingStars(\r\n+                        rating: user.rating,\r\n+                        totalReviews: user.totalReviews,\r\n+                      ),\r\n+                    ],\r\n+                  ),\r\n+                ),\r\n+                const SizedBox(height: 32),\r\n+\r\n+                // Stats row\r\n+                Padding(\r\n+                  padding: const EdgeInsets.symmetric(horizontal: 24),\r\n+                  child: Row(\r\n+                    mainAxisAlignment: MainAxisAlignment.spaceEvenly,\r\n+                    children: [\r\n+                      _buildStat('${user.completedDeliveries}', 'Deliveries'),\r\n+                      _buildDivider(),\r\n+                      _buildStat('${user.totalReviews}', 'Reviews'),\r\n+                      _buildDivider(),\r\n+                      _buildStat(user.rating.toStringAsFixed(1), 'Rating'),\r\n+                    ],\r\n+                  ),\r\n+                ),\r\n+                const SizedBox(height: 32),\r\n+\r\n+                // Menu items\r\n+                _buildMenuItem(\r\n+                  icon: Icons.edit,\r\n+                  title: 'Edit Profile',\r\n+                  onTap: () => context.push(RouteConstants.editProfile),\r\n+                ),\r\n+                _buildMenuItem(\r\n+                  icon: Icons.flight,\r\n+                  title: 'My Trips',\r\n+                  onTap: () => context.push(RouteConstants.myTrips),\r\n+                ),\r\n+                _buildMenuItem(\r\n+                  icon: Icons.inventory_2,\r\n+                  title: 'My Requests',\r\n+                  onTap: () => context.push(RouteConstants.myRequests),\r\n+                ),\r\n+                _buildMenuItem(\r\n+                  icon: Icons.star,\r\n+                  title: 'My Reviews',\r\n+                  onTap: () => context.push(\r\n+                    RouteConstants.reviews.replaceFirst(':userId', user.uid),\r\n+                  ),\r\n+                ),\r\n+                _buildMenuItem(\r\n+                  icon: Icons.verified_user,\r\n+                  title: 'Verification',\r\n+                  trailing: user.isVerified\r\n+                      ? const Icon(Icons.check_circle, color: AppColors.success)\r\n+                      : const Icon(Icons.arrow_forward_ios, size: 16),\r\n+                  onTap: () => context.push(RouteConstants.verification),\r\n+                ),\r\n+                const Divider(height: 32),\r\n+                _buildMenuItem(\r\n+                  icon: Icons.logout,\r\n+                  title: 'Logout',\r\n+                  textColor: AppColors.error,\r\n+                  onTap: () => _showLogoutDialog(context),\r\n+                ),\r\n+                const SizedBox(height: 32),\r\n+              ],\r\n+            ),\r\n+          ),\r\n+        );\r\n+      },\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildStat(String value, String label) {\r\n+    return Column(\r\n+      children: [\r\n+        Text(value, style: AppTextStyles.h4),\r\n+        const SizedBox(height: 4),\r\n+        Text(label, style: AppTextStyles.caption),\r\n+      ],\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildDivider() {\r\n+    return Container(\r\n+      height: 40,\r\n+      width: 1,\r\n+      color: AppColors.grey300,\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildMenuItem({\r\n+    required IconData icon,\r\n+    required String title,\r\n+    required VoidCallback onTap,\r\n+    Widget? trailing,\r\n+    Color? textColor,\r\n+  }) {\r\n+    return ListTile(\r\n+      leading: Icon(icon, color: textColor ?? AppColors.grey700),\r\n+      title: Text(\r\n+        title,\r\n+        style: AppTextStyles.bodyLarge.copyWith(color: textColor),\r\n+      ),\r\n+      trailing: trailing ?? const Icon(Icons.arrow_forward_ios, size: 16),\r\n+      onTap: onTap,\r\n+    );\r\n+  }\r\n+\r\n+  void _showLogoutDialog(BuildContext context) {\r\n+    showDialog(\r\n+      context: context,\r\n+      builder: (ctx) => AlertDialog(\r\n+        title: const Text('Logout'),\r\n+        content: const Text('Are you sure you want to logout?'),\r\n+        actions: [\r\n+          TextButton(\r\n+            onPressed: () => Navigator.pop(ctx),\r\n+            child: const Text('Cancel'),\r\n+          ),\r\n+          ElevatedButton(\r\n+            onPressed: () {\r\n+              Navigator.pop(ctx);\r\n+              context.read<AuthBloc>().add(AuthLogoutRequested());\r\n+            },\r\n+            style: ElevatedButton.styleFrom(\r\n+              backgroundColor: AppColors.error,\r\n+            ),\r\n+            child: const Text('Logout'),\r\n+          ),\r\n+        ],\r\n+      ),\r\n+    );\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1766327036639,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
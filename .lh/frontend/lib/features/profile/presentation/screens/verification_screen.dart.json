{
    "sourceFile": "frontend/lib/features/profile/presentation/screens/verification_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1766327036640,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766333684059,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,447 @@\n+import 'dart:io';\r\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:go_router/go_router.dart';\r\n+import 'package:image_picker/image_picker.dart';\r\n \r\n+import '../../../../config/dependency_injection.dart';\r\n+import '../../../../core/theme/app_colors.dart';\r\n+import '../../../../core/theme/app_text_styles.dart';\r\n+import '../../../../core/utils/helpers.dart';\r\n+import '../../../../core/widgets/custom_button.dart';\r\n+import '../../../auth/bloc/auth_bloc.dart';\r\n+import '../../../auth/bloc/auth_state.dart';\r\n+import '../../../auth/data/models/user_model.dart';\r\n+import '../../bloc/profile_bloc.dart';\r\n+import '../../bloc/profile_event.dart';\r\n+import '../../bloc/profile_state.dart';\r\n+\r\n+class VerificationScreen extends StatefulWidget {\r\n+  const VerificationScreen({super.key});\r\n+\r\n+  @override\r\n+  State<VerificationScreen> createState() => _VerificationScreenState();\r\n+}\r\n+\r\n+class _VerificationScreenState extends State<VerificationScreen> {\r\n+  final _imagePicker = ImagePicker();\r\n+  File? _selectedDocument;\r\n+  String _documentType = 'passport';\r\n+\r\n+  final List<Map<String, dynamic>> _documentTypes = [\r\n+    {'value': 'passport', 'label': 'Passport', 'icon': Icons.book},\r\n+    {'value': 'national_id', 'label': 'National ID', 'icon': Icons.badge},\r\n+    {'value': 'drivers_license', 'label': \"Driver's License\", 'icon': Icons.drive_eta},\r\n+  ];\r\n+\r\n+  Future<void> _pickDocument() async {\r\n+    final pickedFile = await _imagePicker.pickImage(\r\n+      source: ImageSource.gallery,\r\n+      maxWidth: 1200,\r\n+      maxHeight: 1200,\r\n+      imageQuality: 85,\r\n+    );\r\n+\r\n+    if (pickedFile != null) {\r\n+      setState(() {\r\n+        _selectedDocument = File(pickedFile.path);\r\n+      });\r\n+    }\r\n+  }\r\n+\r\n+  Future<void> _takePhoto() async {\r\n+    final pickedFile = await _imagePicker.pickImage(\r\n+      source: ImageSource.camera,\r\n+      maxWidth: 1200,\r\n+      maxHeight: 1200,\r\n+      imageQuality: 85,\r\n+    );\r\n+\r\n+    if (pickedFile != null) {\r\n+      setState(() {\r\n+        _selectedDocument = File(pickedFile.path);\r\n+      });\r\n+    }\r\n+  }\r\n+\r\n+  void _submitVerification() {\r\n+    if (_selectedDocument == null) {\r\n+      Helpers.showErrorSnackBar(context, 'Please select a document');\r\n+      return;\r\n+    }\r\n+\r\n+    context.read<ProfileBloc>().add(\r\n+          ProfileVerificationRequested(\r\n+            document: _selectedDocument!,\r\n+            documentType: _documentType,\r\n+          ),\r\n+        );\r\n+  }\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    return BlocProvider(\r\n+      create: (_) => getIt<ProfileBloc>(),\r\n+      child: BlocListener<ProfileBloc, ProfileState>(\r\n+        listener: (context, state) {\r\n+          if (state is ProfileVerificationSubmitted) {\r\n+            Helpers.showSuccessSnackBar(\r\n+              context,\r\n+              'Verification submitted! We will review your document.',\r\n+            );\r\n+            context.pop();\r\n+          } else if (state is ProfileError) {\r\n+            Helpers.showErrorSnackBar(context, state.message);\r\n+          }\r\n+        },\r\n+        child: Scaffold(\r\n+          appBar: AppBar(\r\n+            title: const Text('Verification'),\r\n+          ),\r\n+          body: BlocBuilder<AuthBloc, AuthState>(\r\n+            builder: (context, authState) {\r\n+              if (authState is! AuthAuthenticated) {\r\n+                return const Center(child: CircularProgressIndicator());\r\n+              }\r\n+\r\n+              final user = authState.user;\r\n+\r\n+              if (user.verificationStatus == VerificationStatus.verified) {\r\n+                return _buildVerifiedView();\r\n+              }\r\n+\r\n+              if (user.verificationStatus == VerificationStatus.pending) {\r\n+                return _buildPendingView();\r\n+              }\r\n+\r\n+              return _buildUploadView();\r\n+            },\r\n+          ),\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildVerifiedView() {\r\n+    return Center(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(24),\r\n+        child: Column(\r\n+          mainAxisAlignment: MainAxisAlignment.center,\r\n+          children: [\r\n+            Container(\r\n+              width: 120,\r\n+              height: 120,\r\n+              decoration: BoxDecoration(\r\n+                color: AppColors.success.withOpacity(0.1),\r\n+                shape: BoxShape.circle,\r\n+              ),\r\n+              child: const Icon(\r\n+                Icons.verified,\r\n+                size: 60,\r\n+                color: AppColors.success,\r\n+              ),\r\n+            ),\r\n+            const SizedBox(height: 24),\r\n+            Text(\r\n+              'You\\'re Verified!',\r\n+              style: AppTextStyles.h3,\r\n+            ),\r\n+            const SizedBox(height: 12),\r\n+            Text(\r\n+              'Your identity has been verified. You now have access to all features.',\r\n+              style: AppTextStyles.bodyMedium.copyWith(\r\n+                color: AppColors.grey600,\r\n+              ),\r\n+              textAlign: TextAlign.center,\r\n+            ),\r\n+            const SizedBox(height: 32),\r\n+            CustomButton(\r\n+              text: 'Back to Profile',\r\n+              onPressed: () => context.pop(),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildPendingView() {\r\n+    return Center(\r\n+      child: Padding(\r\n+        padding: const EdgeInsets.all(24),\r\n+        child: Column(\r\n+          mainAxisAlignment: MainAxisAlignment.center,\r\n+          children: [\r\n+            Container(\r\n+              width: 120,\r\n+              height: 120,\r\n+              decoration: BoxDecoration(\r\n+                color: AppColors.warning.withOpacity(0.1),\r\n+                shape: BoxShape.circle,\r\n+              ),\r\n+              child: const Icon(\r\n+                Icons.hourglass_empty,\r\n+                size: 60,\r\n+                color: AppColors.warning,\r\n+              ),\r\n+            ),\r\n+            const SizedBox(height: 24),\r\n+            Text(\r\n+              'Verification Pending',\r\n+              style: AppTextStyles.h3,\r\n+            ),\r\n+            const SizedBox(height: 12),\r\n+            Text(\r\n+              'Your documents are being reviewed. This usually takes 1-2 business days.',\r\n+              style: AppTextStyles.bodyMedium.copyWith(\r\n+                color: AppColors.grey600,\r\n+              ),\r\n+              textAlign: TextAlign.center,\r\n+            ),\r\n+            const SizedBox(height: 32),\r\n+            CustomButton(\r\n+              text: 'Back to Profile',\r\n+              type: ButtonType.outline,\r\n+              onPressed: () => context.pop(),\r\n+            ),\r\n+          ],\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildUploadView() {\r\n+    return SingleChildScrollView(\r\n+      padding: const EdgeInsets.all(24),\r\n+      child: Column(\r\n+        crossAxisAlignment: CrossAxisAlignment.start,\r\n+        children: [\r\n+          // Info card\r\n+          Container(\r\n+            padding: const EdgeInsets.all(16),\r\n+            decoration: BoxDecoration(\r\n+              color: AppColors.info.withOpacity(0.1),\r\n+              borderRadius: BorderRadius.circular(12),\r\n+              border: Border.all(\r\n+                color: AppColors.info.withOpacity(0.3),\r\n+              ),\r\n+            ),\r\n+            child: Row(\r\n+              children: [\r\n+                const Icon(Icons.info, color: AppColors.info),\r\n+                const SizedBox(width: 12),\r\n+                Expanded(\r\n+                  child: Text(\r\n+                    'Verify your identity to build trust with other users and unlock all features.',\r\n+                    style: AppTextStyles.bodySmall.copyWith(\r\n+                      color: AppColors.info,\r\n+                    ),\r\n+                  ),\r\n+                ),\r\n+              ],\r\n+            ),\r\n+          ),\r\n+          const SizedBox(height: 24),\r\n+\r\n+          // Document type selection\r\n+          Text('Select Document Type', style: AppTextStyles.h6),\r\n+          const SizedBox(height: 12),\r\n+          ...List.generate(_documentTypes.length, (index) {\r\n+            final type = _documentTypes[index];\r\n+            final isSelected = _documentType == type['value'];\r\n+            return GestureDetector(\r\n+              onTap: () {\r\n+                setState(() {\r\n+                  _documentType = type['value'];\r\n+                });\r\n+              },\r\n+              child: Container(\r\n+                margin: const EdgeInsets.only(bottom: 12),\r\n+                padding: const EdgeInsets.all(16),\r\n+                decoration: BoxDecoration(\r\n+                  color: isSelected\r\n+                      ? AppColors.primary.withOpacity(0.1)\r\n+                      : AppColors.grey100,\r\n+                  borderRadius: BorderRadius.circular(12),\r\n+                  border: Border.all(\r\n+                    color: isSelected ? AppColors.primary : AppColors.grey300,\r\n+                    width: isSelected ? 2 : 1,\r\n+                  ),\r\n+                ),\r\n+                child: Row(\r\n+                  children: [\r\n+                    Icon(\r\n+                      type['icon'] as IconData,\r\n+                      color: isSelected ? AppColors.primary : AppColors.grey600,\r\n+                    ),\r\n+                    const SizedBox(width: 12),\r\n+                    Text(\r\n+                      type['label'] as String,\r\n+                      style: AppTextStyles.bodyLarge.copyWith(\r\n+                        fontWeight:\r\n+                            isSelected ? FontWeight.w600 : FontWeight.normal,\r\n+                        color: isSelected\r\n+                            ? AppColors.primary\r\n+                            : AppColors.textPrimaryLight,\r\n+                      ),\r\n+                    ),\r\n+                    const Spacer(),\r\n+                    if (isSelected)\r\n+                      const Icon(\r\n+                        Icons.check_circle,\r\n+                        color: AppColors.primary,\r\n+                      ),\r\n+                  ],\r\n+                ),\r\n+              ),\r\n+            );\r\n+          }),\r\n+          const SizedBox(height: 24),\r\n+\r\n+          // Document upload\r\n+          Text('Upload Document', style: AppTextStyles.h6),\r\n+          const SizedBox(height: 12),\r\n+          \r\n+          if (_selectedDocument != null)\r\n+            Stack(\r\n+              children: [\r\n+                ClipRRect(\r\n+                  borderRadius: BorderRadius.circular(12),\r\n+                  child: Image.file(\r\n+                    _selectedDocument!,\r\n+                    width: double.infinity,\r\n+                    height: 200,\r\n+                    fit: BoxFit.cover,\r\n+                  ),\r\n+                ),\r\n+                Positioned(\r\n+                  top: 8,\r\n+                  right: 8,\r\n+                  child: GestureDetector(\r\n+                    onTap: () {\r\n+                      setState(() {\r\n+                        _selectedDocument = null;\r\n+                      });\r\n+                    },\r\n+                    child: Container(\r\n+                      padding: const EdgeInsets.all(4),\r\n+                      decoration: const BoxDecoration(\r\n+                        color: AppColors.error,\r\n+                        shape: BoxShape.circle,\r\n+                      ),\r\n+                      child: const Icon(\r\n+                        Icons.close,\r\n+                        color: Colors.white,\r\n+                        size: 20,\r\n+                      ),\r\n+                    ),\r\n+                  ),\r\n+                ),\r\n+              ],\r\n+            )\r\n+          else\r\n+            Container(\r\n+              width: double.infinity,\r\n+              height: 200,\r\n+              decoration: BoxDecoration(\r\n+                color: AppColors.grey100,\r\n+                borderRadius: BorderRadius.circular(12),\r\n+                border: Border.all(\r\n+                  color: AppColors.grey300,\r\n+                  style: BorderStyle.solid,\r\n+                ),\r\n+              ),\r\n+              child: Column(\r\n+                mainAxisAlignment: MainAxisAlignment.center,\r\n+                children: [\r\n+                  Icon(\r\n+                    Icons.cloud_upload_outlined,\r\n+                    size: 48,\r\n+                    color: AppColors.grey400,\r\n+                  ),\r\n+                  const SizedBox(height: 12),\r\n+                  Text(\r\n+                    'Upload your document',\r\n+                    style: AppTextStyles.bodyMedium.copyWith(\r\n+                      color: AppColors.grey600,\r\n+                    ),\r\n+                  ),\r\n+                  const SizedBox(height: 16),\r\n+                  Row(\r\n+                    mainAxisAlignment: MainAxisAlignment.center,\r\n+                    children: [\r\n+                      OutlinedButton.icon(\r\n+                        onPressed: _pickDocument,\r\n+                        icon: const Icon(Icons.photo_library),\r\n+                        label: const Text('Gallery'),\r\n+                      ),\r\n+                      const SizedBox(width: 12),\r\n+                      OutlinedButton.icon(\r\n+                        onPressed: _takePhoto,\r\n+                        icon: const Icon(Icons.camera_alt),\r\n+                        label: const Text('Camera'),\r\n+                      ),\r\n+                    ],\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+          const SizedBox(height: 24),\r\n+\r\n+          // Guidelines\r\n+          Text('Guidelines', style: AppTextStyles.h6),\r\n+          const SizedBox(height: 12),\r\n+          _buildGuideline(\r\n+            icon: Icons.image,\r\n+            text: 'Upload a clear, high-quality image',\r\n+          ),\r\n+          _buildGuideline(\r\n+            icon: Icons.crop_free,\r\n+            text: 'Ensure all corners of the document are visible',\r\n+          ),\r\n+          _buildGuideline(\r\n+            icon: Icons.lightbulb,\r\n+            text: 'Good lighting, no glare or shadows',\r\n+          ),\r\n+          _buildGuideline(\r\n+            icon: Icons.security,\r\n+            text: 'Your document is encrypted and secure',\r\n+          ),\r\n+          const SizedBox(height: 32),\r\n+\r\n+          // Submit button\r\n+          BlocBuilder<ProfileBloc, ProfileState>(\r\n+            builder: (context, state) {\r\n+              return CustomButton(\r\n+                text: 'Submit for Verification',\r\n+                onPressed: _selectedDocument != null ? _submitVerification : null,\r\n+                isLoading: state is ProfileLoading,\r\n+              );\r\n+            },\r\n+          ),\r\n+        ],\r\n+      ),\r\n+    );\r\n+  }\r\n+\r\n+  Widget _buildGuideline({required IconData icon, required String text}) {\r\n+    return Padding(\r\n+      padding: const EdgeInsets.only(bottom: 8),\r\n+      child: Row(\r\n+        children: [\r\n+          Icon(icon, size: 20, color: AppColors.grey600),\r\n+          const SizedBox(width: 12),\r\n+          Expanded(\r\n+            child: Text(\r\n+              text,\r\n+              style: AppTextStyles.bodySmall.copyWith(\r\n+                color: AppColors.grey600,\r\n+              ),\r\n+            ),\r\n+          ),\r\n+        ],\r\n+      ),\r\n+    );\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                },
                {
                    "date": 1766346727310,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -30,9 +30,13 @@\n \r\n   final List<Map<String, dynamic>> _documentTypes = [\r\n     {'value': 'passport', 'label': 'Passport', 'icon': Icons.book},\r\n     {'value': 'national_id', 'label': 'National ID', 'icon': Icons.badge},\r\n-    {'value': 'drivers_license', 'label': \"Driver's License\", 'icon': Icons.drive_eta},\r\n+    {\r\n+      'value': 'drivers_license',\r\n+      'label': \"Driver's License\",\r\n+      'icon': Icons.drive_eta\r\n+    },\r\n   ];\r\n \r\n   Future<void> _pickDocument() async {\r\n     final pickedFile = await _imagePicker.pickImage(\r\n@@ -132,9 +136,9 @@\n             Container(\r\n               width: 120,\r\n               height: 120,\r\n               decoration: BoxDecoration(\r\n-                color: AppColors.success.withOpacity(0.1),\r\n+                color: AppColors.success.withAlpha(26),\r\n                 shape: BoxShape.circle,\r\n               ),\r\n               child: const Icon(\r\n                 Icons.verified,\r\n@@ -142,9 +146,9 @@\n                 color: AppColors.success,\r\n               ),\r\n             ),\r\n             const SizedBox(height: 24),\r\n-            Text(\r\n+            const Text(\r\n               'You\\'re Verified!',\r\n               style: AppTextStyles.h3,\r\n             ),\r\n             const SizedBox(height: 12),\r\n@@ -176,9 +180,9 @@\n             Container(\r\n               width: 120,\r\n               height: 120,\r\n               decoration: BoxDecoration(\r\n-                color: AppColors.warning.withOpacity(0.1),\r\n+                color: AppColors.warning.withAlpha(26),\r\n                 shape: BoxShape.circle,\r\n               ),\r\n               child: const Icon(\r\n                 Icons.hourglass_empty,\r\n@@ -186,9 +190,9 @@\n                 color: AppColors.warning,\r\n               ),\r\n             ),\r\n             const SizedBox(height: 24),\r\n-            Text(\r\n+            const Text(\r\n               'Verification Pending',\r\n               style: AppTextStyles.h3,\r\n             ),\r\n             const SizedBox(height: 12),\r\n@@ -220,12 +224,12 @@\n           // Info card\r\n           Container(\r\n             padding: const EdgeInsets.all(16),\r\n             decoration: BoxDecoration(\r\n-              color: AppColors.info.withOpacity(0.1),\r\n+              color: AppColors.info.withAlpha(26),\r\n               borderRadius: BorderRadius.circular(12),\r\n               border: Border.all(\r\n-                color: AppColors.info.withOpacity(0.3),\r\n+                color: AppColors.info.withAlpha(77),\r\n               ),\r\n             ),\r\n             child: Row(\r\n               children: [\r\n@@ -244,9 +248,9 @@\n           ),\r\n           const SizedBox(height: 24),\r\n \r\n           // Document type selection\r\n-          Text('Select Document Type', style: AppTextStyles.h6),\r\n+          const Text('Select Document Type', style: AppTextStyles.h6),\r\n           const SizedBox(height: 12),\r\n           ...List.generate(_documentTypes.length, (index) {\r\n             final type = _documentTypes[index];\r\n             final isSelected = _documentType == type['value'];\r\n@@ -260,9 +264,9 @@\n                 margin: const EdgeInsets.only(bottom: 12),\r\n                 padding: const EdgeInsets.all(16),\r\n                 decoration: BoxDecoration(\r\n                   color: isSelected\r\n-                      ? AppColors.primary.withOpacity(0.1)\r\n+                      ? AppColors.primary.withAlpha(26)\r\n                       : AppColors.grey100,\r\n                   borderRadius: BorderRadius.circular(12),\r\n                   border: Border.all(\r\n                     color: isSelected ? AppColors.primary : AppColors.grey300,\r\n@@ -299,11 +303,11 @@\n           }),\r\n           const SizedBox(height: 24),\r\n \r\n           // Document upload\r\n-          Text('Upload Document', style: AppTextStyles.h6),\r\n+          const Text('Upload Document', style: AppTextStyles.h6),\r\n           const SizedBox(height: 12),\r\n-          \r\n+\r\n           if (_selectedDocument != null)\r\n             Stack(\r\n               children: [\r\n                 ClipRRect(\r\n@@ -354,9 +358,9 @@\n               ),\r\n               child: Column(\r\n                 mainAxisAlignment: MainAxisAlignment.center,\r\n                 children: [\r\n-                  Icon(\r\n+                  const Icon(\r\n                     Icons.cloud_upload_outlined,\r\n                     size: 48,\r\n                     color: AppColors.grey400,\r\n                   ),\r\n@@ -389,9 +393,9 @@\n             ),\r\n           const SizedBox(height: 24),\r\n \r\n           // Guidelines\r\n-          Text('Guidelines', style: AppTextStyles.h6),\r\n+          const Text('Guidelines', style: AppTextStyles.h6),\r\n           const SizedBox(height: 12),\r\n           _buildGuideline(\r\n             icon: Icons.image,\r\n             text: 'Upload a clear, high-quality image',\r\n@@ -414,9 +418,10 @@\n           BlocBuilder<ProfileBloc, ProfileState>(\r\n             builder: (context, state) {\r\n               return CustomButton(\r\n                 text: 'Submit for Verification',\r\n-                onPressed: _selectedDocument != null ? _submitVerification : null,\r\n+                onPressed:\r\n+                    _selectedDocument != null ? _submitVerification : null,\r\n                 isLoading: state is ProfileLoading,\r\n               );\r\n             },\r\n           ),\r\n@@ -443,5 +448,5 @@\n         ],\r\n       ),\r\n     );\r\n   }\r\n-}\n\\ No newline at end of file\n+}\r\n"
                }
            ],
            "date": 1766327036640,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
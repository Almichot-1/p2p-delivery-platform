{
    "sourceFile": "frontend/lib/core/services/firebase_service.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1766327024546,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766335024514,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,24 @@\n+import 'package:cloud_firestore/cloud_firestore.dart';\r\n+import 'package:firebase_auth/firebase_auth.dart';\r\n+import 'package:firebase_storage/firebase_storage.dart';\r\n \r\n+class FirebaseService {\r\n+  final FirebaseAuth auth = FirebaseAuth.instance;\r\n+  final FirebaseFirestore firestore = FirebaseFirestore.instance;\r\n+  final FirebaseStorage storage = FirebaseStorage.instance;\r\n+\r\n+  // Auth methods\r\n+  User? get currentUser => auth.currentUser;\r\n+  Stream<User?> get authStateChanges => auth.authStateChanges();\r\n+\r\n+  // Firestore methods\r\n+  CollectionReference get usersCollection => firestore.collection('users');\r\n+  CollectionReference get tripsCollection => firestore.collection('trips');\r\n+  CollectionReference get requestsCollection => firestore.collection('requests');\r\n+  CollectionReference get chatsCollection => firestore.collection('chats');\r\n+  CollectionReference get notificationsCollection => firestore.collection('notifications');\r\n+  CollectionReference get reviewsCollection => firestore.collection('reviews');\r\n+\r\n+  // Storage methods\r\n+  Reference get storageRef => storage.ref();\r\n+}\r\n"
                },
                {
                    "date": 1766335450699,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -2,23 +2,52 @@\n import 'package:firebase_auth/firebase_auth.dart';\r\n import 'package:firebase_storage/firebase_storage.dart';\r\n \r\n class FirebaseService {\r\n-  final FirebaseAuth auth = FirebaseAuth.instance;\r\n-  final FirebaseFirestore firestore = FirebaseFirestore.instance;\r\n-  final FirebaseStorage storage = FirebaseStorage.instance;\r\n+  final FirebaseAuth _auth = FirebaseAuth.instance;\r\n+  final FirebaseFirestore _firestore = FirebaseFirestore.instance;\r\n+  final FirebaseStorage _storage = FirebaseStorage.instance;\r\n \r\n-  // Auth methods\r\n-  User? get currentUser => auth.currentUser;\r\n-  Stream<User?> get authStateChanges => auth.authStateChanges();\r\n+  // Auth\r\n+  User? get currentUser => _auth.currentUser;\r\n+  String? get currentUserId => _auth.currentUser?.uid;\r\n+  Stream<User?> get authStateChanges => _auth.authStateChanges();\r\n \r\n-  // Firestore methods\r\n-  CollectionReference get usersCollection => firestore.collection('users');\r\n-  CollectionReference get tripsCollection => firestore.collection('trips');\r\n-  CollectionReference get requestsCollection => firestore.collection('requests');\r\n-  CollectionReference get chatsCollection => firestore.collection('chats');\r\n-  CollectionReference get notificationsCollection => firestore.collection('notifications');\r\n-  CollectionReference get reviewsCollection => firestore.collection('reviews');\r\n+  Future<UserCredential> signInWithEmailAndPassword(\r\n+      String email, String password) {\r\n+    return _auth.signInWithEmailAndPassword(email: email, password: password);\r\n+  }\r\n \r\n-  // Storage methods\r\n-  Reference get storageRef => storage.ref();\r\n+  Future<UserCredential> createUserWithEmailAndPassword(\r\n+      String email, String password) {\r\n+    return _auth.createUserWithEmailAndPassword(email: email, password: password);\r\n+  }\r\n+\r\n+  Future<void> signOut() {\r\n+    return _auth.signOut();\r\n+  }\r\n+\r\n+  // Firestore Collections\r\n+  CollectionReference get usersCollection => _firestore.collection('users');\r\n+  CollectionReference get tripsCollection => _firestore.collection('trips');\r\n+  CollectionReference get requestsCollection => _firestore.collection('requests');\r\n+  CollectionReference get matchesCollection => _firestore.collection('matches');\r\n+  CollectionReference get chatsCollection => _firestore.collection('chats');\r\n+  CollectionReference get reviewsCollection => _firestore.collection('reviews');\r\n+  CollectionReference get notificationsCollection => _firestore.collection('notifications');\r\n+\r\n+  // Storage References\r\n+  Reference get storageRoot => _storage.ref();\r\n+  Reference get profileImagesRef => _storage.ref().child('profile_images');\r\n+  Reference get tripImagesRef => _storage.ref().child('trip_images');\r\n+  Reference get chatImagesRef => _storage.ref().child('chat_images');\r\n+  Reference get idDocumentsRef => _storage.ref().child('id_documents');\r\n+\r\n+  // Helper methods\r\n+  String getTimestamp() {\r\n+    return DateTime.now().toIso8601String();\r\n+  }\r\n+  \r\n+  DocumentReference getUserRef(String userId) {\r\n+    return usersCollection.doc(userId);\r\n+  }\r\n }\r\n"
                },
                {
                    "date": 1766335588390,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -10,8 +10,9 @@\n   // Auth\r\n   User? get currentUser => _auth.currentUser;\r\n   String? get currentUserId => _auth.currentUser?.uid;\r\n   Stream<User?> get authStateChanges => _auth.authStateChanges();\r\n+  FirebaseAuth get auth => _auth;\r\n \r\n   Future<UserCredential> signInWithEmailAndPassword(\r\n       String email, String password) {\r\n     return _auth.signInWithEmailAndPassword(email: email, password: password);\r\n@@ -26,8 +27,9 @@\n     return _auth.signOut();\r\n   }\r\n \r\n   // Firestore Collections\r\n+  FirebaseFirestore get firestore => _firestore;\r\n   CollectionReference get usersCollection => _firestore.collection('users');\r\n   CollectionReference get tripsCollection => _firestore.collection('trips');\r\n   CollectionReference get requestsCollection => _firestore.collection('requests');\r\n   CollectionReference get matchesCollection => _firestore.collection('matches');\r\n@@ -35,13 +37,16 @@\n   CollectionReference get reviewsCollection => _firestore.collection('reviews');\r\n   CollectionReference get notificationsCollection => _firestore.collection('notifications');\r\n \r\n   // Storage References\r\n+  FirebaseStorage get storage => _storage;\r\n   Reference get storageRoot => _storage.ref();\r\n   Reference get profileImagesRef => _storage.ref().child('profile_images');\r\n   Reference get tripImagesRef => _storage.ref().child('trip_images');\r\n   Reference get chatImagesRef => _storage.ref().child('chat_images');\r\n   Reference get idDocumentsRef => _storage.ref().child('id_documents');\r\n+  Reference get verificationDocsRef => _storage.ref().child('verification_docs');\r\n+  Reference get itemImagesRef => _storage.ref().child('item_images');\r\n \r\n   // Helper methods\r\n   String getTimestamp() {\r\n     return DateTime.now().toIso8601String();\r\n"
                }
            ],
            "date": 1766327024546,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
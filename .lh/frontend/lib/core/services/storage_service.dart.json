{
    "sourceFile": "frontend/lib/core/services/storage_service.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1766327024548,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1766327360930,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,1 +1,73 @@\n+import 'dart:io';\r\n+import 'package:firebase_storage/firebase_storage.dart';\r\n+import 'package:path/path.dart' as path;\r\n+import 'package:uuid/uuid.dart';\r\n+import 'firebase_service.dart';\r\n \r\n+class StorageService {\r\n+  final FirebaseService _firebaseService;\r\n+\r\n+  StorageService(this._firebaseService);\r\n+\r\n+  Future<String> uploadProfileImage(File file) async {\r\n+    final userId = _firebaseService.currentUserId;\r\n+    if (userId == null) throw Exception('User not authenticated');\r\n+\r\n+    final ext = path.extension(file.path);\r\n+    final ref = _firebaseService.profileImagesRef.child('$userId$ext');\r\n+\r\n+    await ref.putFile(file);\r\n+    return await ref.getDownloadURL();\r\n+  }\r\n+\r\n+  Future<String> uploadVerificationDoc(File file) async {\r\n+    final userId = _firebaseService.currentUserId;\r\n+    if (userId == null) throw Exception('User not authenticated');\r\n+\r\n+    final uuid = const Uuid().v4();\r\n+    final ext = path.extension(file.path);\r\n+    final ref = _firebaseService.verificationDocsRef.child('$userId/$uuid$ext');\r\n+\r\n+    await ref.putFile(file);\r\n+    return await ref.getDownloadURL();\r\n+  }\r\n+\r\n+  Future<String> uploadItemImage(File file, String requestId) async {\r\n+    final uuid = const Uuid().v4();\r\n+    final ext = path.extension(file.path);\r\n+    final ref = _firebaseService.itemImagesRef.child('$requestId/$uuid$ext');\r\n+\r\n+    await ref.putFile(file);\r\n+    return await ref.getDownloadURL();\r\n+  }\r\n+\r\n+  Future<List<String>> uploadMultipleImages(\r\n+    List<File> files,\r\n+    String requestId,\r\n+  ) async {\r\n+    final urls = <String>[];\r\n+    for (final file in files) {\r\n+      final url = await uploadItemImage(file, requestId);\r\n+      urls.add(url);\r\n+    }\r\n+    return urls;\r\n+  }\r\n+\r\n+  Future<String> uploadChatImage(File file, String matchId) async {\r\n+    final uuid = const Uuid().v4();\r\n+    final ext = path.extension(file.path);\r\n+    final ref = _firebaseService.chatImagesRef.child('$matchId/$uuid$ext');\r\n+\r\n+    await ref.putFile(file);\r\n+    return await ref.getDownloadURL();\r\n+  }\r\n+\r\n+  Future<void> deleteFile(String url) async {\r\n+    try {\r\n+      final ref = _firebaseService.storage.refFromURL(url);\r\n+      await ref.delete();\r\n+    } catch (e) {\r\n+      // File might not exist\r\n+    }\r\n+  }\r\n+}\n\\ No newline at end of file\n"
                }
            ],
            "date": 1766327024548,
            "name": "Commit-0",
            "content": "\r\n"
        }
    ]
}
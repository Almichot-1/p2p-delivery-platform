{
    "sourceFile": "lib/features/trips/presentation/widgets/trip_card.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1768061206336,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1768061206336,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\nimport 'package:intl/intl.dart';\r\n\r\nimport '../../../../core/widgets/cached_image.dart';\r\nimport '../../data/models/trip_model.dart';\r\n\r\nclass TripCard extends StatelessWidget {\r\n  const TripCard({\r\n    super.key,\r\n    required this.trip,\r\n    this.onTap,\r\n    this.action,\r\n  });\r\n\r\n  final TripModel trip;\r\n  final VoidCallback? onTap;\r\n  final Widget? action;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final theme = Theme.of(context);\r\n    final scheme = theme.colorScheme;\r\n\r\n    final dateFmt = DateFormat('EEE, MMM d');\r\n\r\n    final statusChip = _StatusChip(status: trip.status);\r\n\r\n    final chips = trip.acceptedItemTypes.take(3).toList(growable: false);\r\n\r\n    return Card(\r\n      clipBehavior: Clip.antiAlias,\r\n      child: InkWell(\r\n        onTap: onTap,\r\n        child: Padding(\r\n          padding: const EdgeInsets.all(14),\r\n          child: Column(\r\n            crossAxisAlignment: CrossAxisAlignment.start,\r\n            children: [\r\n              Row(\r\n                children: [\r\n                  ProfileImage(\r\n                    displayName: trip.travelerName,\r\n                    imageUrl: trip.travelerPhoto,\r\n                    size: 42,\r\n                  ),\r\n                  const SizedBox(width: 10),\r\n                  Expanded(\r\n                    child: Column(\r\n                      crossAxisAlignment: CrossAxisAlignment.start,\r\n                      children: [\r\n                        Text(\r\n                          trip.travelerName,\r\n                          style: theme.textTheme.titleMedium,\r\n                          maxLines: 1,\r\n                          overflow: TextOverflow.ellipsis,\r\n                        ),\r\n                        const SizedBox(height: 2),\r\n                        Row(\r\n                          children: [\r\n                            const Icon(Icons.star, size: 16),\r\n                            const SizedBox(width: 4),\r\n                            Text(\r\n                              trip.travelerRating.toStringAsFixed(1),\r\n                              style: theme.textTheme.bodySmall,\r\n                            ),\r\n                          ],\r\n                        ),\r\n                      ],\r\n                    ),\r\n                  ),\r\n                  statusChip,\r\n                ],\r\n              ),\r\n              const SizedBox(height: 10),\r\n              Row(\r\n                crossAxisAlignment: CrossAxisAlignment.start,\r\n                children: [\r\n                  Icon(Icons.flight_takeoff, color: scheme.primary),\r\n                  const SizedBox(width: 8),\r\n                  Expanded(\r\n                    child: Row(\r\n                      children: [\r\n                        Expanded(\r\n                          child: _LocationStack(\r\n                            country: trip.originCountry,\r\n                            city: trip.originCity,\r\n                          ),\r\n                        ),\r\n                        Padding(\r\n                          padding: const EdgeInsets.symmetric(horizontal: 10),\r\n                          child: Icon(\r\n                            Icons.arrow_forward,\r\n                            size: 18,\r\n                            color: scheme.onSurfaceVariant,\r\n                          ),\r\n                        ),\r\n                        Expanded(\r\n                          child: _LocationStack(\r\n                            country: trip.destinationCountry,\r\n                            city: trip.destinationCity,\r\n                          ),\r\n                        ),\r\n                      ],\r\n                    ),\r\n                  ),\r\n                ],\r\n              ),\r\n              const SizedBox(height: 10),\r\n              Wrap(\r\n                spacing: 12,\r\n                runSpacing: 6,\r\n                children: [\r\n                  _InfoPill(\r\n                    icon: Icons.calendar_today_outlined,\r\n                    text: dateFmt.format(trip.departureDate),\r\n                  ),\r\n                  _InfoPill(\r\n                    icon: Icons.scale_outlined,\r\n                    text: '${trip.availableCapacityKg.toStringAsFixed(1)} kg',\r\n                  ),\r\n                  if (trip.pricePerKg != null)\r\n                    _InfoPill(\r\n                      icon: Icons.payments_outlined,\r\n                      text: '${trip.pricePerKg!.toStringAsFixed(2)}/kg',\r\n                    ),\r\n                ],\r\n              ),\r\n              if (chips.isNotEmpty) ...[\r\n                const SizedBox(height: 10),\r\n                Wrap(\r\n                  spacing: 8,\r\n                  runSpacing: 6,\r\n                  children: [\r\n                    for (final t in chips)\r\n                      InputChip(\r\n                        label: Text(t),\r\n                        onPressed: null,\r\n                      ),\r\n                  ],\r\n                ),\r\n              ],\r\n              if (action != null) ...[\r\n                const SizedBox(height: 12),\r\n                Align(\r\n                  alignment: Alignment.centerRight,\r\n                  child: action!,\r\n                ),\r\n              ],\r\n            ],\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass _InfoPill extends StatelessWidget {\r\n  const _InfoPill({required this.icon, required this.text});\r\n\r\n  final IconData icon;\r\n  final String text;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final theme = Theme.of(context);\r\n    final scheme = theme.colorScheme;\r\n\r\n    return Container(\r\n      padding: const EdgeInsets.symmetric(horizontal: 10, vertical: 6),\r\n      decoration: BoxDecoration(\r\n        color: scheme.surfaceContainerHighest,\r\n        borderRadius: BorderRadius.circular(999),\r\n      ),\r\n      child: Row(\r\n        mainAxisSize: MainAxisSize.min,\r\n        children: [\r\n          Icon(icon, size: 16, color: scheme.onSurfaceVariant),\r\n          const SizedBox(width: 6),\r\n          Text(text, style: theme.textTheme.bodySmall),\r\n        ],\r\n      ),\r\n    );\r\n  }\r\n}\r\n\r\nclass _LocationStack extends StatelessWidget {\r\n  const _LocationStack({required this.country, required this.city});\r\n\r\n  final String country;\r\n  final String city;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final theme = Theme.of(context);\r\n    final scheme = theme.colorScheme;\r\n\r\n    final countryText = country.trim().isEmpty ? '—' : country.trim();\r\n    final cityText = city.trim().isEmpty ? '—' : city.trim();\r\n\r\n    return Column(\r\n      crossAxisAlignment: CrossAxisAlignment.start,\r\n      children: [\r\n        Text(\r\n          countryText,\r\n          style: theme.textTheme.titleSmall,\r\n          maxLines: 1,\r\n          overflow: TextOverflow.ellipsis,\r\n        ),\r\n        const SizedBox(height: 2),\r\n        Text(\r\n          cityText,\r\n          style: theme.textTheme.bodySmall?.copyWith(color: scheme.onSurfaceVariant),\r\n          maxLines: 1,\r\n          overflow: TextOverflow.ellipsis,\r\n        ),\r\n      ],\r\n    );\r\n  }\r\n}\r\n\r\nclass _StatusChip extends StatelessWidget {\r\n  const _StatusChip({required this.status});\r\n\r\n  final TripStatus status;\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final scheme = Theme.of(context).colorScheme;\r\n\r\n    String label;\r\n    switch (status) {\r\n      case TripStatus.active:\r\n        label = 'Active';\r\n      case TripStatus.completed:\r\n        label = 'Completed';\r\n      case TripStatus.cancelled:\r\n        label = 'Cancelled';\r\n    }\r\n\r\n    final bg = switch (status) {\r\n      TripStatus.active => scheme.primaryContainer,\r\n      TripStatus.completed => scheme.secondaryContainer,\r\n      TripStatus.cancelled => scheme.errorContainer,\r\n    };\r\n\r\n    final fg = switch (status) {\r\n      TripStatus.active => scheme.onPrimaryContainer,\r\n      TripStatus.completed => scheme.onSecondaryContainer,\r\n      TripStatus.cancelled => scheme.onErrorContainer,\r\n    };\r\n\r\n    return Container(\r\n      padding: const EdgeInsets.symmetric(horizontal: 10, vertical: 6),\r\n      decoration: BoxDecoration(\r\n        color: bg,\r\n        borderRadius: BorderRadius.circular(999),\r\n      ),\r\n      child: Text(\r\n        label,\r\n        style: Theme.of(context).textTheme.labelSmall?.copyWith(color: fg),\r\n      ),\r\n    );\r\n  }\r\n}\r\n"
        }
    ]
}
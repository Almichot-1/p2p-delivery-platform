{
    "sourceFile": "lib/features/trips/presentation/widgets/trip_filter.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1768064749876,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1768064749876,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\n\r\nclass TripFilters {\r\n  const TripFilters({\r\n    this.destinationCountry,\r\n    this.afterDate,\r\n    this.includePast = false,\r\n  });\r\n\r\n  final String? destinationCountry;\r\n  final DateTime? afterDate;\r\n  final bool includePast;\r\n\r\n  bool get isEmpty =>\r\n      (destinationCountry == null || destinationCountry!.trim().isEmpty) &&\r\n      afterDate == null &&\r\n      includePast == false;\r\n}\r\n\r\nclass TripFilterSheet extends StatefulWidget {\r\n  const TripFilterSheet({\r\n    super.key,\r\n    required this.initial,\r\n    required this.onApply,\r\n  });\r\n\r\n  final TripFilters initial;\r\n  final ValueChanged<TripFilters> onApply;\r\n\r\n  @override\r\n  State<TripFilterSheet> createState() => _TripFilterSheetState();\r\n}\r\n\r\nclass _TripFilterSheetState extends State<TripFilterSheet> {\r\n  static const List<String> _abroadCountries = <String>[\r\n    'United States (USA)',\r\n    'United Arab Emirates (UAE)',\r\n    'Saudi Arabia',\r\n    'Qatar',\r\n    'Kuwait',\r\n    'Bahrain',\r\n    'Oman',\r\n    'Canada',\r\n    'United Kingdom (UK)',\r\n    'Germany',\r\n    'France',\r\n    'Netherlands',\r\n    'Sweden',\r\n    'Norway',\r\n    'Italy',\r\n    'Spain',\r\n    'Australia',\r\n    'New Zealand',\r\n    'South Africa',\r\n    'Turkey',\r\n    'India',\r\n    'China',\r\n    'Japan',\r\n    'South Korea',\r\n  ];\r\n\r\n  String? _destinationCountry;\r\n  DateTime? _afterDate;\r\n  bool _includePast = false;\r\n\r\n  @override\r\n  void initState() {\r\n    super.initState();\r\n    final existing = widget.initial.destinationCountry?.trim();\r\n    _destinationCountry =\r\n        (existing != null && _abroadCountries.contains(existing))\r\n            ? existing\r\n            : null;\r\n    _afterDate = widget.initial.afterDate;\r\n    _includePast = widget.initial.includePast;\r\n  }\r\n\r\n  @override\r\n  void dispose() => super.dispose();\r\n\r\n  Future<void> _pickDate() async {\r\n    final now = DateTime.now();\r\n    final picked = await showDatePicker(\r\n      context: context,\r\n      initialDate: _afterDate ?? now,\r\n      firstDate: _includePast ? DateTime(2000) : DateTime(now.year, now.month, now.day),\r\n      lastDate: DateTime(now.year + 2),\r\n    );\r\n\r\n    if (picked == null) return;\r\n    setState(() => _afterDate = picked);\r\n  }\r\n\r\n  void _reset() {\r\n    setState(() {\r\n      _destinationCountry = null;\r\n      _afterDate = null;\r\n      _includePast = false;\r\n    });\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    return SafeArea(\r\n      child: Padding(\r\n        padding: const EdgeInsets.all(16),\r\n        child: Column(\r\n          mainAxisSize: MainAxisSize.min,\r\n          crossAxisAlignment: CrossAxisAlignment.start,\r\n          children: [\r\n            Text('Filter trips',\r\n                style: Theme.of(context).textTheme.titleMedium),\r\n            const SizedBox(height: 12),\r\n            DropdownButtonFormField<String>(\r\n              initialValue: _destinationCountry,\r\n              decoration: const InputDecoration(\r\n                labelText: 'Destination country (optional)',\r\n                border: OutlineInputBorder(),\r\n              ),\r\n              items: _abroadCountries\r\n                  .map(\r\n                    (c) => DropdownMenuItem<String>(\r\n                      value: c,\r\n                      child: Text(c),\r\n                    ),\r\n                  )\r\n                  .toList(growable: false),\r\n              onChanged: (v) => setState(() => _destinationCountry = v),\r\n            ),\r\n            const SizedBox(height: 12),\r\n            OutlinedButton.icon(\r\n              onPressed: _pickDate,\r\n              icon: const Icon(Icons.calendar_today_outlined),\r\n              label: Text(_afterDate == null\r\n                  ? 'Departure date: Any'\r\n                  : 'Departure after: ${_afterDate!.toLocal().toString().split(' ').first}'),\r\n            ),\r\n            const SizedBox(height: 8),\r\n            SwitchListTile(\r\n              contentPadding: EdgeInsets.zero,\r\n              title: const Text('Include past trips'),\r\n              value: _includePast,\r\n              onChanged: (v) => setState(() => _includePast = v),\r\n            ),\r\n            const SizedBox(height: 16),\r\n            Row(\r\n              children: [\r\n                Expanded(\r\n                  child: OutlinedButton(\r\n                    onPressed: _reset,\r\n                    child: const Text('Reset'),\r\n                  ),\r\n                ),\r\n                const SizedBox(width: 12),\r\n                Expanded(\r\n                  child: FilledButton(\r\n                    onPressed: () {\r\n                      widget.onApply(\r\n                        TripFilters(\r\n                          destinationCountry: _destinationCountry,\r\n                          afterDate: _afterDate,\r\n                          includePast: _includePast,\r\n                        ),\r\n                      );\r\n                      Navigator.of(context).pop();\r\n                    },\r\n                    child: const Text('Apply'),\r\n                  ),\r\n                ),\r\n              ],\r\n            ),\r\n          ],\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n"
        }
    ]
}
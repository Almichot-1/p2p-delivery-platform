{
    "sourceFile": "lib/features/auth/presentation/screens/register_screen.dart",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1768062539628,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1768065951458,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -0,0 +1,237 @@\n+import 'package:flutter/material.dart';\r\n+import 'package:flutter_bloc/flutter_bloc.dart';\r\n+import 'package:firebase_core/firebase_core.dart';\r\n+import 'package:go_router/go_router.dart';\r\n+\r\n+import '../../../../config/routes.dart';\r\n+import '../../../../core/widgets/custom_button.dart';\r\n+import '../../../../core/widgets/custom_text_field.dart';\r\n+import '../../bloc/auth_bloc.dart';\r\n+import '../../bloc/auth_event.dart';\r\n+import '../../bloc/auth_state.dart';\r\n+import '../widgets/auth_header.dart';\r\n+\r\n+class RegisterScreen extends StatefulWidget {\r\n+  const RegisterScreen({super.key});\r\n+\r\n+  @override\r\n+  State<RegisterScreen> createState() => _RegisterScreenState();\r\n+}\r\n+\r\n+class _RegisterScreenState extends State<RegisterScreen> {\r\n+  final _formKey = GlobalKey<FormState>();\r\n+  final _nameCtrl = TextEditingController();\r\n+  final _emailCtrl = TextEditingController();\r\n+  final _phoneCtrl = TextEditingController();\r\n+  final _passwordCtrl = TextEditingController();\r\n+  final _confirmCtrl = TextEditingController();\r\n+\r\n+  bool _acceptedTerms = false;\r\n+\r\n+  @override\r\n+  void dispose() {\r\n+    _nameCtrl.dispose();\r\n+    _emailCtrl.dispose();\r\n+    _phoneCtrl.dispose();\r\n+    _passwordCtrl.dispose();\r\n+    _confirmCtrl.dispose();\r\n+    super.dispose();\r\n+  }\r\n+\r\n+  void _submit() {\r\n+    if (!(_formKey.currentState?.validate() ?? false)) return;\r\n+\r\n+    if (!_acceptedTerms) {\r\n+      ScaffoldMessenger.of(context).showSnackBar(\r\n+        const SnackBar(content: Text('Please accept Terms & Conditions to continue.')),\r\n+      );\r\n+      return;\r\n+    }\r\n+\r\n+    context.read<AuthBloc>().add(\r\n+          AuthRegisterRequested(\r\n+            email: _emailCtrl.text,\r\n+            password: _passwordCtrl.text,\r\n+            fullName: _nameCtrl.text,\r\n+            phone: _phoneCtrl.text.trim().isEmpty ? null : _phoneCtrl.text.trim(),\r\n+          ),\r\n+        );\r\n+  }\r\n+\r\n+  @override\r\n+  Widget build(BuildContext context) {\r\n+    final firebaseConfigured = Firebase.apps.isNotEmpty;\r\n+    return BlocListener<AuthBloc, AuthState>(\r\n+      listener: (context, state) {\r\n+        if (state is AuthAuthenticated) {\r\n+          context.go(RoutePaths.home);\r\n+        } else if (state is AuthError) {\r\n+          ScaffoldMessenger.of(context).showSnackBar(\r\n+            SnackBar(content: Text(state.message)),\r\n+          );\r\n+        }\r\n+      },\r\n+      child: Scaffold(\r\n+        body: SafeArea(\r\n+          child: SingleChildScrollView(\r\n+            padding: const EdgeInsets.all(20),\r\n+            child: Form(\r\n+              key: _formKey,\r\n+              child: Column(\r\n+                crossAxisAlignment: CrossAxisAlignment.stretch,\r\n+                children: [\r\n+                  const AuthHeader(\r\n+                    title: 'Create Account',\r\n+                    subtitle: 'Join YegnaConnect in minutes.',\r\n+                  ),\r\n+                  if (!firebaseConfigured) ...[\r\n+                    const SizedBox(height: 12),\r\n+                    Text(\r\n+                      'Firebase is not configured for Android yet. Add android/app/google-services.json to enable real login/register.',\r\n+                      style: TextStyle(color: Theme.of(context).colorScheme.error),\r\n+                      textAlign: TextAlign.center,\r\n+                    ),\r\n+                  ],\r\n+                  const SizedBox(height: 20),\r\n+                  CustomTextField(\r\n+                    controller: _nameCtrl,\r\n+                    label: 'Full name',\r\n+                    prefixIcon: Icons.person_outline,\r\n+                    validator: (v) => (v ?? '').trim().isEmpty ? 'Full name is required' : null,\r\n+                  ),\r\n+                  const SizedBox(height: 12),\r\n+                  CustomTextField(\r\n+                    controller: _emailCtrl,\r\n+                    label: 'Email',\r\n+                    keyboardType: TextInputType.emailAddress,\r\n+                    prefixIcon: Icons.email_outlined,\r\n+                    validator: (v) {\r\n+                      final value = (v ?? '').trim();\r\n+                      if (value.isEmpty) return 'Email is required';\r\n+                      if (!value.contains('@')) return 'Enter a valid email';\r\n+                      return null;\r\n+                    },\r\n+                  ),\r\n+                  const SizedBox(height: 12),\r\n+                  CustomTextField(\r\n+                    controller: _phoneCtrl,\r\n+                    label: 'Phone (optional)',\r\n+                    keyboardType: TextInputType.phone,\r\n+                    prefixIcon: Icons.phone_outlined,\r\n+                  ),\r\n+                  const SizedBox(height: 12),\r\n+                  CustomTextField(\r\n+                    controller: _passwordCtrl,\r\n+                    label: 'Password',\r\n+                    obscureText: true,\r\n+                    prefixIcon: Icons.lock_outline,\r\n+                    validator: (v) {\r\n+                      final value = (v ?? '');\r\n+                      if (value.isEmpty) return 'Password is required';\r\n+                      if (value.length < 6) return 'Minimum 6 characters';\r\n+                      return null;\r\n+                    },\r\n+                  ),\r\n+                  const SizedBox(height: 12),\r\n+                  CustomTextField(\r\n+                    controller: _confirmCtrl,\r\n+                    label: 'Confirm password',\r\n+                    obscureText: true,\r\n+                    prefixIcon: Icons.lock_outline,\r\n+                    validator: (v) {\r\n+                      if ((v ?? '').isEmpty) return 'Confirm your password';\r\n+                      if (v != _passwordCtrl.text) return 'Passwords do not match';\r\n+                      return null;\r\n+                    },\r\n+                  ),\r\n+                  const SizedBox(height: 12),\r\n+                  CheckboxListTile(\r\n+                    contentPadding: EdgeInsets.zero,\r\n+                    value: _acceptedTerms,\r\n+                    onChanged: (v) => setState(() => _acceptedTerms = v ?? false),\r\n+                    title: const Text('I accept Terms & Conditions'),\r\n+                    controlAffinity: ListTileControlAffinity.leading,\r\n+                  ),\r\n+                  const SizedBox(height: 8),\r\n+                  BlocBuilder<AuthBloc, AuthState>(\r\n+                    builder: (context, state) {\r\n+                      final loading = state is AuthLoading;\r\n+                      return CustomButton(\r\n+                        label: 'Register',\r\n+                        isLoading: loading,\r\n+                        onPressed: loading ? null : _submit,\r\n+                      );\r\n+                    },\r\n+                  ),\r\n+                  const SizedBox(height: 14),\r\n+                  Row(\r\n+                    children: [\r\n+                      const Expanded(child: Divider()),\r\n+                      Padding(\r\n+                        padding: const EdgeInsets.symmetric(horizontal: 12),\r\n+                        child: Text(\r\n+                          'or',\r\n+                          style: Theme.of(context).textTheme.bodySmall,\r\n+                        ),\r\n+                      ),\r\n+                      const Expanded(child: Divider()),\r\n+                    ],\r\n+                  ),\r\n+                  const SizedBox(height: 14),\r\n+                  BlocBuilder<AuthBloc, AuthState>(\r\n+                    builder: (context, state) {\r\n+                      final loading = state is AuthLoading;\r\n+                      return OutlinedButton(\r\n+                        onPressed: loading\r\n+                            ? null\r\n+                            : () => context.read<AuthBloc>().add(\r\n+                                  const AuthGoogleSignInRequested(),\r\n+                                ),\r\n+                        style: OutlinedButton.styleFrom(\r\n+                          padding: const EdgeInsets.symmetric(vertical: 14),\r\n+                        ),\r\n+                        child: Row(\r\n+                          mainAxisAlignment: MainAxisAlignment.center,\r\n+                          children: [\r\n+                            Container(\r\n+                              width: 22,\r\n+                              height: 22,\r\n+                              alignment: Alignment.center,\r\n+                              decoration: BoxDecoration(\r\n+                                shape: BoxShape.circle,\r\n+                                border: Border.all(\r\n+                                  color: Theme.of(context).colorScheme.outline,\r\n+                                ),\r\n+                              ),\r\n+                              child: const Text(\r\n+                                'G',\r\n+                                style: TextStyle(fontWeight: FontWeight.w800),\r\n+                              ),\r\n+                            ),\r\n+                            const SizedBox(width: 10),\r\n+                            const Text('Continue with Google'),\r\n+                          ],\r\n+                        ),\r\n+                      );\r\n+                    },\r\n+                  ),\r\n+                  const SizedBox(height: 12),\r\n+                  Row(\r\n+                    mainAxisAlignment: MainAxisAlignment.center,\r\n+                    children: [\r\n+                      const Text('Already have account? '),\r\n+                      TextButton(\r\n+                        onPressed: () => context.go(RoutePaths.login),\r\n+                        child: const Text('Login'),\r\n+                      ),\r\n+                    ],\r\n+                  ),\r\n+                ],\r\n+              ),\r\n+            ),\r\n+          ),\r\n+        ),\r\n+      ),\r\n+    );\r\n+  }\r\n+}\r\n"
                }
            ],
            "date": 1768062539628,
            "name": "Commit-0",
            "content": "import 'package:flutter/material.dart';\r\nimport 'package:flutter_bloc/flutter_bloc.dart';\r\nimport 'package:firebase_core/firebase_core.dart';\r\nimport 'package:go_router/go_router.dart';\r\n\r\nimport '../../../../config/routes.dart';\r\nimport '../../../../core/widgets/custom_button.dart';\r\nimport '../../../../core/widgets/custom_text_field.dart';\r\nimport '../../bloc/auth_bloc.dart';\r\nimport '../../bloc/auth_event.dart';\r\nimport '../../bloc/auth_state.dart';\r\nimport '../widgets/auth_header.dart';\r\n\r\nclass RegisterScreen extends StatefulWidget {\r\n  const RegisterScreen({super.key});\r\n\r\n  @override\r\n  State<RegisterScreen> createState() => _RegisterScreenState();\r\n}\r\n\r\nclass _RegisterScreenState extends State<RegisterScreen> {\r\n  final _formKey = GlobalKey<FormState>();\r\n  final _nameCtrl = TextEditingController();\r\n  final _emailCtrl = TextEditingController();\r\n  final _phoneCtrl = TextEditingController();\r\n  final _passwordCtrl = TextEditingController();\r\n  final _confirmCtrl = TextEditingController();\r\n\r\n  bool _acceptedTerms = false;\r\n\r\n  @override\r\n  void dispose() {\r\n    _nameCtrl.dispose();\r\n    _emailCtrl.dispose();\r\n    _phoneCtrl.dispose();\r\n    _passwordCtrl.dispose();\r\n    _confirmCtrl.dispose();\r\n    super.dispose();\r\n  }\r\n\r\n  void _submit() {\r\n    if (!(_formKey.currentState?.validate() ?? false)) return;\r\n\r\n    if (!_acceptedTerms) {\r\n      ScaffoldMessenger.of(context).showSnackBar(\r\n        const SnackBar(content: Text('Please accept Terms & Conditions to continue.')),\r\n      );\r\n      return;\r\n    }\r\n\r\n    context.read<AuthBloc>().add(\r\n          AuthRegisterRequested(\r\n            email: _emailCtrl.text,\r\n            password: _passwordCtrl.text,\r\n            fullName: _nameCtrl.text,\r\n            phone: _phoneCtrl.text.trim().isEmpty ? null : _phoneCtrl.text.trim(),\r\n          ),\r\n        );\r\n  }\r\n\r\n  @override\r\n  Widget build(BuildContext context) {\r\n    final firebaseConfigured = Firebase.apps.isNotEmpty;\r\n    return BlocListener<AuthBloc, AuthState>(\r\n      listener: (context, state) {\r\n        if (state is AuthAuthenticated) {\r\n          context.go(RoutePaths.home);\r\n        } else if (state is AuthError) {\r\n          ScaffoldMessenger.of(context).showSnackBar(\r\n            SnackBar(content: Text(state.message)),\r\n          );\r\n        }\r\n      },\r\n      child: Scaffold(\r\n        body: SafeArea(\r\n          child: SingleChildScrollView(\r\n            padding: const EdgeInsets.all(20),\r\n            child: Form(\r\n              key: _formKey,\r\n              child: Column(\r\n                crossAxisAlignment: CrossAxisAlignment.stretch,\r\n                children: [\r\n                  const AuthHeader(\r\n                    title: 'Create Account',\r\n                    subtitle: 'Join Diaspora Delivery in minutes.',\r\n                  ),\r\n                  if (!firebaseConfigured) ...[\r\n                    const SizedBox(height: 12),\r\n                    Text(\r\n                      'Firebase is not configured for Android yet. Add android/app/google-services.json to enable real login/register.',\r\n                      style: TextStyle(color: Theme.of(context).colorScheme.error),\r\n                      textAlign: TextAlign.center,\r\n                    ),\r\n                  ],\r\n                  const SizedBox(height: 20),\r\n                  CustomTextField(\r\n                    controller: _nameCtrl,\r\n                    label: 'Full name',\r\n                    prefixIcon: Icons.person_outline,\r\n                    validator: (v) => (v ?? '').trim().isEmpty ? 'Full name is required' : null,\r\n                  ),\r\n                  const SizedBox(height: 12),\r\n                  CustomTextField(\r\n                    controller: _emailCtrl,\r\n                    label: 'Email',\r\n                    keyboardType: TextInputType.emailAddress,\r\n                    prefixIcon: Icons.email_outlined,\r\n                    validator: (v) {\r\n                      final value = (v ?? '').trim();\r\n                      if (value.isEmpty) return 'Email is required';\r\n                      if (!value.contains('@')) return 'Enter a valid email';\r\n                      return null;\r\n                    },\r\n                  ),\r\n                  const SizedBox(height: 12),\r\n                  CustomTextField(\r\n                    controller: _phoneCtrl,\r\n                    label: 'Phone (optional)',\r\n                    keyboardType: TextInputType.phone,\r\n                    prefixIcon: Icons.phone_outlined,\r\n                  ),\r\n                  const SizedBox(height: 12),\r\n                  CustomTextField(\r\n                    controller: _passwordCtrl,\r\n                    label: 'Password',\r\n                    obscureText: true,\r\n                    prefixIcon: Icons.lock_outline,\r\n                    validator: (v) {\r\n                      final value = (v ?? '');\r\n                      if (value.isEmpty) return 'Password is required';\r\n                      if (value.length < 6) return 'Minimum 6 characters';\r\n                      return null;\r\n                    },\r\n                  ),\r\n                  const SizedBox(height: 12),\r\n                  CustomTextField(\r\n                    controller: _confirmCtrl,\r\n                    label: 'Confirm password',\r\n                    obscureText: true,\r\n                    prefixIcon: Icons.lock_outline,\r\n                    validator: (v) {\r\n                      if ((v ?? '').isEmpty) return 'Confirm your password';\r\n                      if (v != _passwordCtrl.text) return 'Passwords do not match';\r\n                      return null;\r\n                    },\r\n                  ),\r\n                  const SizedBox(height: 12),\r\n                  CheckboxListTile(\r\n                    contentPadding: EdgeInsets.zero,\r\n                    value: _acceptedTerms,\r\n                    onChanged: (v) => setState(() => _acceptedTerms = v ?? false),\r\n                    title: const Text('I accept Terms & Conditions'),\r\n                    controlAffinity: ListTileControlAffinity.leading,\r\n                  ),\r\n                  const SizedBox(height: 8),\r\n                  BlocBuilder<AuthBloc, AuthState>(\r\n                    builder: (context, state) {\r\n                      final loading = state is AuthLoading;\r\n                      return CustomButton(\r\n                        label: 'Register',\r\n                        isLoading: loading,\r\n                        onPressed: loading ? null : _submit,\r\n                      );\r\n                    },\r\n                  ),\r\n                  const SizedBox(height: 14),\r\n                  Row(\r\n                    children: [\r\n                      const Expanded(child: Divider()),\r\n                      Padding(\r\n                        padding: const EdgeInsets.symmetric(horizontal: 12),\r\n                        child: Text(\r\n                          'or',\r\n                          style: Theme.of(context).textTheme.bodySmall,\r\n                        ),\r\n                      ),\r\n                      const Expanded(child: Divider()),\r\n                    ],\r\n                  ),\r\n                  const SizedBox(height: 14),\r\n                  BlocBuilder<AuthBloc, AuthState>(\r\n                    builder: (context, state) {\r\n                      final loading = state is AuthLoading;\r\n                      return OutlinedButton(\r\n                        onPressed: loading\r\n                            ? null\r\n                            : () => context.read<AuthBloc>().add(\r\n                                  const AuthGoogleSignInRequested(),\r\n                                ),\r\n                        style: OutlinedButton.styleFrom(\r\n                          padding: const EdgeInsets.symmetric(vertical: 14),\r\n                        ),\r\n                        child: Row(\r\n                          mainAxisAlignment: MainAxisAlignment.center,\r\n                          children: [\r\n                            Container(\r\n                              width: 22,\r\n                              height: 22,\r\n                              alignment: Alignment.center,\r\n                              decoration: BoxDecoration(\r\n                                shape: BoxShape.circle,\r\n                                border: Border.all(\r\n                                  color: Theme.of(context).colorScheme.outline,\r\n                                ),\r\n                              ),\r\n                              child: const Text(\r\n                                'G',\r\n                                style: TextStyle(fontWeight: FontWeight.w800),\r\n                              ),\r\n                            ),\r\n                            const SizedBox(width: 10),\r\n                            const Text('Continue with Google'),\r\n                          ],\r\n                        ),\r\n                      );\r\n                    },\r\n                  ),\r\n                  const SizedBox(height: 12),\r\n                  Row(\r\n                    mainAxisAlignment: MainAxisAlignment.center,\r\n                    children: [\r\n                      const Text('Already have account? '),\r\n                      TextButton(\r\n                        onPressed: () => context.go(RoutePaths.login),\r\n                        child: const Text('Login'),\r\n                      ),\r\n                    ],\r\n                  ),\r\n                ],\r\n              ),\r\n            ),\r\n          ),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n}\r\n"
        }
    ]
}